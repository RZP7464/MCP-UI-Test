{"version":3,"file":"TableEditableCell.web.js","sources":["../../../../../../src/components/Table/TableEditableCell.web.tsx"],"sourcesContent":["import styled from 'styled-components';\nimport { CellWrapper, StyledCell } from './TableBody';\nimport { useTableContext } from './TableContext';\nimport type { TableEditableCellProps, TableEditableDropdownCellProps, TableProps } from './types';\nimport {\n  rowDensityToIsTableInputCellMapping,\n  tableEditableCellRowDensityToInputSizeMap,\n  validationStateToInputTrailingIconMap,\n} from './tokens';\nimport { ComponentIds } from './componentIds';\nimport { TableEditableCellContext } from './TableEditableCellContext';\nimport { getFocusRingStyles } from '~utils/getFocusRingStyles';\nimport type { MarginProps } from '~components/Box/BaseBox/types/spacingTypes';\nimport { MetaConstants, metaAttribute } from '~utils/metaAttribute';\nimport BaseBox from '~components/Box/BaseBox';\nimport { Box } from '~components/Box';\nimport { BaseInput } from '~components/Input/BaseInput';\nimport { castWebType } from '~utils';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { Dropdown } from '~components/Dropdown';\nimport { getKeyboardAndAutocompleteProps } from '~components/Input/BaseInput/utils';\n\nconst StyledEditableCell = styled(StyledCell)<{\n  $rowDensity: NonNullable<TableProps<unknown>['rowDensity']>;\n}>(({ theme, $rowDensity }) => ({\n  '&&&': {\n    '&:focus-visible': { outline: '1px solid' },\n    '&:focus-within': {\n      ...($rowDensity !== 'comfortable' ? getFocusRingStyles({ theme, negativeOffset: true }) : {}),\n    },\n  },\n}));\n\nconst getEditableInputMargin = ({\n  rowDensity,\n}: {\n  rowDensity: NonNullable<TableProps<unknown>['rowDensity']>;\n}): MarginProps['margin'] => {\n  if (rowDensity === 'comfortable') {\n    return ['spacing.4', 'spacing.4'];\n  }\n\n  return 'spacing.2';\n};\n\nconst _TableEditableCell = ({\n  validationState = 'none',\n  accessibilityLabel,\n  autoCapitalize,\n  autoCompleteSuggestionType,\n  autoFocus,\n  defaultValue,\n  isDisabled,\n  isRequired,\n  keyboardReturnKeyType,\n  leadingIcon,\n  maxCharacters,\n  name,\n  onBlur,\n  onChange,\n  onClick,\n  onFocus,\n  onSubmit,\n  placeholder,\n  prefix,\n  suffix,\n  value,\n  testID,\n  trailingButton,\n  errorText,\n  successText,\n  inputType,\n}: TableEditableCellProps): React.ReactElement => {\n  const { rowDensity, showStripedRows, backgroundColor } = useTableContext();\n\n  return (\n    <StyledEditableCell\n      role=\"cell\"\n      $backgroundColor={backgroundColor}\n      $rowDensity={rowDensity}\n      {...metaAttribute({ name: MetaConstants.TableCell })}\n    >\n      <BaseBox className=\"cell-wrapper-base\" display=\"flex\" alignItems=\"center\" height=\"100%\">\n        <CellWrapper\n          className=\"cell-wrapper\"\n          $rowDensity={rowDensity}\n          showStripedRows={showStripedRows}\n          display=\"flex\"\n          alignItems=\"center\"\n          flex={1}\n          hasPadding={false}\n        >\n          <Box margin={getEditableInputMargin({ rowDensity })} width=\"100%\">\n            <BaseInput\n              isTableInputCell={rowDensityToIsTableInputCellMapping[rowDensity]}\n              validationState={validationState}\n              id=\"table-editable-cell-input\"\n              size={tableEditableCellRowDensityToInputSizeMap[rowDensity]}\n              trailingIcon={validationStateToInputTrailingIconMap[validationState]}\n              accessibilityLabel={accessibilityLabel}\n              // eslint-disable-next-line jsx-a11y/no-autofocus\n              autoFocus={autoFocus}\n              defaultValue={defaultValue}\n              isDisabled={isDisabled}\n              isRequired={isRequired}\n              leadingIcon={leadingIcon}\n              maxCharacters={maxCharacters}\n              name={name}\n              onBlur={onBlur}\n              onChange={onChange}\n              onClick={onClick}\n              onFocus={onFocus}\n              onSubmit={castWebType(onSubmit)}\n              placeholder={placeholder}\n              prefix={prefix}\n              suffix={suffix}\n              value={value}\n              testID={testID}\n              trailingButton={trailingButton}\n              errorText={errorText}\n              successText={successText}\n              showHintsAsTooltip={true}\n              {...getKeyboardAndAutocompleteProps({\n                type: inputType,\n                keyboardReturnKeyType,\n                autoCompleteSuggestionType,\n                autoCapitalize,\n              })}\n            />\n          </Box>\n        </CellWrapper>\n      </BaseBox>\n    </StyledEditableCell>\n  );\n};\n\nconst TableEditableDropdownCell = (\n  dropdownProps: TableEditableDropdownCellProps,\n): React.ReactElement => {\n  const { rowDensity, showStripedRows, backgroundColor } = useTableContext();\n\n  return (\n    <TableEditableCellContext.Provider value={{ isInsideTableEditableCell: true }}>\n      <StyledEditableCell\n        role=\"cell\"\n        $backgroundColor={backgroundColor}\n        $rowDensity={rowDensity}\n        {...metaAttribute({ name: MetaConstants.TableCell })}\n      >\n        <BaseBox\n          className=\"cell-wrapper-base\"\n          display=\"flex\"\n          alignItems=\"center\"\n          height=\"100%\"\n          width=\"100%\"\n        >\n          <CellWrapper\n            className=\"cell-wrapper\"\n            $rowDensity={rowDensity}\n            showStripedRows={showStripedRows}\n            display=\"flex\"\n            alignItems=\"center\"\n            flex={1}\n            hasPadding={false}\n          >\n            <Dropdown\n              _width=\"calc(100% - 8px)\"\n              margin={getEditableInputMargin({ rowDensity })}\n              {...dropdownProps}\n            />\n          </CellWrapper>\n        </BaseBox>\n      </StyledEditableCell>\n    </TableEditableCellContext.Provider>\n  );\n};\n\nconst TableEditableCell = assignWithoutSideEffects(_TableEditableCell, {\n  componentId: ComponentIds.TableEditableCell,\n});\n\nexport { TableEditableCell, TableEditableDropdownCell };\n"],"names":["StyledEditableCell","styled","StyledCell","withConfig","displayName","componentId","_ref","theme","$rowDensity","outline","_objectSpread","getFocusRingStyles","negativeOffset","getEditableInputMargin","_ref2","rowDensity","_TableEditableCell","_ref3","_ref3$validationState","validationState","accessibilityLabel","autoCapitalize","autoCompleteSuggestionType","autoFocus","defaultValue","isDisabled","isRequired","keyboardReturnKeyType","leadingIcon","maxCharacters","name","onBlur","onChange","onClick","onFocus","onSubmit","placeholder","prefix","suffix","value","testID","trailingButton","errorText","successText","inputType","_useTableContext","useTableContext","showStripedRows","backgroundColor","_jsx","role","$backgroundColor","metaAttribute","MetaConstants","TableCell","children","BaseBox","className","display","alignItems","height","CellWrapper","flex","hasPadding","Box","margin","width","BaseInput","isTableInputCell","rowDensityToIsTableInputCellMapping","id","size","tableEditableCellRowDensityToInputSizeMap","trailingIcon","validationStateToInputTrailingIconMap","castWebType","showHintsAsTooltip","getKeyboardAndAutocompleteProps","type","TableEditableDropdownCell","dropdownProps","_useTableContext2","TableEditableCellContext","Provider","isInsideTableEditableCell","Dropdown","_width","TableEditableCell","assignWithoutSideEffects","ComponentIds"],"mappings":"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"}