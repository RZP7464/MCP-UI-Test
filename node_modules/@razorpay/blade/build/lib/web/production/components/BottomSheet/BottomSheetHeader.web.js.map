{"version":3,"file":"BottomSheetHeader.web.js","sources":["../../../../../../src/components/BottomSheet/BottomSheetHeader.web.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/prefer-nullish-coalescing */\nimport React from 'react';\nimport { ComponentIds } from './componentIds';\nimport { useBottomSheetAndDropdownGlue, useBottomSheetContext } from './BottomSheetContext';\nimport type { BottomSheetHeaderProps } from './types';\nimport { BottomSheetEmptyHeader } from './BottomSheetCommon';\nimport { BaseHeader } from '~components/BaseHeaderFooter/BaseHeader';\nimport BaseBox from '~components/Box/BaseBox';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { useIsomorphicLayoutEffect } from '~utils/useIsomorphicLayoutEffect';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\nconst _BottomSheetHeader = ({\n  title,\n  subtitle,\n  leading,\n  trailing,\n  titleSuffix,\n  showBackButton = false,\n  onBackButtonClick,\n  children,\n  ...dataAnalyticsProps\n}: BottomSheetHeaderProps): React.ReactElement => {\n  const {\n    setHeaderHeight,\n    isOpen,\n    close,\n    isDismissible,\n    bind,\n    setIsHeaderEmpty,\n    defaultInitialFocusRef,\n  } = useBottomSheetContext();\n  const bottomSheetAndDropdownGlue = useBottomSheetAndDropdownGlue();\n  const ref = React.useRef<HTMLDivElement>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!ref.current) return;\n    if (!title && !subtitle) return;\n    setHeaderHeight(ref.current.getBoundingClientRect().height);\n  }, [ref, isOpen]);\n\n  const isHeaderEmpty = !(title || subtitle || leading || trailing || showBackButton || children);\n\n  React.useEffect(() => {\n    setIsHeaderEmpty(isHeaderEmpty);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isHeaderEmpty]);\n\n  return (\n    <BaseBox\n      ref={ref}\n      overflow={isHeaderEmpty ? 'visible' : 'auto'}\n      flexShrink={0}\n      {...metaAttribute({ name: MetaConstants.BottomSheetHeader })}\n      {...makeAnalyticsAttribute(dataAnalyticsProps)}\n    >\n      {isHeaderEmpty ? (\n        <BottomSheetEmptyHeader ref={defaultInitialFocusRef} />\n      ) : (\n        <BaseHeader\n          title={title}\n          subtitle={subtitle}\n          leading={leading}\n          trailing={trailing}\n          titleSuffix={titleSuffix}\n          // we don't set focus on close button when it has AutoComplete inside.\n          // We set focus on AutoComplete instead inside AutoComplete component\n          closeButtonRef={\n            bottomSheetAndDropdownGlue?.hasAutoCompleteInHeader ? undefined : defaultInitialFocusRef\n          }\n          // back button\n          showBackButton={showBackButton}\n          onBackButtonClick={onBackButtonClick}\n          // close button\n          showCloseButton={isDismissible}\n          onCloseButtonClick={close}\n          {...bind?.()}\n        >\n          {children}\n        </BaseHeader>\n      )}\n    </BaseBox>\n  );\n};\n\nconst BottomSheetHeader = assignWithoutSideEffects(_BottomSheetHeader, {\n  componentId: ComponentIds.BottomSheetHeader,\n});\n\nexport { BottomSheetHeader };\n"],"names":["_BottomSheetHeader","_ref","title","subtitle","leading","trailing","titleSuffix","_ref$showBackButton","showBackButton","onBackButtonClick","children","dataAnalyticsProps","_objectWithoutProperties","_excluded","_useBottomSheetContex","useBottomSheetContext","setHeaderHeight","isOpen","close","isDismissible","bind","setIsHeaderEmpty","defaultInitialFocusRef","bottomSheetAndDropdownGlue","useBottomSheetAndDropdownGlue","ref","React","useRef","useIsomorphicLayoutEffect","current","getBoundingClientRect","height","isHeaderEmpty","useEffect","_jsx","BaseBox","_objectSpread","overflow","flexShrink","metaAttribute","name","MetaConstants","BottomSheetHeader","makeAnalyticsAttribute","BottomSheetEmptyHeader","BaseHeader","closeButtonRef","hasAutoCompleteInHeader","undefined","showCloseButton","onCloseButtonClick","assignWithoutSideEffects","componentId","ComponentIds"],"mappings":"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"}