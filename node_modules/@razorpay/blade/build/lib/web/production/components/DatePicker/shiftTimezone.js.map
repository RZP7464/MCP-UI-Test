{"version":3,"file":"shiftTimezone.js","sources":["../../../../../../src/components/DatePicker/shiftTimezone.tsx"],"sourcesContent":["import dayjs from 'dayjs';\nimport timezonePlugin from 'dayjs/plugin/timezone';\nimport utcPlugin from 'dayjs/plugin/utc';\nimport type { DateValue, DatesRangeValue } from './types';\n\ndayjs.extend(utcPlugin);\ndayjs.extend(timezonePlugin);\n\nfunction getTimezoneOffset(date: Date, timezone?: string): number {\n  if (timezone) {\n    return dayjs(date).tz(timezone).utcOffset() + date.getTimezoneOffset();\n  }\n  return 0;\n}\n\ntype TimeShiftDirection = 'add' | 'remove';\n\nconst updateTimezone = (\n  date: DateValue | undefined,\n  timezone?: string,\n  direction?: TimeShiftDirection,\n): DateValue => {\n  if (!date) {\n    return null;\n  }\n  if (!timezone) {\n    return date;\n  }\n  let offset = getTimezoneOffset(date, timezone);\n  if (direction === 'remove') {\n    offset *= -1;\n  }\n  return dayjs(date).add(offset, 'minutes').toDate();\n};\n\nexport function shiftTimezone<T extends DateValue | Date[] | DatesRangeValue | undefined>(\n  direction: TimeShiftDirection,\n  date: T,\n  timezone?: string,\n  disabled?: boolean,\n): T {\n  if (disabled || !date) {\n    return date;\n  }\n  if (Array.isArray(date)) {\n    return date.map((d) => updateTimezone(d, timezone, direction)) as T;\n  }\n  return updateTimezone(date, timezone, direction) as T;\n}\n"],"names":["dayjs","extend","utcPlugin","timezonePlugin","getTimezoneOffset","date","timezone","tz","utcOffset","updateTimezone","direction","offset","add","toDate","shiftTimezone","disabled","Array","isArray","map","d"],"mappings":";;;;AAKAA,KAAK,CAACC,MAAM,CAACC,SAAS,CAAC,CAAA;AACvBF,KAAK,CAACC,MAAM,CAACE,cAAc,CAAC,CAAA;AAE5B,SAASC,iBAAiBA,CAACC,IAAU,EAAEC,QAAiB,EAAU;AAChE,EAAA,IAAIA,QAAQ,EAAE;AACZ,IAAA,OAAON,KAAK,CAACK,IAAI,CAAC,CAACE,EAAE,CAACD,QAAQ,CAAC,CAACE,SAAS,EAAE,GAAGH,IAAI,CAACD,iBAAiB,EAAE,CAAA;AACxE,GAAA;AACA,EAAA,OAAO,CAAC,CAAA;AACV,CAAA;AAIA,IAAMK,cAAc,GAAG,SAAjBA,cAAcA,CAClBJ,IAA2B,EAC3BC,QAAiB,EACjBI,SAA8B,EAChB;EACd,IAAI,CAACL,IAAI,EAAE;AACT,IAAA,OAAO,IAAI,CAAA;AACb,GAAA;EACA,IAAI,CAACC,QAAQ,EAAE;AACb,IAAA,OAAOD,IAAI,CAAA;AACb,GAAA;AACA,EAAA,IAAIM,MAAM,GAAGP,iBAAiB,CAACC,IAAI,EAAEC,QAAQ,CAAC,CAAA;EAC9C,IAAII,SAAS,KAAK,QAAQ,EAAE;IAC1BC,MAAM,IAAI,CAAC,CAAC,CAAA;AACd,GAAA;AACA,EAAA,OAAOX,KAAK,CAACK,IAAI,CAAC,CAACO,GAAG,CAACD,MAAM,EAAE,SAAS,CAAC,CAACE,MAAM,EAAE,CAAA;AACpD,CAAC,CAAA;AAEM,SAASC,aAAaA,CAC3BJ,SAA6B,EAC7BL,IAAO,EACPC,QAAiB,EACjBS,QAAkB,EACf;AACH,EAAA,IAAIA,QAAQ,IAAI,CAACV,IAAI,EAAE;AACrB,IAAA,OAAOA,IAAI,CAAA;AACb,GAAA;AACA,EAAA,IAAIW,KAAK,CAACC,OAAO,CAACZ,IAAI,CAAC,EAAE;AACvB,IAAA,OAAOA,IAAI,CAACa,GAAG,CAAC,UAACC,CAAC,EAAA;AAAA,MAAA,OAAKV,cAAc,CAACU,CAAC,EAAEb,QAAQ,EAAEI,SAAS,CAAC,CAAA;KAAC,CAAA,CAAA;AAChE,GAAA;AACA,EAAA,OAAOD,cAAc,CAACJ,IAAI,EAAEC,QAAQ,EAAEI,SAAS,CAAC,CAAA;AAClD;;;;"}