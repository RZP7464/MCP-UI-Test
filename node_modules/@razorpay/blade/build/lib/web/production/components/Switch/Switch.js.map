{"version":3,"file":"Switch.js","sources":["../../../../../../src/components/Switch/Switch.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/ban-ts-comment */\n/* eslint-disable @typescript-eslint/prefer-ts-expect-error */\nimport React from 'react';\nimport { ThumbIcon } from './ThumbIcon';\nimport type { SwitchProps } from './types';\nimport { switchHoverTokens } from './switchTokens';\nimport { Thumb } from './Thumb';\nimport { AnimatedThumb } from './AnimatedThumb';\nimport { SwitchTrack } from './SwitchTrack';\nimport { useTheme } from '~components/BladeProvider';\nimport { BaseBox } from '~components/Box/BaseBox';\nimport { useCheckbox } from '~components/Checkbox/useCheckbox';\nimport { SelectorInput } from '~components/Form/Selector/SelectorInput';\nimport { useBreakpoint } from '~utils';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { SelectorLabel } from '~components/Form/Selector/SelectorLabel';\nimport type { BladeElementRef } from '~utils/types';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport { getInnerMotionRef, getOuterMotionRef } from '~utils/getMotionRefs';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\nconst _Switch: React.ForwardRefRenderFunction<BladeElementRef, SwitchProps> = (\n  {\n    defaultChecked,\n    isChecked,\n    isDisabled,\n    name,\n    onChange,\n    size = 'medium',\n    value,\n    accessibilityLabel,\n    testID,\n    _motionMeta,\n    ...rest\n  },\n  ref,\n): React.ReactElement => {\n  const { theme } = useTheme();\n  const { matchedDeviceType } = useBreakpoint({ breakpoints: theme.breakpoints });\n  const [isPressed, setIsPressed] = React.useState(false);\n  const { state, inputProps } = useCheckbox({\n    role: 'switch',\n    defaultChecked,\n    isChecked,\n    isIndeterminate: false,\n    hasError: false,\n    hasHelperText: false,\n    isDisabled,\n    isRequired: false,\n    name,\n    value,\n    onChange,\n  });\n\n  const handlePointerPressedIn = React.useCallback(() => {\n    if (isDisabled) return;\n    setIsPressed(true);\n  }, [isDisabled]);\n\n  const handlePointerPressedOut = React.useCallback(() => {\n    if (isDisabled) return;\n    setIsPressed(false);\n  }, [isDisabled]);\n\n  const handleKeyboardPressedIn = React.useCallback(\n    (e: React.KeyboardEvent) => {\n      if (isDisabled) return;\n      if (e.key === ' ') {\n        setIsPressed(true);\n      }\n    },\n    [isDisabled],\n  );\n\n  const handleKeyboardPressedOut = React.useCallback(\n    (e: React.KeyboardEvent) => {\n      if (isDisabled) return;\n      if (e.key === ' ') {\n        setIsPressed(false);\n      }\n    },\n    [isDisabled],\n  );\n\n  return (\n    <BaseBox\n      ref={getOuterMotionRef({ _motionMeta, ref })}\n      {...metaAttribute({ testID, name: MetaConstants.Switch })}\n      // @ts-ignore on rn inline-block is not valid but type here will be `flex | inline-block`\n      display={state.isReactNative ? 'flex' : 'inline-block'}\n      {...getStyledProps(rest)}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      <SelectorLabel\n        componentName={MetaConstants.SwitchLabel}\n        onTouchStart={handlePointerPressedIn}\n        onTouchEnd={handlePointerPressedOut}\n        onMouseDown={handlePointerPressedIn}\n        onMouseUp={handlePointerPressedOut}\n        onMouseOut={handlePointerPressedOut}\n        onKeyDown={handleKeyboardPressedIn}\n        onKeyUp={handleKeyboardPressedOut}\n        style={{ cursor: isDisabled ? 'not-allowed' : 'pointer' }}\n        inputProps={\n          state.isReactNative\n            ? // accessibility label for react-native needs to be added\n              // since there is no text children inside Switch\n              { ...inputProps, ...makeAccessible({ label: accessibilityLabel }) }\n            : {}\n        }\n      >\n        <SelectorInput\n          hoverTokens={switchHoverTokens}\n          ref={getInnerMotionRef({ _motionMeta, ref })}\n          isChecked={state.isChecked}\n          isDisabled={isDisabled}\n          hasError={false}\n          inputProps={inputProps}\n          accessibilityLabel={accessibilityLabel}\n        />\n        <SwitchTrack\n          size={size}\n          deviceType={matchedDeviceType}\n          isDisabled={Boolean(isDisabled)}\n          isChecked={state.isChecked}\n          {...makeAccessible({ hidden: true })}\n        >\n          <Thumb size={size} deviceType={matchedDeviceType} isChecked={state.isChecked}>\n            <AnimatedThumb\n              isPressed={isPressed}\n              isChecked={state.isChecked}\n              isDisabled={isDisabled}\n              size={size}\n            >\n              <ThumbIcon isChecked={state.isChecked} isDisabled={isDisabled} size={size} />\n            </AnimatedThumb>\n          </Thumb>\n        </SwitchTrack>\n      </SelectorLabel>\n    </BaseBox>\n  );\n};\n\nconst Switch = assignWithoutSideEffects(React.forwardRef(_Switch), {\n  displayName: 'Switch',\n});\n\nexport { Switch };\n"],"names":["_Switch","_ref","ref","defaultChecked","isChecked","isDisabled","name","onChange","_ref$size","size","value","accessibilityLabel","testID","_motionMeta","rest","_objectWithoutProperties","_excluded","_useTheme","useTheme","theme","_useBreakpoint","useBreakpoint","breakpoints","matchedDeviceType","_React$useState","React","useState","_React$useState2","_slicedToArray","isPressed","setIsPressed","_useCheckbox","useCheckbox","role","isIndeterminate","hasError","hasHelperText","isRequired","state","inputProps","handlePointerPressedIn","useCallback","handlePointerPressedOut","handleKeyboardPressedIn","e","key","handleKeyboardPressedOut","_jsx","BaseBox","_objectSpread","getOuterMotionRef","metaAttribute","MetaConstants","Switch","display","isReactNative","getStyledProps","makeAnalyticsAttribute","children","_jsxs","SelectorLabel","componentName","SwitchLabel","onTouchStart","onTouchEnd","onMouseDown","onMouseUp","onMouseOut","onKeyDown","onKeyUp","style","cursor","makeAccessible","label","SelectorInput","hoverTokens","switchHoverTokens","getInnerMotionRef","SwitchTrack","deviceType","Boolean","hidden","Thumb","AnimatedThumb","ThumbIcon","assignWithoutSideEffects","forwardRef","displayName"],"mappings":"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"}