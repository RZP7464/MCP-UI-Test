{"version":3,"file":"CarouselItem.web.js","sources":["../../../../../../src/components/Carousel/CarouselItem.web.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/restrict-plus-operands */\n/* eslint-disable consistent-return */\n/* eslint-disable @typescript-eslint/no-unnecessary-type-assertion */\nimport styled from 'styled-components';\nimport React from 'react';\nimport type { CarouselProps } from './types';\nimport { useCarouselContext } from './CarouselContext';\nimport { componentIds } from './constants';\nimport BaseBox from '~components/Box/BaseBox';\nimport { useTheme } from '~components/BladeProvider';\nimport { useBreakpoint } from '~utils';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport type { DataAnalyticsAttribute } from '~utils/types';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\nimport { getSpacingValue } from '~components/Box/BaseBox/baseBoxStyles';\n\ntype StyledCarouselItemProps = Pick<CarouselProps, 'visibleItems' | 'shouldAddStartEndSpacing'> &\n  Pick<\n    CarouselItemProps,\n    'shouldHaveEndSpacing' | 'shouldHaveStartSpacing' | 'snapAlign' | 'gap'\n  > & {\n    isMobile?: boolean;\n    isResponsive?: boolean;\n  };\n\nconst StyledCarouselItem = styled(BaseBox)<StyledCarouselItemProps>(\n  ({\n    visibleItems,\n    isResponsive,\n    shouldAddStartEndSpacing,\n    shouldHaveStartSpacing,\n    theme,\n    snapAlign,\n    gap,\n  }) => {\n    const { matchedDeviceType, matchedBreakpoint } = useBreakpoint({\n      breakpoints: theme.breakpoints,\n    });\n    const isMobile = matchedDeviceType === 'mobile';\n\n    // Resolve gap value: convert spacing token to pixels or use default spacing\n    // Default: spacing.4 (12px) on mobile, spacing.5 (16px) on desktop\n    const resolvedGap = gap\n      ? parseInt(\n          getSpacingValue(\n            gap,\n            theme,\n            typeof gap === 'string' ? 'base' : matchedBreakpoint || 'base',\n          ) || '0',\n          10,\n        )\n      : isMobile\n      ? theme.spacing[4]\n      : theme.spacing[5];\n\n    // Calculate item width: (containerWidth / numberOfItems) - (totalGapSpace / numberOfItems)\n    // This ensures each item gets equal width while accounting for gaps between items\n    const calculatedWidth = `calc(100% / ${visibleItems!} - ${resolvedGap}px * (${visibleItems} - 1) / ${visibleItems})`;\n    const calculatedMarginLeft = shouldHaveStartSpacing\n      ? `calc(${calculatedWidth} + ${resolvedGap}px)`\n      : 0;\n\n    return {\n      flexGrow: 0,\n      flexShrink: 0,\n      width: calculatedWidth,\n      minHeight: '100%',\n      scrollSnapAlign: snapAlign ?? 'start',\n      marginLeft: calculatedMarginLeft,\n\n      // Responsive slider styles, a special case\n      ...(isResponsive && {\n        width: '100%',\n        scrollSnapAlign: snapAlign ?? (isMobile || !shouldAddStartEndSpacing ? 'start' : 'center'),\n        marginLeft: shouldHaveStartSpacing ? '40%' : 0,\n      }),\n    };\n  },\n);\n\ntype CarouselItemProps = {\n  id?: string;\n  index?: number;\n  children: React.ReactNode;\n  shouldHaveStartSpacing?: boolean;\n  shouldHaveEndSpacing?: boolean;\n  snapAlign?: CarouselProps['snapAlign'];\n  gap?: CarouselProps['gap'];\n} & DataAnalyticsAttribute;\n\nconst _CarouselItem = ({\n  children,\n  shouldHaveStartSpacing,\n  shouldHaveEndSpacing,\n  id,\n  index,\n  snapAlign,\n  gap,\n  ...rest\n}: CarouselItemProps): React.ReactElement => {\n  const itemRef = React.useRef<HTMLDivElement>(null);\n  const {\n    totalNumberOfSlides,\n    visibleItems,\n    isResponsive,\n    carouselItemWidth,\n    shouldAddStartEndSpacing,\n  } = useCarouselContext();\n  const { platform } = useTheme();\n  const isMobile = platform === 'onMobile';\n\n  return (\n    <StyledCarouselItem\n      {...makeAccessible({\n        role: 'tabpanel',\n        roleDescription: 'slide',\n        label: `${index! + 1} of ${totalNumberOfSlides}`,\n      })}\n      ref={itemRef}\n      id={id}\n      isMobile={isMobile}\n      data-slide-index={index}\n      isResponsive={isResponsive}\n      visibleItems={visibleItems}\n      maxWidth={carouselItemWidth}\n      shouldAddStartEndSpacing={shouldAddStartEndSpacing}\n      shouldHaveStartSpacing={shouldHaveStartSpacing}\n      shouldHaveEndSpacing={shouldHaveEndSpacing}\n      snapAlign={snapAlign}\n      gap={gap}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      {children}\n    </StyledCarouselItem>\n  );\n};\n\nconst CarouselItem = assignWithoutSideEffects(_CarouselItem, {\n  componentId: componentIds.CarouselItem,\n});\n\nexport { CarouselItem };\n"],"names":["StyledCarouselItem","styled","BaseBox","withConfig","displayName","componentId","_ref","visibleItems","isResponsive","shouldAddStartEndSpacing","shouldHaveStartSpacing","theme","snapAlign","gap","_useBreakpoint","useBreakpoint","breakpoints","matchedDeviceType","matchedBreakpoint","isMobile","resolvedGap","parseInt","getSpacingValue","spacing","calculatedWidth","concat","calculatedMarginLeft","_objectSpread","flexGrow","flexShrink","width","minHeight","scrollSnapAlign","marginLeft","_CarouselItem","_ref2","children","shouldHaveEndSpacing","id","index","rest","_objectWithoutProperties","_excluded","itemRef","React","useRef","_useCarouselContext","useCarouselContext","totalNumberOfSlides","carouselItemWidth","_useTheme","useTheme","platform","_jsx","makeAccessible","role","roleDescription","label","ref","maxWidth","makeAnalyticsAttribute","CarouselItem","assignWithoutSideEffects","componentIds"],"mappings":"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"}