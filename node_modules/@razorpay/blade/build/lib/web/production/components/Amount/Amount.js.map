{"version":3,"file":"Amount.js","sources":["../../../../../../src/components/Amount/Amount.tsx"],"sourcesContent":["import type { ReactElement } from 'react';\nimport React from 'react';\nimport type { CurrencyCodeType } from '@razorpay/i18nify-js/currency';\nimport { formatNumberByParts } from '@razorpay/i18nify-js/currency';\nimport type { AmountTypeProps } from './amountTokens';\nimport { normalAmountSizes, subtleFontSizes, amountLineHeights } from './amountTokens';\nimport type { BaseTextProps } from '~components/Typography/BaseText/types';\nimport BaseBox from '~components/Box/BaseBox';\nimport type { DataAnalyticsAttribute, BladeElementRef, TestID } from '~utils/types';\nimport { getPlatformType } from '~utils';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { throwBladeError } from '~utils/logger';\nimport { objectKeysWithType } from '~utils/objectKeysWithType';\nimport { BaseText } from '~components/Typography/BaseText';\nimport { Text } from '~components/Typography';\nimport { opacity } from '~tokens/global';\nimport type { FontFamily } from '~tokens/global';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\n/**\n * Pollyfill function to get around the node 18 error\n *\n * This function is maintained by i18nify team. Reach out to them for any change regarding this.\n */\nconst stripTrailingZerosFromParts = (\n  parts: ReturnType<typeof formatNumberByParts>,\n): ReturnType<typeof formatNumberByParts> => {\n  const decimalPart = parts.rawParts\n    .filter(({ type }) => type === 'fraction')\n    .map(({ value }) => value)\n    .join('');\n\n  const hasFraction = parts.rawParts.some(({ type }) => type === 'fraction');\n\n  if (hasFraction && /^0+$/.test(decimalPart)) {\n    delete parts.decimal;\n    delete parts.fraction;\n    parts.rawParts = parts.rawParts.filter(({ type }) => type !== 'decimal' && type !== 'fraction');\n  }\n\n  return parts;\n};\n\n/**\n * Wrapper that uses pollyfill of i18nify team\n */\nconst pollyfilledFormatNumberByParts: typeof formatNumberByParts = (value, options) => {\n  const parts = formatNumberByParts(value, options);\n\n  if (options?.intlOptions?.trailingZeroDisplay === 'stripIfInteger') {\n    return stripTrailingZerosFromParts(parts);\n  }\n\n  return parts;\n};\n\ntype AmountCommonProps = {\n  /**\n   * The value to be rendered within the component.\n   *\n   */\n  value: number;\n  /**\n   * Sets the color of the amount.\n   *\n   * @default undefined\n   */\n  color?: BaseTextProps['color'];\n  /**\n   * Indicates what the suffix of amount should be\n   *\n   * @default 'decimals'\n   */\n  suffix?: 'decimals' | 'none' | 'humanize';\n  /**\n   * Makes the currency indicator(currency symbol/code) and decimal digits small and faded\n   *\n   * @default true\n   */\n  isAffixSubtle?: true | false;\n  /**\n   * Determines the visual representation of the currency, choose between displaying the currency symbol or code.\n   *\n   * Note: Currency symbol and code is determined by the locale set in user's browser or set via @razorpay/i18nify-react library.\n   *\n   * @default 'currency-symbol'\n   */\n  currencyIndicator?: 'currency-symbol' | 'currency-code';\n  /**\n   * The currency of the amount.  Note that this component\n   * only displays the provided value in the specified currency, it does not perform any currency conversion.\n   *\n   * @default 'INR'\n   * */\n  currency?: CurrencyCodeType;\n  /**\n   * If true, the amount text will have a line through it.\n   *\n   * @default false\n   */\n  isStrikethrough?: boolean;\n  /**\n   * Controls the number of decimal places to display when suffix is 'decimals'.\n   *\n   * @default 2\n   */\n  fractionDigits?: number;\n} & TestID &\n  DataAnalyticsAttribute &\n  StyledPropsBlade;\n\ntype ColorProps = {\n  amountValueColor: BaseTextProps['color'];\n};\n\ntype AmountProps = AmountTypeProps & AmountCommonProps;\n\nconst getTextColorProps = ({ color }: { color: AmountProps['color'] }): ColorProps => {\n  const props: ColorProps = {\n    amountValueColor: 'surface.text.gray.normal',\n  };\n  if (!color) return props;\n  props.amountValueColor = color;\n  return props;\n};\n\ntype AmountType = Partial<ReturnType<typeof formatNumberByParts>>;\n\ninterface AmountValue extends Omit<AmountProps, 'value'> {\n  amountValueColor: BaseTextProps['color'];\n  amount: AmountType;\n  size: Exclude<AmountProps['size'], undefined>;\n}\n\nconst AmountValue = ({\n  amount,\n  size = 'medium',\n  type = 'body',\n  weight = 'regular',\n  amountValueColor,\n  isAffixSubtle,\n  suffix,\n}: AmountValue): ReactElement => {\n  const isReactNative = getPlatformType() === 'react-native';\n  const affixFontSize = isAffixSubtle ? subtleFontSizes[type][size] : normalAmountSizes[type][size];\n  const numberFontFamily: keyof FontFamily = type === 'body' ? 'text' : 'heading';\n  if (suffix === 'decimals' && isAffixSubtle) {\n    // Native does not support alignItems of Text inside a div, instead we need to wrap is in a Text\n    const AmountWrapper = isReactNative ? Text : React.Fragment;\n\n    return (\n      <AmountWrapper>\n        <BaseText\n          fontSize={normalAmountSizes[type][size]}\n          fontWeight={weight}\n          lineHeight={amountLineHeights[type][size]}\n          color={amountValueColor}\n          fontFamily={numberFontFamily}\n          as={isReactNative ? undefined : 'span'}\n        >\n          {amount.integer}\n        </BaseText>\n        <BaseText\n          fontWeight={weight}\n          fontSize={affixFontSize}\n          fontFamily={numberFontFamily}\n          color={amountValueColor}\n          as={isReactNative ? undefined : 'span'}\n          opacity={isAffixSubtle ? opacity[800] : 1}\n        >\n          {amount.decimal}\n          {amount.fraction}\n        </BaseText>\n      </AmountWrapper>\n    );\n  }\n\n  return (\n    <BaseText\n      fontSize={normalAmountSizes[type][size]}\n      fontWeight={weight}\n      fontFamily={numberFontFamily}\n      color={amountValueColor}\n      lineHeight={amountLineHeights[type][size]}\n    >\n      {amount.integer}\n      {amount.decimal}\n      {amount.fraction}\n      {amount.compact}\n    </BaseText>\n  );\n};\n\ntype FormatAmountWithSuffixType = {\n  suffix: AmountProps['suffix'];\n  value: number;\n  currency: AmountProps['currency'];\n  fractionDigits?: number;\n};\n\n/**\n * Returns a parsed object based on the suffix passed in parameters\n * === Logic ===\n * value = 12500.45 \n * if suffix === 'decimals' => {\n    \"integer\": \"12,500\",\n    \"decimal\": \".\",\n    \"fraction\": \"45\",\n    \"compact\": \"K\",\n    \"isPrefixSymbol\": false,\n    \"rawParts\": [{\"type\": \"integer\",\"value\": \"12\"},{\"type\": \"group\",\"value\": \",\"},{\"type\": \"integer\",\"value\": \"500\"},{\"type\": \"decimal\",\"value\": \".\"},{\"type\": \"fraction\",\"value\": \"45\"}]\n}\n * @returns {AmountType}\n */\nexport const getAmountByParts = ({\n  suffix,\n  value,\n  currency,\n  fractionDigits = 2,\n}: FormatAmountWithSuffixType): AmountType => {\n  try {\n    switch (suffix) {\n      case 'decimals': {\n        const options = {\n          intlOptions: {\n            maximumFractionDigits: fractionDigits,\n            minimumFractionDigits: fractionDigits,\n          },\n          currency,\n        } as const;\n        return pollyfilledFormatNumberByParts(value, options);\n      }\n      case 'humanize': {\n        const options = {\n          intlOptions: {\n            notation: 'compact',\n            maximumFractionDigits: 2,\n            trailingZeroDisplay: 'stripIfInteger',\n          },\n          currency,\n        } as const;\n        return pollyfilledFormatNumberByParts(value, options);\n      }\n\n      default: {\n        const options = {\n          intlOptions: {\n            maximumFractionDigits: 0,\n            roundingMode: 'floor',\n          },\n          currency,\n        } as const;\n        return pollyfilledFormatNumberByParts(value, options);\n      }\n    }\n  } catch (err: unknown) {\n    return {\n      integer: `${value}`,\n      currency,\n    };\n  }\n};\n\nconst _Amount = (\n  {\n    value,\n    suffix = 'decimals',\n    type = 'body',\n    size = 'medium',\n    weight = 'regular',\n    isAffixSubtle = true,\n    isStrikethrough = false,\n    color,\n    currencyIndicator = 'currency-symbol',\n    currency = 'INR',\n    fractionDigits = 2,\n    testID,\n    ...rest\n  }: AmountProps,\n  ref: React.Ref<BladeElementRef>,\n): ReactElement => {\n  if (__DEV__) {\n    if (typeof value !== 'number') {\n      throwBladeError({\n        message: '`value` prop must be of type `number` for Amount.',\n        moduleName: 'Amount',\n      });\n    }\n    // @ts-expect-error neutral color should throw error\n    if (color === 'neutral') {\n      throwBladeError({\n        message: '`neutral` color is not supported.',\n        moduleName: 'Amount',\n      });\n    }\n\n    const bodySizes = objectKeysWithType(normalAmountSizes.body);\n    if ((type === 'body' || !type) && !bodySizes.includes(size)) {\n      throwBladeError({\n        message: `size=\"${size}\" is not allowed with type=\"body\"`,\n        moduleName: 'Amount',\n      });\n    }\n\n    const displaySizes = objectKeysWithType(normalAmountSizes.display);\n    if (type === 'display' && !displaySizes.includes(size)) {\n      throwBladeError({\n        message: `size=\"${size}\" is not allowed with type=\"display\"`,\n        moduleName: 'Amount',\n      });\n    }\n\n    const headingSizes = objectKeysWithType(normalAmountSizes.heading);\n    if (type === 'heading' && !headingSizes.includes(size)) {\n      throwBladeError({\n        message: `size=\"${size}\" is not allowed with type=\"heading\"`,\n        moduleName: 'Amount',\n      });\n    }\n  }\n\n  const { amountValueColor } = getTextColorProps({\n    color,\n  });\n\n  const renderedValue = getAmountByParts({ suffix, value, currency, fractionDigits });\n  const isPrefixSymbol = renderedValue.isPrefixSymbol ?? true;\n  const currencySymbol = renderedValue.currency ?? currency;\n\n  const currencyPosition = isPrefixSymbol ? 'left' : 'right';\n  const currencySymbolOrCode = currencyIndicator === 'currency-symbol' ? currencySymbol : currency;\n\n  const currencyFontSize = isAffixSubtle\n    ? subtleFontSizes[type][size]\n    : normalAmountSizes[type][size];\n  const isReactNative = getPlatformType() === 'react-native';\n\n  return (\n    <BaseBox\n      ref={ref as never}\n      display={(isReactNative ? 'flex' : 'inline-flex') as never}\n      flexDirection=\"row\"\n      {...metaAttribute({ name: MetaConstants.Amount, testID })}\n      {...getStyledProps(rest)}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      <BaseBox\n        display={(isReactNative ? 'flex' : 'inline-flex') as never}\n        alignItems=\"baseline\"\n        flexDirection=\"row\"\n        position=\"relative\"\n      >\n        {renderedValue.minusSign ? (\n          <BaseText\n            fontSize={normalAmountSizes[type][size]}\n            fontWeight={weight}\n            lineHeight={amountLineHeights[type][size]}\n            color={amountValueColor}\n            as={isReactNative ? undefined : 'span'}\n            marginX=\"spacing.2\"\n          >\n            {renderedValue.minusSign}\n          </BaseText>\n        ) : null}\n        {currencyPosition === 'left' && (\n          <BaseText\n            marginRight=\"spacing.1\"\n            fontWeight={weight}\n            fontSize={currencyFontSize}\n            color={amountValueColor}\n            as={isReactNative ? undefined : 'span'}\n            opacity={isAffixSubtle ? opacity[800] : 1}\n          >\n            {currencySymbolOrCode}\n          </BaseText>\n        )}\n        <AmountValue\n          amount={renderedValue}\n          amountValueColor={amountValueColor}\n          type={type}\n          weight={weight}\n          size={size}\n          isAffixSubtle={isAffixSubtle}\n          suffix={suffix}\n          currency={currency}\n        />\n        {currencyPosition === 'right' && (\n          <BaseText\n            marginLeft=\"spacing.1\"\n            fontWeight={weight}\n            fontSize={currencyFontSize}\n            color={amountValueColor}\n            as={isReactNative ? undefined : 'span'}\n            opacity={isAffixSubtle ? opacity[800] : 1}\n          >\n            {currencySymbolOrCode}\n          </BaseText>\n        )}\n        {isStrikethrough && (\n          // eslint-disable-next-line @typescript-eslint/prefer-ts-expect-error\n          // @ts-ignore: the borderBottomColor error below is thrown here as well\n          <BaseBox\n            // eslint-disable-next-line @typescript-eslint/prefer-ts-expect-error\n            // @ts-ignore- intentionally setting the border color to the color prop for this hacky strikethrough\n            borderBottomColor={amountValueColor}\n            borderBottomWidth={type === 'body' ? 'thin' : 'thicker'}\n            borderBottomStyle=\"solid\"\n            position=\"absolute\"\n            width=\"100%\"\n            top=\"50%\"\n          />\n        )}\n      </BaseBox>\n    </BaseBox>\n  );\n};\n\nconst Amount = assignWithoutSideEffects(React.forwardRef(_Amount), {\n  displayName: 'Amount',\n  componentId: 'Amount',\n});\n\nexport type { AmountProps };\nexport { Amount };\n"],"names":["stripTrailingZerosFromParts","parts","decimalPart","rawParts","filter","_ref","type","map","_ref2","value","join","hasFraction","some","_ref3","test","decimal","fraction","_ref4","pollyfilledFormatNumberByParts","options","_options$intlOptions","formatNumberByParts","intlOptions","trailingZeroDisplay","getTextColorProps","_ref5","color","props","amountValueColor","AmountValue","_ref6","amount","_ref6$size","size","_ref6$type","_ref6$weight","weight","isAffixSubtle","suffix","isReactNative","getPlatformType","affixFontSize","subtleFontSizes","normalAmountSizes","numberFontFamily","AmountWrapper","Text","React","Fragment","_jsxs","children","_jsx","BaseText","fontSize","fontWeight","lineHeight","amountLineHeights","fontFamily","as","undefined","integer","opacity","compact","getAmountByParts","_ref7","currency","_ref7$fractionDigits","fractionDigits","maximumFractionDigits","minimumFractionDigits","notation","roundingMode","err","concat","_Amount","_ref8","ref","_renderedValue$isPref","_renderedValue$curren","_ref8$suffix","_ref8$type","_ref8$size","_ref8$weight","_ref8$isAffixSubtle","_ref8$isStrikethrough","isStrikethrough","_ref8$currencyIndicat","currencyIndicator","_ref8$currency","_ref8$fractionDigits","testID","rest","_objectWithoutProperties","_excluded","throwBladeError","message","moduleName","bodySizes","objectKeysWithType","body","includes","displaySizes","display","headingSizes","heading","_getTextColorProps","renderedValue","isPrefixSymbol","currencySymbol","currencyPosition","currencySymbolOrCode","currencyFontSize","BaseBox","_objectSpread","flexDirection","metaAttribute","name","MetaConstants","Amount","getStyledProps","makeAnalyticsAttribute","alignItems","position","minusSign","marginX","marginRight","marginLeft","borderBottomColor","borderBottomWidth","borderBottomStyle","width","top","assignWithoutSideEffects","forwardRef","displayName","componentId"],"mappings":"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"}