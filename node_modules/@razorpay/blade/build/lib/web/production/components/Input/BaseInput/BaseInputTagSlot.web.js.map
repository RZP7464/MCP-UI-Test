{"version":3,"file":"BaseInputTagSlot.web.js","sources":["../../../../../../../src/components/Input/BaseInput/BaseInputTagSlot.web.tsx"],"sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport type { BaseInputTagSlotProps } from './types';\nimport { baseInputHeight } from './baseInputTokens';\nimport BaseBox from '~components/Box/BaseBox';\nimport { Text } from '~components/Typography';\nimport { castWebType, makeSize } from '~utils';\nimport { useIsomorphicLayoutEffect } from '~utils/useIsomorphicLayoutEffect';\nimport { useIsMobile } from '~utils/useIsMobile';\nimport { MetaConstants } from '~utils/metaAttribute';\nimport { size as sizeToken } from '~tokens/global';\nimport { useTableEditableCell } from '~components/Table/TableEditableCellContext';\n\nconst MINUMUM_INPUT_SPACE = 60;\nconst PLUS_X_MORE_TEXT_WIDTH = 60;\nconst TAG_MAX_WIDTH: number = sizeToken['140'];\n\nconst useVisibleTagsCount = ({\n  slotRef,\n  tags,\n  maxTagRows,\n  visibleTagsCountRef,\n  showAllTags,\n  labelPrefix,\n}: {\n  slotRef: React.RefObject<HTMLDivElement>;\n  tags: BaseInputTagSlotProps['tags'];\n  maxTagRows: BaseInputTagSlotProps['maxTagRows'];\n  visibleTagsCountRef: BaseInputTagSlotProps['visibleTagsCountRef'];\n  showAllTags: BaseInputTagSlotProps['showAllTags'];\n  labelPrefix: BaseInputTagSlotProps['labelPrefix'];\n}): number => {\n  const [visibleTagsCount, setVisibleTagsCount] = React.useState(0);\n  const visibleTagsCountStateRef = React.useRef<number>(0);\n  const { isInsideTableEditableCell } = useTableEditableCell();\n\n  useIsomorphicLayoutEffect(() => {\n    if (!tags || labelPrefix || isInsideTableEditableCell) {\n      setVisibleTagsCount(0);\n      return;\n    }\n\n    if (maxTagRows === 'multiple' || showAllTags) {\n      visibleTagsCountRef.current = tags.length;\n      setVisibleTagsCount(tags.length);\n      return;\n    }\n\n    const inputTagsSlotWidth = slotRef.current?.clientWidth;\n    visibleTagsCountStateRef.current = 0;\n    let totalTagsWidth = 0;\n\n    if (!inputTagsSlotWidth) {\n      return;\n    }\n\n    const allTagsEl = slotRef.current?.querySelectorAll(\n      `[data-blade-component=\"${MetaConstants.Tag}\"]`,\n    );\n\n    const totalAvailableSpaceForTags =\n      inputTagsSlotWidth - (MINUMUM_INPUT_SPACE + PLUS_X_MORE_TEXT_WIDTH);\n\n    if (allTagsEl.length !== tags.length) {\n      // some weird edge cases in controlled select where tags are not rendered in children\n      // we assume 140px (max-width of tag as width of all tags)\n      const tagsCount = Math.floor((totalAvailableSpaceForTags / TAG_MAX_WIDTH) * tags.length);\n      visibleTagsCountRef.current = tagsCount;\n      setVisibleTagsCount(tagsCount);\n      return;\n    }\n\n    for (const tagEl of allTagsEl) {\n      totalTagsWidth += tagEl.clientWidth;\n      if (totalTagsWidth >= totalAvailableSpaceForTags) {\n        break;\n      } else {\n        visibleTagsCountStateRef.current++;\n      }\n    }\n\n    visibleTagsCountRef.current = visibleTagsCountStateRef.current;\n    setVisibleTagsCount(visibleTagsCountStateRef.current);\n  }, [tags?.length, showAllTags]);\n\n  return visibleTagsCount;\n};\n\nconst getSelectedTextWithoutTags = ({\n  items,\n  labelPrefix,\n}: {\n  items: number;\n  labelPrefix?: string;\n}): string => {\n  if (labelPrefix) {\n    return `${labelPrefix} (${items} Selected)`;\n  }\n\n  return `${items} Selected`;\n};\n\nconst TagSlotContainer = styled(BaseBox)(() => {\n  return {\n    // hides the scrollbar of tagslot\n    '::-webkit-scrollbar': {\n      display: 'none',\n    },\n    '-ms-overflow-style': 'none',\n    'scrollbar-width': 'none',\n  };\n});\n\nconst SelectedCountText = ({\n  children,\n  isDisabled,\n}: {\n  children: string;\n  isDisabled?: boolean;\n}): React.ReactElement => {\n  return (\n    <Text\n      color={isDisabled ? 'surface.text.gray.disabled' : 'surface.text.gray.subtle'}\n      alignSelf=\"center\"\n      marginY=\"spacing.2\"\n      marginRight=\"spacing.4\"\n      variant=\"body\"\n      size=\"small\"\n      weight=\"regular\"\n    >\n      <BaseBox as=\"span\" whiteSpace=\"nowrap\">\n        {children}\n      </BaseBox>\n    </Text>\n  );\n};\n\nconst BaseInputTagSlot = ({\n  renderAs,\n  children,\n  tags,\n  maxTagRows,\n  showAllTags,\n  setShouldIgnoreBlurAnimation,\n  handleOnInputClick,\n  isDropdownTrigger,\n  visibleTagsCountRef,\n  labelPrefix,\n  isDisabled,\n  numberOfLines,\n  isTextArea,\n  size,\n}: BaseInputTagSlotProps): React.ReactElement => {\n  const hasTags = tags && tags.length > 0;\n  const slotRef = React.useRef<HTMLDivElement>(null);\n  const { isInsideTableEditableCell } = useTableEditableCell();\n  const visibleTagsCount = useVisibleTagsCount({\n    slotRef,\n    tags,\n    maxTagRows,\n    visibleTagsCountRef,\n    showAllTags,\n    labelPrefix,\n  });\n\n  React.useEffect(() => {\n    slotRef.current?.scrollTo?.({\n      top:\n        maxTagRows === 'multiple' || maxTagRows === 'expandable' ? slotRef.current.scrollHeight : 0,\n      left: maxTagRows === 'single' ? slotRef.current.scrollWidth : 0,\n      behavior: 'smooth',\n    });\n  }, [tags?.length, maxTagRows]);\n\n  React.useEffect(() => {\n    if (!showAllTags) {\n      slotRef.current?.scrollTo?.({\n        top: 0,\n        left: 0,\n        behavior: 'smooth',\n      });\n    } else if (maxTagRows === 'single') {\n      // when its single line input and showAllTags is true, we scroll till item on focus\n      slotRef.current?.scrollTo?.({\n        top: 0,\n        left: maxTagRows === 'single' ? slotRef.current.scrollWidth : 0,\n        behavior: 'smooth',\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [showAllTags]);\n\n  const visibleTags = React.useMemo(() => {\n    return showAllTags ? tags : tags?.slice(0, visibleTagsCount);\n  }, [showAllTags, tags, visibleTagsCount]);\n\n  const invisibleTagsCount = React.useMemo(() => {\n    if (tags && visibleTags) {\n      return tags.length - visibleTags.length;\n    }\n\n    return 0;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tags?.length, visibleTags?.length]);\n\n  const isMobile = useIsMobile();\n\n  if (!isDropdownTrigger) {\n    // If its not dropdown trigger, we don't need to render tag containers\n    return children;\n  }\n\n  // tag height changes in mobile and desktop so we keep different paddings to make it look as expected\n  const paddingYWithTags = isMobile ? 'spacing.1' : 'spacing.2';\n\n  return (\n    <TagSlotContainer\n      ref={slotRef}\n      className=\"tags-slot\"\n      paddingY={paddingYWithTags}\n      paddingLeft=\"spacing.4\"\n      display=\"flex\"\n      flex=\"1\"\n      flexWrap={maxTagRows === 'single' ? 'nowrap' : 'wrap'}\n      overflowX=\"auto\"\n      overflowY={showAllTags || maxTagRows === 'multiple' ? 'auto' : 'hidden'}\n      minHeight={makeSize(baseInputHeight[size])}\n      maxHeight={\n        // In TextArea with tagged input, we explicitly define maxHeight based on maxHeight so that tags dont overflow out of textarea\n        // And In table we strictly want the maxHeight to be defined to not mess up the table layout\n        (isDropdownTrigger && isTextArea) || isInsideTableEditableCell\n          ? makeSize(baseInputHeight[size] * (numberOfLines ?? 1))\n          : undefined\n      }\n      onMouseDown={() => {\n        setShouldIgnoreBlurAnimation?.(true);\n      }}\n      onClick={(e) => {\n        handleOnInputClick(castWebType(e));\n      }}\n      onMouseUp={() => {\n        setShouldIgnoreBlurAnimation?.(false);\n      }}\n    >\n      {isInsideTableEditableCell && tags && tags.length > 0 ? (\n        <SelectedCountText isDisabled={isDisabled}>\n          {getSelectedTextWithoutTags({ items: tags.length, labelPrefix })}\n        </SelectedCountText>\n      ) : (\n        <>\n          {visibleTags}\n          {tags && !showAllTags && invisibleTagsCount ? (\n            <SelectedCountText isDisabled={isDisabled}>\n              {visibleTags?.length === 0\n                ? getSelectedTextWithoutTags({\n                    items: invisibleTagsCount,\n                    labelPrefix,\n                  })\n                : `+${invisibleTagsCount} More`}\n            </SelectedCountText>\n          ) : null}\n        </>\n      )}\n      <BaseBox\n        marginTop=\"-4px\"\n        minWidth={\n          hasTags && renderAs === 'button'\n            ? undefined\n            : `min(20%, ${makeSize(MINUMUM_INPUT_SPACE)})`\n        }\n        width={hasTags && renderAs === 'button' ? makeSize(sizeToken['1']) : '100%'}\n      >\n        {children}\n      </BaseBox>\n    </TagSlotContainer>\n  );\n};\n\nexport { BaseInputTagSlot };\n"],"names":["MINUMUM_INPUT_SPACE","PLUS_X_MORE_TEXT_WIDTH","TAG_MAX_WIDTH","sizeToken","useVisibleTagsCount","_ref","slotRef","tags","maxTagRows","visibleTagsCountRef","showAllTags","labelPrefix","_React$useState","React","useState","_React$useState2","_slicedToArray","visibleTagsCount","setVisibleTagsCount","visibleTagsCountStateRef","useRef","_useTableEditableCell","useTableEditableCell","isInsideTableEditableCell","useIsomorphicLayoutEffect","_slotRef$current","_slotRef$current2","current","length","inputTagsSlotWidth","clientWidth","totalTagsWidth","allTagsEl","querySelectorAll","concat","MetaConstants","Tag","totalAvailableSpaceForTags","tagsCount","Math","floor","_iterator","_createForOfIteratorHelper","_step","s","n","done","tagEl","value","err","e","f","getSelectedTextWithoutTags","_ref2","items","TagSlotContainer","styled","BaseBox","withConfig","displayName","componentId","display","SelectedCountText","_ref3","children","isDisabled","_jsx","Text","color","alignSelf","marginY","marginRight","variant","size","weight","as","whiteSpace","BaseInputTagSlot","_ref4","renderAs","setShouldIgnoreBlurAnimation","handleOnInputClick","isDropdownTrigger","numberOfLines","isTextArea","hasTags","_useTableEditableCell2","useEffect","_slotRef$current3","_slotRef$current3$scr","scrollTo","call","top","scrollHeight","left","scrollWidth","behavior","_slotRef$current4","_slotRef$current4$scr","_slotRef$current5","_slotRef$current5$scr","visibleTags","useMemo","slice","invisibleTagsCount","isMobile","useIsMobile","paddingYWithTags","_jsxs","ref","className","paddingY","paddingLeft","flex","flexWrap","overflowX","overflowY","minHeight","makeSize","baseInputHeight","maxHeight","undefined","onMouseDown","onClick","castWebType","onMouseUp","_Fragment","marginTop","minWidth","width"],"mappings":"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"}