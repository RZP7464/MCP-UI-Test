{"version":3,"file":"Code.js","sources":["../../../../../../../src/components/Typography/Code/Code.tsx"],"sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { BaseText } from '../BaseText';\nimport type { BaseTextProps, BaseTextSizes } from '../BaseText/types';\nimport BaseBox from '~components/Box/BaseBox';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport { getPlatformType } from '~utils';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { FontSize, Typography } from '~tokens/global';\nimport type { BladeElementRef, StringChildrenType, TestID } from '~utils/types';\nimport { makeSpace } from '~utils/makeSpace';\nimport { makeTypographySize } from '~utils/makeTypographySize';\nimport { throwBladeError } from '~utils/logger';\n\ntype CodeCommonProps = {\n  /**\n   * Sets the color of the Heading component.\n   */\n  children: StringChildrenType;\n  /**\n   * Decides the fontSize and padding of Code\n   *\n   * @default small\n   */\n  size?: Extract<BaseTextSizes, 'small' | 'medium'>;\n  weight?: Extract<BaseTextProps['fontWeight'], 'regular' | 'bold'>;\n  isHighlighted?: boolean;\n  textTransform?: BaseTextProps['textTransform'];\n  color?: BaseTextProps['color'];\n} & TestID &\n  StyledPropsBlade;\n\ntype CodeHighlightedProps = CodeCommonProps & {\n  /**\n   * Adds background color to highlight the text\n   *\n   * @default true\n   */\n  isHighlighted?: true;\n  /**\n   * color prop can only be added when `isHighlighted` is set to `false`\n   */\n  color?: undefined;\n};\n\ntype CodeNonHighlightedProps = CodeCommonProps & {\n  /**\n   * Adds background color to highlight the text\n   *\n   * @default true\n   */\n  isHighlighted: false;\n  /**\n   * color prop to set color of text when `isHighlighted` is set to false\n   */\n  color?: BaseTextProps['color'];\n};\n\nexport type CodeProps = CodeHighlightedProps | CodeNonHighlightedProps;\n\ntype CodeContainerProps = {\n  size: CodeProps['size'];\n  isHighlighted: CodeProps['isHighlighted'];\n};\n\nconst platformType = getPlatformType();\nconst isPlatformWeb = platformType === 'browser' || platformType === 'node';\n\nconst getCodeFontSizeAndLineHeight = (\n  size: CodeProps['size'],\n): { fontSize: keyof FontSize; lineHeight: keyof Typography['lineHeights'] } | undefined => {\n  switch (size) {\n    case 'medium':\n      return { fontSize: 75, lineHeight: 75 };\n    case 'small':\n      return { fontSize: 25, lineHeight: 25 };\n    default:\n      if (__DEV__) {\n        throwBladeError({\n          moduleName: 'Code',\n          message: `Unexpected size: ${size}`,\n        });\n      }\n      return undefined;\n  }\n};\n\nconst CodeContainer = styled(BaseBox)<CodeContainerProps>((props) => {\n  const padding = `${makeSpace(props.theme.spacing[0])} ${makeSpace(props.theme.spacing[2])}`;\n  return {\n    padding,\n    backgroundColor: props.isHighlighted\n      ? props.theme.colors.feedback.background.neutral.subtle\n      : undefined,\n    borderRadius: props.theme.border.radius.medium,\n    display: isPlatformWeb ? 'inline-block' : 'flex',\n    alignSelf: isPlatformWeb ? undefined : 'center',\n    verticalAlign: 'middle',\n    lineHeight: makeTypographySize(props.theme.typography.lineHeights[0]),\n  };\n});\n\nconst getCodeColor = ({\n  isHighlighted,\n  color,\n}: Pick<CodeProps, 'isHighlighted' | 'color'>): CodeProps['color'] => {\n  if (isHighlighted) {\n    if (__DEV__) {\n      if (color) {\n        throwBladeError({\n          moduleName: 'Code',\n          message: '`color` prop cannot be used without `isHighlighted={false}`',\n        });\n      }\n    }\n\n    return 'surface.text.gray.subtle';\n  }\n\n  if (color) {\n    return color;\n  }\n\n  return 'surface.text.gray.normal';\n};\n\nconst _Code = (\n  {\n    children,\n    size = 'small',\n    weight = 'regular',\n    isHighlighted = true,\n    color,\n    testID,\n    textTransform,\n    ...styledProps\n  }: CodeProps,\n  ref: React.Ref<BladeElementRef>,\n): React.ReactElement => {\n  const { fontSize, lineHeight } = getCodeFontSizeAndLineHeight(size)!;\n  const codeTextColor = React.useMemo<CodeProps['color']>(\n    () => getCodeColor({ isHighlighted, color }),\n    [isHighlighted, color],\n  );\n\n  return (\n    <CodeContainer\n      ref={ref as never}\n      size={size}\n      isHighlighted={isHighlighted}\n      as={isPlatformWeb ? 'span' : undefined}\n      {...metaAttribute({ name: MetaConstants.Code, testID })}\n      {...getStyledProps(styledProps)}\n    >\n      <BaseText\n        color={codeTextColor}\n        fontFamily=\"code\"\n        fontSize={fontSize}\n        fontWeight={weight}\n        as={isPlatformWeb ? 'code' : undefined}\n        lineHeight={lineHeight}\n        textTransform={textTransform}\n      >\n        {children}\n      </BaseText>\n    </CodeContainer>\n  );\n};\n\n/**\n * Code component can be used for displaying token, variable names, or inlined code snippets.\n *\n * ## Usage\n *\n * ### In Web\n * In web, you can use it inside `Text` component or individually. The component is set to display `inline-block`\n *\n * ```tsx\n * <Text>\n *  Lorem ipsum <Code>SENTRY_TOKEN</Code> normal text\n * </Text>\n * ```\n *\n * ### In React Native\n *\n * In React Native, you would have to align it using flex to make sure the Code and the surrounding text is correctly aligned\n *\n * ```tsx\n *  <Box flexWrap=\"wrap\" flexDirection=\"row\" alignItems=\"flex-start\">\n *   <Text>Lorem ipsum </Text>\n *   <Code>SENTRY_TOKEN</Code>\n *   <Text> normal text</Text>\n * </Box>\n * ```\n */\nconst Code = React.forwardRef(_Code);\n\nexport { Code };\n"],"names":["platformType","getPlatformType","isPlatformWeb","getCodeFontSizeAndLineHeight","size","fontSize","lineHeight","throwBladeError","moduleName","message","concat","undefined","CodeContainer","styled","BaseBox","withConfig","displayName","componentId","props","padding","makeSpace","theme","spacing","backgroundColor","isHighlighted","colors","feedback","background","neutral","subtle","borderRadius","border","radius","medium","display","alignSelf","verticalAlign","makeTypographySize","typography","lineHeights","getCodeColor","_ref","color","_Code","_ref2","ref","children","_ref2$size","_ref2$weight","weight","_ref2$isHighlighted","testID","textTransform","styledProps","_objectWithoutProperties","_excluded","_ref3","codeTextColor","React","useMemo","_jsx","_objectSpread","as","metaAttribute","name","MetaConstants","Code","getStyledProps","BaseText","fontFamily","fontWeight","forwardRef"],"mappings":"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"}