{"version":3,"file":"utils.js","sources":["../../../../../../src/components/TimePicker/utils.ts"],"sourcesContent":["import { Time } from '@internationalized/date';\nimport type { TimeFormat } from './types';\n\n/**\n * Converts a Date object to TimeValue for React Aria compatibility\n * Used internally to bridge between external Date API and React Aria's Time objects\n *\n * @param date - The Date object to convert, or null\n * @returns Time object for React Aria, or null if input is null\n *\n * @example\n * // Convert Date to TimeValue\n * const date = new Date('2024-01-01T14:30:00');\n * dateToTimeValue(date)\n * // → Time { hour: 14, minute: 30 }\n *\n * @example\n * // Handle null input\n * dateToTimeValue(null)\n * // → null\n */\nexport const dateToTimeValue = (date: Date | null): Time | null => {\n  if (!date) return new Time(0, 0);\n  return new Time(date.getHours(), date.getMinutes());\n};\n\n/**\n * Converts a TimeValue to Date object for external API\n * Used internally to bridge between React Aria's Time objects and external Date API\n *\n * @param timeValue - The Time object to convert, or null\n * @returns Date object with today's date and specified time, or null if input is null\n *\n * @example\n * // Convert TimeValue to Date\n * const timeValue = new Time(14, 30);\n * timeValueToDate(timeValue)\n * // → Date object with today's date at 2:30 PM\n *\n * @example\n * // Handle null input\n * timeValueToDate(null)\n * // → null\n */\nexport const timeValueToDate = (timeValue: Time | null): Date | null => {\n  if (!timeValue) return null;\n  const date = new Date();\n  date.setHours(timeValue.hour, timeValue.minute, 0, 0);\n  return date;\n};\n\n/**\n * Extracts individual time components from a Date object\n * Converts between 24-hour and 12-hour formats as needed for display\n *\n * @param time - The Date object to extract components from, or null\n * @param timeFormat - Whether to use 12-hour or 24-hour format\n * @returns Object with selectedHour, selectedMinute, and selectedPeriod\n *\n * @example\n * // Extract components in 12-hour format\n * const date = new Date('2024-01-01T14:30:00');\n * getTimeComponents(date, '12h')\n * // → { selectedHour: 2, selectedMinute: 30, selectedPeriod: 'PM' }\n *\n * @example\n * // Extract components in 24-hour format\n * const date = new Date('2024-01-01T14:30:00');\n * getTimeComponents(date, '24h')\n * // → { selectedHour: 14, selectedMinute: 30, selectedPeriod: 'AM' }\n *\n * @example\n * // Handle null input (returns default 12:00 AM)\n * getTimeComponents(null, '12h')\n * // → { selectedHour: 12, selectedMinute: 0, selectedPeriod: 'AM' }\n */\nexport const getTimeComponents = (\n  time: Date | null,\n  timeFormat: TimeFormat,\n): {\n  selectedHour: number;\n  selectedMinute: number;\n  selectedPeriod: string;\n} => {\n  if (!time) {\n    return {\n      selectedHour: 12,\n      selectedMinute: 0,\n      selectedPeriod: 'AM' as const,\n    };\n  }\n\n  const hour = time.getHours();\n  const minute = time.getMinutes();\n\n  if (timeFormat === '12h') {\n    const period = hour >= 12 ? 'PM' : 'AM';\n\n    // Convert 24-hour to 12-hour format\n    let displayHour: number;\n    if (hour === 0) {\n      displayHour = 12; // Midnight becomes 12 AM\n    } else if (hour > 12) {\n      displayHour = hour - 12; // PM hours (1-11 PM)\n    } else {\n      displayHour = hour; // AM hours (1-11 AM) and noon (12 PM)\n    }\n\n    return {\n      selectedHour: displayHour,\n      selectedMinute: minute,\n      selectedPeriod: period,\n    };\n  } else {\n    return {\n      selectedHour: hour,\n      selectedMinute: minute,\n      selectedPeriod: 'AM' as const, // Not used in 24h format\n    };\n  }\n};\n\n/**\n * Creates a complete Date object from time components\n * Validates input values and converts 12-hour format to 24-hour as needed\n *\n * @param selectedHour - Hour value (1-12 for 12h format, 0-23 for 24h format)\n * @param selectedMinute - Minute value (0-59)\n * @param selectedPeriod - AM/PM indicator (only used in 12h format)\n * @param timeFormat - Whether to use 12-hour or 24-hour format\n * @returns Date object with today's date and specified time, or null if validation fails\n *\n * @example\n * // Create time in 12-hour format\n * createCompleteTime(2, 30, 'PM', '12h')\n * // → Date object with today's date at 2:30 PM (14:30)\n *\n * @example\n * // Create time in 24-hour format\n * createCompleteTime(14, 30, 'AM', '24h')\n * // → Date object with today's date at 14:30\n *\n * @example\n * // Handle midnight in 12-hour format\n * createCompleteTime(12, 0, 'AM', '12h')\n * // → Date object with today's date at 00:00\n *\n * @example\n * // Invalid input returns null\n * createCompleteTime(25, 30, 'AM', '24h')\n * // → null (hour 25 is invalid)\n */\nexport const createCompleteTime = (\n  selectedHour: number,\n  selectedMinute: number,\n  selectedPeriod: string,\n  timeFormat: TimeFormat,\n): Date | null => {\n  // Validate values\n  if (timeFormat === '12h') {\n    if (selectedHour < 1 || selectedHour > 12 || selectedMinute < 0 || selectedMinute > 59)\n      return null;\n  } else if (selectedHour < 0 || selectedHour > 23 || selectedMinute < 0 || selectedMinute > 59) {\n    return null;\n  }\n\n  const newDate = new Date();\n\n  if (timeFormat === '12h') {\n    // Convert 12-hour format to 24-hour format\n    let hour24: number;\n\n    if (selectedPeriod === 'AM') {\n      // AM: 12 becomes 0, all others stay the same\n      hour24 = selectedHour === 12 ? 0 : selectedHour;\n    } else {\n      // PM: 12 stays 12, all others add 12\n      hour24 = selectedHour === 12 ? 12 : selectedHour + 12;\n    }\n\n    newDate.setHours(hour24, selectedMinute, 0, 0);\n  } else {\n    newDate.setHours(selectedHour, selectedMinute, 0, 0);\n  }\n\n  return newDate;\n};\n\n/**\n * Creates a Date object from time selection with optional parameter overrides\n * Used by TimePickerContent when individual wheels change values\n * Provides fallback handling to prevent crashes from invalid inputs\n *\n * @param currentHour - Current hour value (fallback)\n * @param currentMinute - Current minute value (fallback)\n * @param currentPeriod - Current period value (fallback)\n * @param timeFormat - Time format (12h or 24h)\n * @param hour - Optional hour override\n * @param minute - Optional minute override\n * @param period - Optional period override\n * @returns Date object with the specified time (never null)\n *\n * @example\n * // Update only the hour\n * createDateFromSelection(10, 30, 'AM', '12h', 11)\n * // → Date object with 11:30 AM\n *\n * @example\n * // Update only the minute\n * createDateFromSelection(10, 30, 'AM', '12h', undefined, 45)\n * // → Date object with 10:45 AM\n *\n * @example\n * // Update only the period\n * createDateFromSelection(10, 30, 'AM', '12h', undefined, undefined, 'PM')\n * // → Date object with 10:30 PM\n *\n * @example\n * // Use all current values (no overrides)\n * createDateFromSelection(2, 15, 'PM', '12h')\n * // → Date object with 2:15 PM\n */\nexport const createDateFromSelection = (\n  currentHour: number,\n  currentMinute: number,\n  currentPeriod: string,\n  timeFormat: TimeFormat,\n  hour?: number,\n  minute?: number,\n  period?: string,\n): Date => {\n  const useHour = hour ?? currentHour;\n  const useMinute = minute ?? currentMinute;\n  const usePeriod = period ?? currentPeriod;\n\n  const result = createCompleteTime(useHour, useMinute, usePeriod, timeFormat);\n\n  // createCompleteTime can return null, but in TimePickerContent context we always expect a valid date\n  // If validation fails, fall back to current time to prevent crashes\n  return result ?? new Date();\n};\n\n/**\n * Calculates the nearest step value for dropdown positioning when minuteStep is used\n * Allows users to type any minute while dropdown shows nearest valid step\n *\n * This enables a better UX where typed values are preserved for form submission,\n * but the dropdown visually aligns to the nearest step for consistency.\n *\n * @param actualValue - The actual minute value typed by user (0-59)\n * @param step - The minute step interval (1, 5, 15, 30)\n * @returns The nearest step value for dropdown positioning\n *\n * @example\n * // 15-minute steps\n * getNearestStepValue(17, 15)\n * // → 15 (user typed 17, dropdown shows 15)\n *\n * @example\n * // 30-minute steps\n * getNearestStepValue(42, 30)\n * // → 30 (user typed 42, dropdown shows 30)\n *\n * @example\n * // 5-minute steps\n * getNearestStepValue(23, 5)\n * // → 25 (user typed 23, dropdown shows 25)\n *\n * @example\n * // 1-minute steps (no change needed)\n * getNearestStepValue(17, 1)\n * // → 17 (exact match, no rounding)\n */\nexport const getNearestStepValue = (actualValue: number, step: number): string => {\n  const nearestValue = Math.round(actualValue / step) * step;\n\n  // If calculated value is 60 or more, wrap to 0 (since 60 minutes doesn't exist)\n  const finalValue = nearestValue >= 60 ? 0 : nearestValue;\n\n  return String(finalValue).padStart(2, '0');\n};\n"],"names":["dateToTimeValue","date","Time","getHours","getMinutes","timeValueToDate","timeValue","Date","setHours","hour","minute","getTimeComponents","time","timeFormat","selectedHour","selectedMinute","selectedPeriod","period","displayHour","createCompleteTime","newDate","hour24","createDateFromSelection","currentHour","currentMinute","currentPeriod","useHour","useMinute","usePeriod","result","getNearestStepValue","actualValue","step","nearestValue","Math","round","finalValue","String","padStart"],"mappings":"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"}