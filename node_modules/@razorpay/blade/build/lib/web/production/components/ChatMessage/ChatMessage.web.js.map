{"version":3,"file":"ChatMessage.web.js","sources":["../../../../../../src/components/ChatMessage/ChatMessage.web.tsx"],"sourcesContent":["import React from 'react';\nimport { SelfMessageBubble } from './SelfMessageBubble.web';\nimport { DefaultMessageBubble } from './DefaultMessageBubble.web';\nimport type { ChatMessageProps } from './types';\nimport { Text } from '~components/Typography';\nimport BaseBox from '~components/Box/BaseBox';\nimport { getStringFromReactText } from '~utils/getStringChildren';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport type { BladeElementRef } from '~utils/types';\nimport { MetaConstants, metaAttribute } from '~utils/metaAttribute';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\nimport { getStyledProps } from '~components/Box/styledProps';\n\nconst ButtonResetCss = {\n  background: 'none',\n  border: 'none',\n  padding: undefined,\n  cursor: 'pointer',\n  color: 'inherit',\n  font: 'inherit',\n  textAlign: 'left' as const,\n  outline: 'inherit',\n  appearance: 'none',\n  backgroundColor: 'inherit',\n};\n\nconst _ChatMessage: React.ForwardRefRenderFunction<BladeElementRef, ChatMessageProps> = (\n  {\n    messageType = 'default',\n    senderType = 'self',\n    isLoading = false,\n    validationState = 'none',\n    errorText,\n    onClick,\n    footerActions,\n    children,\n    leading,\n    loadingText,\n    wordBreak = 'break-word',\n    maxWidth,\n    ...props\n  }: ChatMessageProps,\n  ref: React.Ref<BladeElementRef>,\n): React.ReactElement => {\n  // since we can pass both string and Card component as children, we need to check if children is string or Card component\n  // if children is string or array of string, we need to wrap it in Text component otherwise we will pass children as it is\n  const shouldWrapInText =\n    typeof children === 'string' ||\n    (Array.isArray(children) && children.every((child) => typeof child === 'string')) ||\n    isLoading;\n\n  const finalChildren = shouldWrapInText ? (\n    <Text\n      color={isLoading ? 'surface.text.gray.muted' : 'surface.text.gray.normal'}\n      weight=\"regular\"\n      variant=\"body\"\n      size=\"medium\"\n      wordBreak={wordBreak}\n    >\n      {isLoading ? loadingText : getStringFromReactText(children as string | string[])}\n    </Text>\n  ) : (\n    (children as React.ReactElement)\n  );\n\n  return (\n    <BaseBox\n      onClick={onClick}\n      {...(onClick ? { ...ButtonResetCss } : {})}\n      {...metaAttribute({ name: MetaConstants.ChatMessage, testID: props.testID })}\n      {...makeAnalyticsAttribute(props)}\n      {...getStyledProps(props)}\n      maxWidth={maxWidth}\n      ref={ref as never}\n      as={onClick ? 'button' : undefined}\n    >\n      {senderType === 'self' ? (\n        <SelfMessageBubble\n          validationState={validationState}\n          errorText={errorText}\n          children={finalChildren}\n          messageType={messageType}\n          isChildText={shouldWrapInText}\n        />\n      ) : (\n        <DefaultMessageBubble\n          children={finalChildren}\n          leading={leading}\n          isLoading={isLoading}\n          footerActions={footerActions}\n          isChildText={shouldWrapInText}\n        />\n      )}\n    </BaseBox>\n  );\n};\n\nconst ChatMessage = assignWithoutSideEffects(React.forwardRef(_ChatMessage), {\n  displayName: 'ChatMessage',\n  componentId: MetaConstants.ChatMessage,\n});\nexport { ChatMessage };\n"],"names":["ButtonResetCss","background","border","padding","undefined","cursor","color","font","textAlign","outline","appearance","backgroundColor","_ChatMessage","_ref","ref","_ref$messageType","messageType","_ref$senderType","senderType","_ref$isLoading","isLoading","_ref$validationState","validationState","errorText","onClick","footerActions","children","leading","loadingText","_ref$wordBreak","wordBreak","maxWidth","props","_objectWithoutProperties","_excluded","shouldWrapInText","Array","isArray","every","child","finalChildren","_jsx","Text","weight","variant","size","getStringFromReactText","BaseBox","_objectSpread","metaAttribute","name","MetaConstants","ChatMessage","testID","makeAnalyticsAttribute","getStyledProps","as","SelfMessageBubble","isChildText","DefaultMessageBubble","assignWithoutSideEffects","React","forwardRef","displayName","componentId"],"mappings":"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"}