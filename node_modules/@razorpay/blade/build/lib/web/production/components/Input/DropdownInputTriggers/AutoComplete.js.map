{"version":3,"file":"AutoComplete.js","sources":["../../../../../../../src/components/Input/DropdownInputTriggers/AutoComplete.tsx"],"sourcesContent":["import React from 'react';\nimport { useDropdown } from '../../Dropdown/useDropdown';\nimport type { AutoCompleteProps, BaseDropdownInputTriggerProps } from './types';\nimport { BaseDropdownInputTrigger } from './BaseDropdownInputTrigger';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport BaseBox from '~components/Box/BaseBox';\nimport type { BladeElementRef } from '~utils/types';\nimport { dropdownComponentIds } from '~components/Dropdown/dropdownComponentIds';\nimport { isReactNative } from '~utils';\n\nconst useAutoComplete = ({\n  props,\n  inputValue,\n  setInputValue,\n  getOptionValues,\n}: {\n  props: AutoCompleteProps;\n  setInputValue: (inputValue: string) => void;\n  inputValue: string;\n  getOptionValues: () => string[];\n}): {\n  onTriggerKeydown: BaseDropdownInputTriggerProps['onTriggerKeydown'];\n  onSelectionChange: BaseDropdownInputTriggerProps['onChange'];\n  onInputValueChange: BaseDropdownInputTriggerProps['onInputValueChange'];\n} => {\n  const {\n    onTriggerKeydown: onBaseDropdownInputKeydown,\n    isOpen,\n    setIsOpen,\n    selectedIndices,\n    setSelectedIndices,\n    setControlledValueIndices,\n    isControlled,\n    options,\n    setFilteredValues: setGlobalFilteredValues,\n    activeTagIndex,\n    setActiveTagIndex,\n    setActiveIndex,\n    filteredValues: globalFilteredValues,\n    selectionType,\n    triggererRef,\n    hasAutoCompleteInHeader,\n  } = useDropdown();\n\n  const resetFilters = (): void => setGlobalFilteredValues(getOptionValues());\n\n  // Makes sure that first item is always in focus\n  React.useEffect((): void => {\n    const firstItemOptionIndex = options.findIndex(\n      (option) => option.value === globalFilteredValues[0],\n    );\n\n    if (firstItemOptionIndex >= 0) {\n      setActiveIndex(firstItemOptionIndex);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [globalFilteredValues.length, options.length]);\n\n  // When input is empty or its single select, we want all items to be shown in filter on open of dropdown\n  React.useEffect(() => {\n    if (isOpen && !inputValue) {\n      resetFilters();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, options]);\n\n  React.useEffect(() => {\n    if (isOpen && selectionType === 'single') {\n      resetFilters();\n    }\n\n    // Just setting autoFocus is setting the input in focus state but its not showing keyboard active.\n    // We do this in web to get around that\n    if (hasAutoCompleteInHeader && isOpen && !isReactNative()) {\n      triggererRef.current?.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n\n  const onInputValueChange: BaseDropdownInputTriggerProps['onInputValueChange'] = ({\n    name,\n    value,\n  }) => {\n    setInputValue(value ?? '');\n    props.onInputValueChange?.({ name, value });\n    setActiveTagIndex(-1);\n\n    if (!isOpen) {\n      setIsOpen(true);\n    }\n\n    // default filtering when filteredValues is uncontrolled\n    if (!props.filteredValues) {\n      // eslint-disable-next-line no-lonely-if\n      if (value && options && options.length > 0) {\n        const filteredOptions = getOptionValues().filter((optionValue) =>\n          String(optionValue).toLowerCase().includes(value.toLowerCase()),\n        );\n        setGlobalFilteredValues(filteredOptions);\n      } else {\n        resetFilters();\n      }\n    }\n  };\n\n  const onTriggerKeydown: BaseDropdownInputTriggerProps['onTriggerKeydown'] = (e) => {\n    // Pressing backspace on empty input should remove the last tag\n    if (e.key === 'Backspace' && !inputValue && activeTagIndex < 0 && selectedIndices.length > 0) {\n      if (isControlled) {\n        setControlledValueIndices(selectedIndices.slice(0, -1));\n      } else {\n        setSelectedIndices(selectedIndices.slice(0, -1));\n      }\n    }\n    onBaseDropdownInputKeydown?.(e);\n  };\n\n  const onSelectionChange: BaseDropdownInputTriggerProps['onChange'] = ({ values }) => {\n    console.log('selection change', values);\n    if (selectionType === 'multiple') {\n      setInputValue('');\n      props.onInputValueChange?.({ name: props.name, value: '' });\n      setActiveTagIndex(-1);\n      resetFilters();\n    } else {\n      const displayText = options.find((option) => option.value === values[0])?.title;\n      props.onInputValueChange?.({\n        name: props.name,\n        value: displayText,\n      });\n      // Use displayText as inputValue only if its not controlled by user\n      if (hasAutoCompleteInHeader) {\n        setInputValue('');\n      } else if (typeof props.value === 'undefined') {\n        setInputValue(displayText ?? '');\n      }\n    }\n    props.onChange?.({ name: props.name, values });\n  };\n  return {\n    onSelectionChange,\n    onTriggerKeydown,\n    onInputValueChange,\n  };\n};\n\nconst _AutoComplete = (\n  props: AutoCompleteProps,\n  ref: React.ForwardedRef<BladeElementRef>,\n): React.ReactElement => {\n  const [uncontrolledInputValue, setInputValue] = React.useState('');\n  const inputValue = props.inputValue ?? uncontrolledInputValue;\n\n  const {\n    options,\n    setFilteredValues: setGlobalFilteredValues,\n    hasAutoCompleteInHeader,\n    setHasAutoCompleteInHeader,\n    onTriggerClick,\n    dropdownTriggerer,\n  } = useDropdown();\n\n  const getOptionValues = React.useCallback(() => {\n    return options.map((option) => option.value);\n  }, [options]);\n\n  const { onSelectionChange, onTriggerKeydown, onInputValueChange } = useAutoComplete({\n    props,\n    inputValue,\n    setInputValue,\n    getOptionValues,\n  });\n\n  React.useEffect(() => {\n    if (dropdownTriggerer !== dropdownComponentIds.triggers.AutoComplete) {\n      // When AutoComplete is mounted but not as trigger,\n      // it has to be somewhere in the BottomSheet (most likely header based on UI but works in other parts too)\n      setHasAutoCompleteInHeader(true);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // handles controlled filteredValues state (syncs it with our global filteredValues)\n  React.useEffect(() => {\n    if (props.filteredValues) {\n      setGlobalFilteredValues(props.filteredValues);\n    }\n  }, [props.filteredValues, setGlobalFilteredValues]);\n\n  // set autoFocus to true when used inside bottomsheet\n  const defaultAutoFocusState = hasAutoCompleteInHeader ? true : undefined;\n\n  return (\n    <BaseBox position=\"relative\">\n      <BaseDropdownInputTrigger\n        {...props}\n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus={props.autoFocus ?? defaultAutoFocusState}\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        ref={ref as any}\n        onChange={onSelectionChange}\n        isSelectInput={false}\n        inputValue={inputValue}\n        syncInputValueWithSelection={(value) => {\n          if (!value) {\n            setInputValue('');\n            return;\n          }\n          const selectedOption = options.find((option) => option.value === value);\n          setInputValue(selectedOption?.title ?? '');\n        }}\n        onTriggerKeydown={onTriggerKeydown}\n        onInputValueChange={onInputValueChange}\n        onTriggerClick={(triggerEvent) => {\n          if (!hasAutoCompleteInHeader) {\n            // we don't want clicking on autocomplete to open / close Dropdown when it is used inside BottomSheet's header\n            onTriggerClick();\n          }\n          props?.onClick?.(triggerEvent);\n        }}\n      />\n    </BaseBox>\n  );\n};\n\n/**\n * ### AutoComplete\n *\n * Extension on top of SelectInput which allows you type and filter between ActionList items\n *\n * To be used in combination of `Dropdown` and `ActionList` component\n *\n * ---\n *\n * #### Usage in Desktop\n *\n * ```diff\n * <Dropdown>\n * + <AutoComplete label=\"Select Fruits\" />\n *   <DropdownOverlay>\n *     <ActionList>\n *       <ActionListItem title=\"Mango\" value=\"mango\" />\n *       <ActionListItem title=\"Apple\" value=\"apple\" />\n *     </ActionList>\n *   </DropdownOverlay>\n * </Dropdown>\n * ```\n *\n * #### Usage in Mobile\n *\n * ```diff\n * <Dropdown>\n * + <SelectInput label=\"Select Fruits\" />\n *   <BottomSheet>\n *      <BottomSheetHeader>\n * +      <AutoComplete label=\"Select Fruits\" />\n *      </BottomSheetHeader>\n *      <BottomSheetBody>\n *       <ActionList>\n *         <ActionListItem title=\"Mango\" value=\"mango\" />\n *         <ActionListItem title=\"Apple\" value=\"apple\" />\n *       </ActionList>\n *      </BottomSheetBody>\n *   </BottomSheet>\n * </Dropdown>\n * ```\n *\n * ---\n *\n * Checkout {@link https://blade.razorpay.com/?path=/docs/components-dropdown-with-autocomplete--with-single-select AutoComplete Documentation}.\n */\nconst AutoComplete = assignWithoutSideEffects(React.forwardRef(_AutoComplete), {\n  componentId: dropdownComponentIds.triggers.AutoComplete,\n});\n\nexport { AutoComplete };\n"],"names":["useAutoComplete","_ref","props","inputValue","setInputValue","getOptionValues","_useDropdown","useDropdown","onBaseDropdownInputKeydown","onTriggerKeydown","isOpen","setIsOpen","selectedIndices","setSelectedIndices","setControlledValueIndices","isControlled","options","setGlobalFilteredValues","setFilteredValues","activeTagIndex","setActiveTagIndex","setActiveIndex","globalFilteredValues","filteredValues","selectionType","triggererRef","hasAutoCompleteInHeader","resetFilters","React","useEffect","firstItemOptionIndex","findIndex","option","value","length","isReactNative","_triggererRef$current","current","focus","onInputValueChange","_ref2","_props$onInputValueCh","name","call","filteredOptions","filter","optionValue","String","toLowerCase","includes","e","key","slice","onSelectionChange","_ref3","_props$onChange","values","console","log","_props$onInputValueCh2","_options$find","_props$onInputValueCh3","displayText","find","title","onChange","_AutoComplete","ref","_props$inputValue","_props$autoFocus","_React$useState","useState","_React$useState2","_slicedToArray","uncontrolledInputValue","_useDropdown2","setHasAutoCompleteInHeader","onTriggerClick","dropdownTriggerer","useCallback","map","_useAutoComplete","dropdownComponentIds","triggers","AutoComplete","defaultAutoFocusState","undefined","_jsx","BaseBox","position","children","BaseDropdownInputTrigger","_objectSpread","autoFocus","isSelectInput","syncInputValueWithSelection","_selectedOption$title","selectedOption","triggerEvent","_props$onClick","onClick","assignWithoutSideEffects","forwardRef","componentId"],"mappings":"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"}