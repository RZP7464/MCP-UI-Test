{"version":3,"file":"StepGroup.web.js","sources":["../../../../../../src/components/StepGroup/StepGroup.web.tsx"],"sourcesContent":["import React from 'react';\nimport type { StepGroupContextType, StepGroupProps } from './types';\nimport { StepGroupContext, useStepGroup } from './StepGroupContext';\nimport { componentIds } from './componentIds';\nimport BaseBox from '~components/Box/BaseBox';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport { getComponentId } from '~utils/isValidAllowedChildren';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { BladeElementRef } from '~utils/types';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\nimport { componentIds as collapsibleComponentIds } from '~components/Collapsible/componentIds';\nimport { throwBladeError } from '~utils/logger';\n\nconst useChildrenWithIndexes = ({\n  _nestingLevel,\n  children,\n  ...parentStepGroupProps\n}: Pick<StepGroupProps, 'children' | '_nestingLevel' | 'size' | 'orientation'>): {\n  childrenWithIndex: React.ReactNode;\n  totalItemsInParentGroupCount: number;\n} => {\n  const { totalItemsInParentGroupCount: totalItemsFromPreviousParent } = useStepGroup();\n\n  let totalIndex = 0;\n  const traverseGroupAndAddIndex = (\n    groupChildrenProp: StepGroupProps['children'],\n    nestingLevelOfGroup = 0,\n    stepItemIndex = 0,\n  ): React.ReactNode => {\n    return React.Children.map(groupChildrenProp, (child, index) => {\n      const componentId = getComponentId(child);\n      if (componentId === componentIds.StepItem) {\n        return React.cloneElement(child, {\n          _index: stepItemIndex++,\n          _totalIndex: totalIndex++,\n          _nestingLevel: nestingLevelOfGroup,\n          key: index,\n        });\n      }\n\n      if (componentId === collapsibleComponentIds.Collapsible) {\n        if (parentStepGroupProps.orientation !== 'vertical' && __DEV__) {\n          throwBladeError({\n            message: 'Collapsible is not supported in horizontal orientation',\n            moduleName: 'StepGroup',\n          });\n        }\n\n        return React.cloneElement(child, {\n          children: React.Children.map(child.props.children, (nestedChild) => {\n            if (\n              React.isValidElement(nestedChild) &&\n              getComponentId(nestedChild) === collapsibleComponentIds.CollapsibleBody\n            ) {\n              return React.cloneElement(nestedChild as React.ReactElement, {\n                children: traverseGroupAndAddIndex(\n                  (nestedChild.props as { children: React.ReactElement }).children,\n                  nestingLevelOfGroup,\n                  stepItemIndex,\n                ),\n                key: totalIndex,\n              });\n            }\n            return nestedChild;\n          }),\n        });\n      }\n\n      if (componentId === componentIds.StepGroup && nestingLevelOfGroup < 3) {\n        return React.cloneElement(child, {\n          ...parentStepGroupProps,\n          children: traverseGroupAndAddIndex(child.props.children, nestingLevelOfGroup + 1),\n          _nestingLevel: nestingLevelOfGroup + 1,\n        });\n      }\n\n      return child;\n    });\n  };\n\n  const childrenWithIndex: React.ReactNode = React.useMemo(\n    () => (_nestingLevel === 0 ? traverseGroupAndAddIndex(children) : children),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [children, _nestingLevel],\n  );\n\n  const totalItemsInParentGroupCount =\n    _nestingLevel === 0 ? totalIndex : totalItemsFromPreviousParent;\n\n  return { childrenWithIndex, totalItemsInParentGroupCount };\n};\n\nconst _StepGroup = (\n  {\n    size = 'medium',\n    orientation = 'vertical',\n    children,\n    testID,\n    _nestingLevel = 0,\n    width,\n    minWidth,\n    maxWidth,\n    ...rest\n  }: StepGroupProps,\n  ref: React.Ref<BladeElementRef>,\n): React.ReactElement => {\n  const itemsInGroupCount = React.Children.count(children);\n  const { childrenWithIndex, totalItemsInParentGroupCount } = useChildrenWithIndexes({\n    children,\n    size,\n    orientation,\n    _nestingLevel,\n  });\n  const contextValue = React.useMemo<StepGroupContextType>(\n    () => ({\n      size,\n      orientation,\n      itemsInGroupCount,\n      totalItemsInParentGroupCount,\n    }),\n    [size, orientation, itemsInGroupCount, totalItemsInParentGroupCount],\n  );\n\n  const isHorizontal = orientation === 'horizontal';\n  const defaultWidth = isHorizontal ? '100%' : undefined;\n\n  return (\n    <StepGroupContext.Provider value={contextValue}>\n      <BaseBox\n        ref={ref as never}\n        {...getStyledProps(rest)}\n        display=\"inline-flex\"\n        maxWidth={maxWidth ?? '100%'}\n        minWidth={minWidth}\n        width={width ?? defaultWidth}\n        paddingY={_nestingLevel === 0 ? 'spacing.4' : undefined}\n        overflowX={isHorizontal ? 'auto' : undefined}\n        flexDirection={isHorizontal ? 'row' : 'column'}\n        {...metaAttribute({ name: MetaConstants.StepGroup, testID })}\n        {...makeAnalyticsAttribute(rest)}\n      >\n        {childrenWithIndex}\n      </BaseBox>\n    </StepGroupContext.Provider>\n  );\n};\n\n/**\n * ## StepGroup\n *\n * Step Group visualises sequential processes with a consistent structure. It can be interactive, guiding users through steps, or function as a timeline for reference.\n *\n * ### Usage\n *\n * ```jsx\n * <StepGroup orientation=\"vertical\" size=\"medium\">\n *   <StepItem title=\"Personal Details\" />\n *   <StepItem title=\"Business Details\" />\n * </StepGroup>\n * ```\n *\n * ---\n *\n * Checkout {@link https://blade.razorpay.com/?path=/docs/components-stepgroup--docs StepGroup Documentation}\n */\nconst StepGroup = assignWithoutSideEffects(React.forwardRef(_StepGroup), {\n  componentId: componentIds.StepGroup,\n  displayName: componentIds.StepGroup,\n});\n\nexport { StepGroup };\n"],"names":["useChildrenWithIndexes","_ref","_nestingLevel","children","parentStepGroupProps","_objectWithoutProperties","_excluded","_useStepGroup","useStepGroup","totalItemsFromPreviousParent","totalItemsInParentGroupCount","totalIndex","traverseGroupAndAddIndex","groupChildrenProp","nestingLevelOfGroup","arguments","length","undefined","stepItemIndex","React","Children","map","child","index","componentId","getComponentId","componentIds","StepItem","cloneElement","_index","_totalIndex","key","collapsibleComponentIds","Collapsible","orientation","throwBladeError","message","moduleName","props","nestedChild","isValidElement","CollapsibleBody","StepGroup","_objectSpread","childrenWithIndex","useMemo","_StepGroup","_ref2","ref","_ref2$size","size","_ref2$orientation","testID","_ref2$_nestingLevel","width","minWidth","maxWidth","rest","_excluded2","itemsInGroupCount","count","_useChildrenWithIndex","contextValue","isHorizontal","defaultWidth","_jsx","StepGroupContext","Provider","value","BaseBox","getStyledProps","display","paddingY","overflowX","flexDirection","metaAttribute","name","MetaConstants","makeAnalyticsAttribute","assignWithoutSideEffects","forwardRef","displayName"],"mappings":"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"}