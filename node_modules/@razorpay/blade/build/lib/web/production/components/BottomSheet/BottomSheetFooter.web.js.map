{"version":3,"file":"BottomSheetFooter.web.js","sources":["../../../../../../src/components/BottomSheet/BottomSheetFooter.web.tsx"],"sourcesContent":["import React from 'react';\nimport { useBottomSheetContext } from './BottomSheetContext';\nimport type { BaseFooterProps } from '~components/BaseHeaderFooter/BaseFooter';\nimport { BaseFooter } from '~components/BaseHeaderFooter/BaseFooter';\nimport BaseBox from '~components/Box/BaseBox';\nimport { useIsomorphicLayoutEffect } from '~utils/useIsomorphicLayoutEffect';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\nconst BottomSheetFooter = ({\n  children,\n  ...dataAnalyticsProps\n}: BaseFooterProps): React.ReactElement => {\n  const { setFooterHeight, isOpen, bind } = useBottomSheetContext();\n  const ref = React.useRef<HTMLDivElement>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    // for some reason the calculated footer height is changing when user drags the sheet\n    // although i don't see a reason why, thus putting it in a setTimeout so that\n    // we calculate the height on the next browser paint\n    window.setTimeout(() => {\n      if (!ref.current) return;\n      setFooterHeight(ref.current.getBoundingClientRect().height);\n    });\n  }, [ref, isOpen]);\n\n  return (\n    <BaseBox\n      ref={ref}\n      width=\"100%\"\n      flexShrink={0}\n      marginTop=\"auto\"\n      backgroundColor=\"popup.background.subtle\"\n      touchAction=\"none\"\n      zIndex={2}\n      {...metaAttribute({ name: MetaConstants.BottomSheetFooter })}\n      {...bind?.()}\n      {...makeAnalyticsAttribute(dataAnalyticsProps)}\n    >\n      <BaseFooter>{children}</BaseFooter>\n    </BaseBox>\n  );\n};\n\nexport { BottomSheetFooter };\n"],"names":["BottomSheetFooter","_ref","children","dataAnalyticsProps","_objectWithoutProperties","_excluded","_useBottomSheetContex","useBottomSheetContext","setFooterHeight","isOpen","bind","ref","React","useRef","useIsomorphicLayoutEffect","window","setTimeout","current","getBoundingClientRect","height","_jsx","BaseBox","_objectSpread","width","flexShrink","marginTop","backgroundColor","touchAction","zIndex","metaAttribute","name","MetaConstants","makeAnalyticsAttribute","BaseFooter"],"mappings":";;;;;;;;;;;;;;;;;;AASA,IAAMA,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAAC,IAAA,EAGoB;AAAA,EAAA,IAFzCC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;AACLC,IAAAA,kBAAkB,GAAAC,wBAAA,CAAAH,IAAA,EAAAI,SAAA,CAAA,CAAA;AAErB,EAAA,IAAAC,qBAAA,GAA0CC,qBAAqB,EAAE;IAAzDC,eAAe,GAAAF,qBAAA,CAAfE,eAAe;IAAEC,MAAM,GAAAH,qBAAA,CAANG,MAAM;IAAEC,IAAI,GAAAJ,qBAAA,CAAJI,IAAI,CAAA;AACrC,EAAA,IAAMC,GAAG,GAAGC,cAAK,CAACC,MAAM,CAAiB,IAAI,CAAC,CAAA;AAE9CC,EAAAA,yBAAyB,CAAC,YAAM;AAC9B;AACA;AACA;IACAC,MAAM,CAACC,UAAU,CAAC,YAAM;AACtB,MAAA,IAAI,CAACL,GAAG,CAACM,OAAO,EAAE,OAAA;MAClBT,eAAe,CAACG,GAAG,CAACM,OAAO,CAACC,qBAAqB,EAAE,CAACC,MAAM,CAAC,CAAA;AAC7D,KAAC,CAAC,CAAA;AACJ,GAAC,EAAE,CAACR,GAAG,EAAEF,MAAM,CAAC,CAAC,CAAA;EAEjB,oBACEW,GAAA,CAACC,OAAO,EAAAC,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAA;AACNX,IAAAA,GAAG,EAAEA,GAAI;AACTY,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,UAAU,EAAE,CAAE;AACdC,IAAAA,SAAS,EAAC,MAAM;AAChBC,IAAAA,eAAe,EAAC,yBAAyB;AACzCC,IAAAA,WAAW,EAAC,MAAM;AAClBC,IAAAA,MAAM,EAAE,CAAA;AAAE,GAAA,EACNC,aAAa,CAAC;IAAEC,IAAI,EAAEC,aAAa,CAAC/B,iBAAAA;AAAkB,GAAC,CAAC,CAAA,EACxDU,IAAI,KAAA,IAAA,IAAJA,IAAI,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAJA,IAAI,EAAI,CAAA,EACRsB,sBAAsB,CAAC7B,kBAAkB,CAAC,CAAA,EAAA,EAAA,EAAA;IAAAD,QAAA,eAE9CkB,GAAA,CAACa,UAAU,EAAA;AAAA/B,MAAAA,QAAA,EAAEA,QAAAA;KAAqB,CAAA;AAAC,GAAA,CAC5B,CAAC,CAAA;AAEd;;;;"}