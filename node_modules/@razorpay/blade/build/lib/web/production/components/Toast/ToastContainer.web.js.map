{"version":3,"file":"ToastContainer.web.js","sources":["../../../../../../src/components/Toast/ToastContainer.web.tsx"],"sourcesContent":["import type { ToastPosition, ToasterProps, Toast } from 'react-hot-toast';\nimport { resolveValue, useToaster } from 'react-hot-toast';\nimport React from 'react';\nimport styled from 'styled-components';\nimport {\n  PEEKS,\n  MAX_TOASTS,\n  SCALE_FACTOR,\n  GUTTER,\n  PEEK_GUTTER,\n  TOAST_MAX_WIDTH,\n  TOAST_Z_INDEX,\n  MIN_TOAST_MOBILE,\n  MIN_TOAST_DESKTOP,\n  CONTAINER_GUTTER_MOBILE,\n  CONTAINER_GUTTER_DESKTOP,\n} from './constants';\nimport { makeMotionTime, makeSize, useTheme } from '~utils';\nimport BaseBox from '~components/Box/BaseBox';\nimport type { Theme } from '~components/BladeProvider';\nimport { useIsMobile } from '~utils/useIsMobile';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\ntype CalculateYPositionProps = {\n  toast: Toast;\n  index: number;\n  isExpanded: boolean;\n  reverseOrder?: boolean;\n};\n\nconst StyledToastWrapper = styled(BaseBox)<{\n  isVisible: boolean;\n  index: number;\n  isExpanded: boolean;\n  isPromotional: boolean;\n}>(({ isVisible, index, isExpanded, isPromotional }) => {\n  let opacity: number = isVisible ? 1 : 0;\n  // Only make the PEEKING and MAX_TOASTS toasts visible,\n  // Every other toasts should be hidden\n  if (index < PEEKS + MAX_TOASTS) {\n    opacity = 1;\n  } else if (isPromotional || isExpanded) {\n    opacity = 1;\n  } else {\n    opacity = 0;\n  }\n\n  return {\n    '& > *': {\n      pointerEvents: opacity === 1 ? 'auto' : 'none',\n    },\n    opacity,\n  };\n});\n\nconst getPositionStyle = (\n  position: ToastPosition,\n  offset: number,\n  scale: number,\n  theme: Theme,\n): React.CSSProperties => {\n  const top = position.includes('top');\n  const verticalStyle: React.CSSProperties = top ? { top: 0 } : { bottom: 0 };\n  const horizontalStyle: React.CSSProperties = position.includes('center')\n    ? {\n        justifyContent: 'center',\n      }\n    : position.includes('right')\n    ? {\n        justifyContent: 'flex-end',\n      }\n    : {};\n\n  return {\n    left: 0,\n    right: 0,\n    display: 'flex',\n    position: 'absolute',\n    transformOrigin: 'center',\n    transition: `${makeMotionTime(theme.motion.duration.gentle)} ${theme.motion.easing.standard}`,\n    transitionProperty: 'transform, opacity, height',\n    transform: `translateY(${offset * (top ? 1 : -1)}px) scale(${scale})`,\n    ...verticalStyle,\n    ...horizontalStyle,\n  };\n};\n\nfunction isPromotionalToast(toast: Toast): boolean {\n  // @ts-expect-error\n  return toast.type == 'promotional';\n}\n\nconst Toaster: React.FC<ToasterProps & { offsetBottom?: number; zIndex?: number }> = ({\n  reverseOrder,\n  position = 'top-center',\n  offsetBottom,\n  zIndex,\n  toastOptions,\n  containerClassName,\n  ...rest\n}) => {\n  const { toasts, handlers } = useToaster(toastOptions);\n  const { theme } = useTheme();\n  const [frontToastHeight, setFrontToastHeight] = React.useState(0);\n  const [hasManuallyExpanded, setHasManuallyExpanded] = React.useState(false);\n  const isMobile = useIsMobile();\n  const minToasts = isMobile ? MIN_TOAST_MOBILE : MIN_TOAST_DESKTOP;\n  const defaultGutter = isMobile ? CONTAINER_GUTTER_MOBILE : CONTAINER_GUTTER_DESKTOP;\n  const bottomGutter = offsetBottom ?? defaultGutter;\n\n  const infoToasts = React.useMemo(() => toasts.filter((toast) => !isPromotionalToast(toast)), [\n    toasts,\n  ]);\n  const promoToasts = React.useMemo(() => toasts.filter((toast) => isPromotionalToast(toast)), [\n    toasts,\n  ]);\n\n  // always keep promo toasts at the bottom of the stack\n  const recomputedToasts = React.useMemo(() => [...infoToasts, ...promoToasts], [\n    infoToasts,\n    promoToasts,\n  ]);\n\n  const hasPromoToast = promoToasts.length > 0 && promoToasts[0]?.visible;\n  const promoToastHeight = promoToasts[0]?.height ?? 0;\n  const isExpanded = hasManuallyExpanded || recomputedToasts.length <= minToasts;\n\n  // Use container zIndex if provided, otherwise use default\n  const containerZIndex = zIndex ?? TOAST_Z_INDEX;\n\n  React.useLayoutEffect(() => {\n    // find the first toast which is visible\n    const firstToast = infoToasts.find((t, index) => t.visible && index === 0);\n    if (firstToast) {\n      setFrontToastHeight(firstToast.height ?? 0);\n    }\n  }, [infoToasts]);\n\n  // calculate total height of all toasts\n  const totalHeight = React.useMemo(() => {\n    return (\n      recomputedToasts\n        // only consider visible recomputedToasts\n        .filter((toast) => toast.visible)\n        .reduce((prevHeight, toast) => prevHeight + (toast.height ?? 0), 0) +\n      recomputedToasts.length * GUTTER\n    );\n  }, [recomputedToasts]);\n\n  // Stacking logic explained in detail:\n  // https://www.loom.com/share/522d9a445e2f41e1886cce4decb9ab9d?sid=4287acf6-8d44-431b-93e1-c1a0d40a0aba\n  //\n  // 1. 3 toasts can be stacked on top of each other\n  // 2. After 3 toasts, the toasts will be scaled down and peek from behind\n  // 3. There can be maximum of 3 toasts peeking from behind\n  // 4. After 3 peeking toasts, the toasts will be hidden\n  // 5. If there is a promo toast, all toasts will be lifted up\n  // 6. Promo toasts will always be on the bottom\n  const calculateYPosition = React.useCallback(\n    ({ toast, index }: CalculateYPositionProps) => {\n      // find the current toast index\n      const toastIndex = infoToasts.findIndex((t) => t.id === toast.id);\n      // number of toasts before this toast\n      const toastsBefore = infoToasts.filter((toast, i) => i < toastIndex && toast.visible).length;\n\n      let scale = Math.max(0.7, 1 - toastsBefore * SCALE_FACTOR);\n      // first toast should always have a scale of 1\n      if (index < MAX_TOASTS) {\n        scale = 1;\n      }\n\n      // y position of toast,\n      let offset = infoToasts\n        .filter((toast) => toast.visible)\n        .slice(0, toastsBefore)\n        .reduce((y, toast) => {\n          // if the toast is expanded, add the height of the toast + gutter\n          if (isExpanded) {\n            return y + (toast.height ?? 0) + GUTTER;\n          }\n          // if the toast is not expanded, add only the peek gutter\n          return y + PEEK_GUTTER;\n        }, 0);\n\n      // lift all info toasts up if there is a promo toast\n      if (hasPromoToast) {\n        offset += GUTTER + promoToastHeight;\n      }\n\n      // if this is a promo toast, then put it at the bottom and force the scale to 1\n      if (isPromotionalToast(toast)) {\n        offset = 0;\n        scale = 1;\n      }\n\n      return { offset, scale: isExpanded ? 1 : scale };\n    },\n    [hasPromoToast, infoToasts, isExpanded, promoToastHeight],\n  );\n\n  const handleMouseEnter = (): void => {\n    if (isMobile) return;\n    setHasManuallyExpanded(true);\n    handlers.startPause();\n  };\n\n  const handleMouseLeave = (): void => {\n    if (isMobile) return;\n    setHasManuallyExpanded(false);\n    handlers.endPause();\n  };\n\n  const handleToastClick = (): void => {\n    if (!isMobile) return;\n    setHasManuallyExpanded((prev) => {\n      const next = !prev;\n      if (next) {\n        handlers.startPause();\n      } else {\n        handlers.endPause();\n      }\n      return next;\n    });\n  };\n\n  return (\n    <BaseBox\n      position=\"fixed\"\n      zIndex={containerZIndex}\n      top={makeSize(defaultGutter)}\n      left={makeSize(defaultGutter)}\n      right={makeSize(defaultGutter)}\n      bottom={makeSize(bottomGutter)}\n      width={`calc(100% - ${defaultGutter * 2}px)`}\n      maxWidth={makeSize(TOAST_MAX_WIDTH)}\n      pointerEvents=\"none\"\n      className={containerClassName}\n      {...metaAttribute({ name: MetaConstants.ToastContainer })}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      {/*\n       * Mouseover container,\n       * fills in the gap between toasts so that mouseleave doesn't trigger in the gaps\n       */}\n      <BaseBox\n        position=\"absolute\"\n        bottom={`${promoToastHeight}px`}\n        left=\"0px\"\n        width=\"100%\"\n        pointerEvents={isExpanded ? 'all' : 'none'}\n        height={makeSize(isExpanded ? totalHeight - promoToastHeight : frontToastHeight)}\n        zIndex={-100}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        onClick={handleToastClick}\n        {...metaAttribute({ testID: 'toast-mouseover-container' })}\n      />\n      {recomputedToasts.map((toast, index) => {\n        const toastPosition = toast.position ?? position;\n        const isPromotional = isPromotionalToast(toast);\n        const { offset, scale } = calculateYPosition({\n          toast,\n          isExpanded,\n          reverseOrder,\n          index,\n        });\n        const positionStyle = getPositionStyle(toastPosition, offset, scale, theme);\n        // recalculate height of toast\n        const ref = (el: HTMLDivElement): void => {\n          if (el && typeof toast.height !== 'number') {\n            const height = el.getBoundingClientRect().height;\n            handlers.updateHeight(toast.id, height);\n          }\n        };\n\n        let toastHeight = toast.height;\n        if (index > MAX_TOASTS - 1 && !isPromotional) {\n          toastHeight = frontToastHeight;\n        }\n        if (isExpanded) {\n          toastHeight = toast.height;\n        }\n\n        // Maintain relative stacking order (newer toasts in front)\n        // Use -1 * index so newer toasts (lower index) have higher z-index values\n        const wrapperZIndex = -1 * index;\n\n        return (\n          <StyledToastWrapper\n            key={toast.id}\n            index={index}\n            ref={ref}\n            isExpanded={isExpanded}\n            isVisible={toast.visible}\n            isPromotional={isPromotional}\n            style={{\n              ...positionStyle,\n              zIndex: wrapperZIndex,\n              height: toastHeight,\n              overflow: 'hidden',\n            }}\n            onMouseEnter={() => {\n              if (isPromotional) return;\n              handleMouseEnter();\n            }}\n            onMouseLeave={() => {\n              if (isPromotional) return;\n              handleMouseLeave();\n            }}\n            onClick={() => {\n              if (isPromotional) return;\n              handleToastClick();\n            }}\n          >\n            <BaseBox height=\"fit-content\" width=\"100%\">\n              {resolveValue(toast.message, { ...toast, index })}\n            </BaseBox>\n          </StyledToastWrapper>\n        );\n      })}\n    </BaseBox>\n  );\n};\n\ntype ToastContainerProps = {\n  /**\n   * The offset from the bottom of the screen to the toast container.\n   * This is useful when you want to position the toast container at a different\n   * position from the bottom of the screen.\n   *\n   * @default isMobile ? 16px : 24px\n   */\n  offsetBottom?: number;\n  /**\n   * Custom z-index value for the toast container.\n   * This is useful when you want to position toasts above other elements like modals.\n   *\n   * @default 2001\n   */\n  zIndex?: number;\n};\n\nconst ToastContainer = ({ offsetBottom, zIndex }: ToastContainerProps): React.ReactElement => {\n  return <Toaster offsetBottom={offsetBottom} zIndex={zIndex} position=\"bottom-left\" />;\n};\n\nexport { ToastContainer };\n"],"names":["StyledToastWrapper","styled","BaseBox","withConfig","displayName","componentId","_ref","isVisible","index","isExpanded","isPromotional","opacity","PEEKS","MAX_TOASTS","pointerEvents","getPositionStyle","position","offset","scale","theme","top","includes","verticalStyle","bottom","horizontalStyle","justifyContent","_objectSpread","left","right","display","transformOrigin","transition","concat","makeMotionTime","motion","duration","gentle","easing","standard","transitionProperty","transform","isPromotionalToast","toast","type","Toaster","_ref2","_promoToasts$","_promoToasts$0$height","_promoToasts$2","reverseOrder","_ref2$position","offsetBottom","zIndex","toastOptions","containerClassName","rest","_objectWithoutProperties","_excluded","_useToaster","useToaster","toasts","handlers","_useTheme","useTheme","_React$useState","React","useState","_React$useState2","_slicedToArray","frontToastHeight","setFrontToastHeight","_React$useState3","_React$useState4","hasManuallyExpanded","setHasManuallyExpanded","isMobile","useIsMobile","minToasts","MIN_TOAST_MOBILE","MIN_TOAST_DESKTOP","defaultGutter","CONTAINER_GUTTER_MOBILE","CONTAINER_GUTTER_DESKTOP","bottomGutter","infoToasts","useMemo","filter","promoToasts","recomputedToasts","_toConsumableArray","hasPromoToast","length","visible","promoToastHeight","height","containerZIndex","TOAST_Z_INDEX","useLayoutEffect","firstToast","find","t","_firstToast$height","totalHeight","reduce","prevHeight","_toast$height","GUTTER","calculateYPosition","useCallback","_ref3","toastIndex","findIndex","id","toastsBefore","i","Math","max","SCALE_FACTOR","slice","y","_toast$height2","PEEK_GUTTER","handleMouseEnter","startPause","handleMouseLeave","endPause","handleToastClick","prev","next","_jsxs","makeSize","width","maxWidth","TOAST_MAX_WIDTH","className","metaAttribute","name","MetaConstants","ToastContainer","makeAnalyticsAttribute","children","_jsx","onMouseEnter","onMouseLeave","onClick","testID","map","_toast$position","toastPosition","_calculateYPosition","positionStyle","ref","el","getBoundingClientRect","updateHeight","toastHeight","wrapperZIndex","style","overflow","resolveValue","message","_ref4"],"mappings":"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"}