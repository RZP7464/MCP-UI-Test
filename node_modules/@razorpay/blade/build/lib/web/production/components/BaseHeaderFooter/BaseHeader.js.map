{"version":3,"file":"BaseHeader.js","sources":["../../../../../../src/components/BaseHeaderFooter/BaseHeader.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport type { ReactDOMAttributes } from '@use-gesture/react/dist/declarations/src/types';\nimport { Divider } from '~components/Divider';\nimport type { DividerProps } from '~components/Divider';\nimport BaseBox from '~components/Box/BaseBox';\nimport { Heading, Text } from '~components/Typography';\nimport { IconButton } from '~components/Button/IconButton';\nimport { ChevronLeftIcon, CloseIcon } from '~components/Icons';\nimport type { DataAnalyticsAttribute, TestID, ElementTiming } from '~utils/types';\nimport type { BoxProps } from '~components/Box';\nimport { Box } from '~components/Box';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { getComponentId } from '~utils/isValidAllowedChildren';\nimport { isReactNative, makeSize } from '~utils';\nimport { metaAttribute } from '~utils/metaAttribute';\nimport { logger, throwBladeError } from '~utils/logger';\nimport { size as sizeToken } from '~tokens/global';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\ntype BaseHeaderProps = {\n  title?: string;\n  subtitle?: string;\n  /**\n   * Leading part of the header placed at the left most side of the header\n   */\n  leading?: React.ReactNode;\n  /**\n   * Trailing part of the header placed at the right most side of the header\n   */\n  trailing?: React.ReactNode;\n  /**\n   * Placed adjacent to the title text\n   */\n  titleSuffix?: React.ReactNode;\n  /**\n   * @default true\n   */\n  showDivider?: boolean;\n  /**\n   * @default false\n   */\n  showBackButton?: boolean;\n\n  /**\n   * Slot for rendering any trailing interaction element into BaseHeader.\n   *\n   * E.g. Used in accordion to render CollapsibleChevronIcon\n   */\n  trailingInteractionElement?: React.ReactNode;\n\n  /**\n   * Decides size of the Header\n   */\n  size?: 'xlarge' | 'large' | 'medium';\n  /**\n   * @default true\n   */\n  showCloseButton?: boolean;\n\n  /**\n   * Disabled state of BaseHeader\n   *\n   * @default false\n   */\n  isDisabled?: boolean;\n\n  paddingX?: BoxProps['paddingX'];\n  marginY?: BoxProps['marginY'];\n  marginTop?: BoxProps['marginTop'];\n  marginBottom?: BoxProps['marginBottom'];\n  alignItems?: BoxProps['alignItems'];\n  dividerProps?: DividerProps;\n\n  onCloseButtonClick?: () => void;\n  onBackButtonClick?: () => void;\n  closeButtonRef?: React.MutableRefObject<any>;\n  backButtonRef?: React.MutableRefObject<any>;\n  metaComponentName?: string;\n  /**\n   * inner child of BottomSheetHeader. Meant to be used for AutoComplete only\n   */\n  children?: React.ReactElement | React.ReactElement[];\n  /**\n   * Background image of the header\n   *\n   * You can use this for adding gradients.\n   */\n  backgroundImage?: BoxProps['backgroundImage'];\n  /**\n   * So we add a wrapper with custom styles in elements like leading, trailing interaction elements and trailing.\n   * this props allows you to control that.\n   *\n   * For example, in Accordion, we add a wrapper with flex to center the icon (in some cases)\n   *\n   * @default false\n   */\n  shouldAlignLeadingAndTrailingElementsToCenter?: boolean;\n} & Pick<\n  ReactDOMAttributes,\n  | 'onClickCapture'\n  | 'onKeyDown'\n  | 'onKeyUp'\n  | 'onLostPointerCapture'\n  | 'onPointerCancel'\n  | 'onPointerDown'\n  | 'onPointerMove'\n  | 'onPointerUp'\n> &\n  TestID &\n  ElementTiming &\n  DataAnalyticsAttribute;\n\ntype TrailingComponents = 'Button' | 'Badge' | 'Link' | 'Text' | 'Amount';\n\nconst commonCenterBoxProps: BoxProps = {\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n};\n\nconst centerBoxProps: { xlarge: BoxProps; large: BoxProps; medium: BoxProps } = {\n  xlarge: {\n    ...commonCenterBoxProps,\n    height: '28px',\n  },\n  large: {\n    ...commonCenterBoxProps,\n    // We want to align title, icon, titleSuffix, trailing, closeButton to baseline\n    // But we also want to keep them center aligned to each other\n    // So we add a virtual Box around these slots with 28px and center align them to that box\n    // We have done similar thing in figma as well (which is where this 28px comes from)\n    height: '28px',\n  },\n  medium: {\n    ...commonCenterBoxProps,\n    height: '20px',\n  },\n};\n\nconst absolutePositionedButton = {\n  position: 'absolute',\n  top: 'spacing.0',\n  right: 'spacing.0',\n} as const;\n\nconst sizeTokensMapping = {\n  xlarge: {\n    title: 'small',\n    type: 'heading',\n  },\n  large: {\n    title: 'large',\n    type: 'text',\n  },\n  medium: {\n    title: 'medium',\n    type: 'text',\n  },\n} as const;\n\n// prop restriction map for corresponding sub components\nconst propRestrictionMap = {\n  large: {\n    Button: {\n      size: 'xsmall',\n      variant: 'tertiary',\n    },\n    IconButton: {\n      size: 'large',\n    },\n    Badge: {\n      size: 'medium',\n    },\n    Link: {\n      size: 'medium',\n    },\n    Text: {\n      size: 'medium',\n      variant: 'body',\n    },\n    Amount: {\n      type: 'body',\n      size: 'medium',\n    },\n  },\n  xlarge: {\n    Button: {\n      size: 'xsmall',\n      variant: 'tertiary',\n    },\n    IconButton: {\n      size: 'large',\n    },\n    Badge: {\n      size: 'medium',\n    },\n    Link: {\n      size: 'medium',\n    },\n    Text: {\n      size: 'medium',\n      variant: 'body',\n    },\n    Amount: {\n      type: 'body',\n      size: 'medium',\n    },\n  },\n  medium: {\n    Button: {\n      size: 'xsmall',\n      variant: 'tertiary',\n    },\n    IconButton: {\n      size: 'large',\n    },\n    Badge: {\n      size: 'small',\n    },\n    Link: {\n      size: 'small',\n    },\n    Text: {\n      size: 'small',\n      variant: 'body',\n    },\n    Amount: {\n      type: 'body',\n      size: 'small',\n    },\n  },\n} as const;\n\nconst useTrailingRestriction = ({\n  trailing,\n  size,\n}: {\n  size: NonNullable<BaseHeaderProps['size']>;\n  trailing: BaseHeaderProps['trailing'];\n}): React.ReactNode => {\n  const [\n    validatedTrailingComponent,\n    setValidatedTrailingComponent,\n  ] = React.useState<React.ReactElement | null>(null);\n\n  // validate and restrict sub component props in trailing prop\n  React.useEffect(() => {\n    if (React.isValidElement(trailing)) {\n      const trailingComponentType = getComponentId(trailing) as TrailingComponents;\n      const restrictedProps = propRestrictionMap[size][trailingComponentType];\n\n      const allowedComponents = Object.keys(propRestrictionMap[size]);\n      if (__DEV__) {\n        if (!restrictedProps) {\n          throwBladeError({\n            message: `Only one of \\`${allowedComponents.join(\n              ', ',\n            )}\\` component is accepted as trailing`,\n            moduleName: 'Header',\n          });\n        }\n      }\n\n      const restrictedPropKeys = Object.keys(propRestrictionMap[size][trailingComponentType]);\n      for (const prop of restrictedPropKeys) {\n        if (trailing?.props?.hasOwnProperty(prop)) {\n          logger({\n            message: `Do not pass \"${prop}\" to \"${trailingComponentType}\" while inside Header trailing, because we override it.`,\n            moduleName: 'Header',\n            type: 'warn',\n          });\n        }\n      }\n      setValidatedTrailingComponent(\n        React.cloneElement(trailing as React.ReactElement, restrictedProps),\n      );\n    }\n  }, [trailing, size]);\n\n  return validatedTrailingComponent;\n};\n\nconst _BaseHeader = ({\n  title,\n  subtitle,\n  leading,\n  titleSuffix,\n  trailing,\n  showDivider = true,\n  showBackButton = false,\n  showCloseButton = true,\n  onBackButtonClick,\n  onCloseButtonClick,\n  closeButtonRef,\n  backButtonRef,\n  testID,\n  onClickCapture,\n  onKeyDown,\n  onKeyUp,\n  onLostPointerCapture,\n  onPointerCancel,\n  onPointerDown,\n  onPointerMove,\n  onPointerUp,\n  metaComponentName,\n  paddingX,\n  marginY,\n  marginBottom,\n  marginTop,\n  size = 'large',\n  isDisabled,\n  children,\n  trailingInteractionElement,\n  backgroundImage,\n  alignItems = 'flex-start',\n  dividerProps,\n  shouldAlignLeadingAndTrailingElementsToCenter = false,\n  ...rest\n}: BaseHeaderProps): React.ReactElement => {\n  const validatedTrailingComponent = useTrailingRestriction({ trailing, size });\n  const shouldWrapTitle = titleSuffix && trailing && showBackButton && showCloseButton;\n  const hasOnlyChildren = children && !(title || subtitle || titleSuffix || leading);\n\n  const webOnlyEventHandlers: Record<string, any> = isReactNative()\n    ? {}\n    : {\n        onClickCapture,\n        onKeyDown,\n        onKeyUp,\n        onLostPointerCapture,\n        onPointerCancel,\n        onPointerDown,\n        onPointerMove,\n        onPointerUp,\n      };\n\n  const renderTrailingInteractionElementWithChildren = (): React.ReactNode => {\n    if (trailingInteractionElement && children) {\n      return (\n        <Box\n          alignSelf={shouldAlignLeadingAndTrailingElementsToCenter ? 'center' : 'flex-start'}\n          {...centerBoxProps[size]}\n        >\n          {trailingInteractionElement}\n        </Box>\n      );\n    }\n    return null;\n  };\n\n  const renderTrailingInteractionElementWithoutChildren = (): React.ReactNode => {\n    if (trailingInteractionElement && !children) {\n      return (\n        <Box\n          {...centerBoxProps[size]}\n          alignSelf={shouldAlignLeadingAndTrailingElementsToCenter ? 'center' : undefined}\n        >\n          {trailingInteractionElement}\n        </Box>\n      );\n    }\n    return null;\n  };\n\n  const renderLeadingElement = (): React.ReactNode => {\n    if (Boolean(leading)) {\n      return (\n        <BaseBox\n          marginRight=\"spacing.3\"\n          {...centerBoxProps[size]}\n          alignSelf={shouldAlignLeadingAndTrailingElementsToCenter ? 'center' : undefined}\n        >\n          {leading}\n        </BaseBox>\n      );\n    }\n    return null;\n  };\n\n  const renderTrailingElement = (): React.ReactNode => {\n    if (shouldAlignLeadingAndTrailingElementsToCenter && validatedTrailingComponent) {\n      return (\n        <BaseBox marginRight=\"spacing.5\" display=\"flex\" alignItems=\"center\" justifyContent=\"center\">\n          <Box {...centerBoxProps[size]}>{validatedTrailingComponent}</Box>\n        </BaseBox>\n      );\n    }\n    if (validatedTrailingComponent) {\n      return (\n        <BaseBox marginRight=\"spacing.5\">\n          <Box {...centerBoxProps[size]}>{validatedTrailingComponent}</Box>\n        </BaseBox>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <BaseBox\n      {...metaAttribute({ name: metaComponentName, testID })}\n      {...makeAnalyticsAttribute(rest)}\n      backgroundImage={backgroundImage}\n    >\n      <BaseBox\n        marginY={marginY ?? { base: 'spacing.5', m: 'spacing.6' }}\n        paddingX={paddingX ?? { base: 'spacing.5', m: 'spacing.6' }}\n        marginTop={marginTop}\n        marginBottom={marginBottom}\n        touchAction=\"none\"\n        {...webOnlyEventHandlers}\n      >\n        <BaseBox position=\"relative\" display=\"flex\" flexDirection=\"row\" userSelect=\"none\">\n          {showBackButton ? (\n            <BaseBox overflow=\"visible\" marginRight=\"spacing.5\">\n              <Box {...centerBoxProps[size]}>\n                <IconButton\n                  ref={backButtonRef}\n                  size=\"large\"\n                  icon={ChevronLeftIcon}\n                  onClick={() => onBackButtonClick?.()}\n                  accessibilityLabel=\"Back\"\n                />\n              </Box>\n            </BaseBox>\n          ) : null}\n          {hasOnlyChildren ? null : (\n            <BaseBox\n              paddingRight=\"spacing.5\"\n              marginRight=\"auto\"\n              flex=\"auto\"\n              display=\"flex\"\n              flexDirection=\"row\"\n              alignItems={alignItems}\n            >\n              {renderLeadingElement()}\n              <BaseBox flex=\"auto\">\n                <BaseBox\n                  // Explicitly setting maxWidth in React Native because text is not being wrapped properly when multiple fix width components are rendered in header\n                  // In web, flex containers seem to work a expected\n                  // @todo: resolve this if we figure out some better solution later\n                  maxWidth={isReactNative() && shouldWrapTitle ? '100px' : undefined}\n                  flexShrink={0}\n                  display=\"flex\"\n                  flexDirection=\"row\"\n                >\n                  {title ? (\n                    sizeTokensMapping[size].type === 'heading' ? (\n                      <Heading\n                        as=\"h2\"\n                        marginTop={makeSize(sizeToken['1'])}\n                        size={sizeTokensMapping[size].title}\n                        weight=\"semibold\"\n                        color={\n                          isDisabled ? 'surface.text.gray.disabled' : 'surface.text.gray.normal'\n                        }\n                        wordBreak=\"break-word\"\n                      >\n                        {title}\n                      </Heading>\n                    ) : (\n                      <Text\n                        size={sizeTokensMapping[size].title}\n                        marginTop={makeSize(sizeToken['1'])}\n                        weight=\"semibold\"\n                        color={\n                          isDisabled ? 'surface.text.gray.disabled' : 'surface.text.gray.normal'\n                        }\n                        wordBreak=\"break-word\"\n                      >\n                        {title}\n                      </Text>\n                    )\n                  ) : null}\n                  {titleSuffix && (\n                    <BaseBox marginLeft=\"spacing.3\">\n                      <Box {...centerBoxProps[size]}>{titleSuffix}</Box>\n                    </BaseBox>\n                  )}\n                </BaseBox>\n                {subtitle ? (\n                  <Text\n                    variant=\"body\"\n                    size=\"small\"\n                    weight=\"regular\"\n                    color={isDisabled ? 'surface.text.gray.disabled' : 'surface.text.gray.muted'}\n                  >\n                    {subtitle}\n                  </Text>\n                ) : null}\n              </BaseBox>\n            </BaseBox>\n          )}\n          {renderTrailingElement()}\n\n          {showCloseButton ? (\n            <Box {...(hasOnlyChildren ? absolutePositionedButton : centerBoxProps[size])}>\n              <IconButton\n                ref={closeButtonRef}\n                size=\"large\"\n                icon={CloseIcon}\n                accessibilityLabel=\"Close\"\n                onClick={() => onCloseButtonClick?.()}\n              />\n            </Box>\n          ) : null}\n          {renderTrailingInteractionElementWithoutChildren()}\n        </BaseBox>\n        <BaseBox\n          display=\"flex\"\n          width=\"100%\"\n          flexDirection=\"row\"\n          alignItems=\"center\"\n          justifyContent=\"space-between\"\n        >\n          <Box width=\"100%\">{children}</Box>\n          {renderTrailingInteractionElementWithChildren()}\n        </BaseBox>\n      </BaseBox>\n      {showDivider ? <Divider {...dividerProps} /> : null}\n    </BaseBox>\n  );\n};\n\nconst BaseHeader = assignWithoutSideEffects(_BaseHeader, {\n  componentId: 'BaseHeader',\n});\n\nexport type { BaseHeaderProps };\nexport { BaseHeader };\n"],"names":["commonCenterBoxProps","display","alignItems","justifyContent","centerBoxProps","xlarge","_objectSpread","height","large","medium","absolutePositionedButton","position","top","right","sizeTokensMapping","title","type","propRestrictionMap","Button","size","variant","IconButton","Badge","Link","Text","Amount","useTrailingRestriction","_ref","trailing","_React$useState","React","useState","_React$useState2","_slicedToArray","validatedTrailingComponent","setValidatedTrailingComponent","useEffect","isValidElement","trailingComponentType","getComponentId","restrictedProps","allowedComponents","Object","keys","throwBladeError","message","concat","join","moduleName","restrictedPropKeys","_i","_restrictedPropKeys","length","_trailing$props","prop","props","hasOwnProperty","logger","cloneElement","_BaseHeader","_ref2","subtitle","leading","titleSuffix","_ref2$showDivider","showDivider","_ref2$showBackButton","showBackButton","_ref2$showCloseButton","showCloseButton","onBackButtonClick","onCloseButtonClick","closeButtonRef","backButtonRef","testID","onClickCapture","onKeyDown","onKeyUp","onLostPointerCapture","onPointerCancel","onPointerDown","onPointerMove","onPointerUp","metaComponentName","paddingX","marginY","marginBottom","marginTop","_ref2$size","isDisabled","children","trailingInteractionElement","backgroundImage","_ref2$alignItems","dividerProps","_ref2$shouldAlignLead","shouldAlignLeadingAndTrailingElementsToCenter","rest","_objectWithoutProperties","_excluded","shouldWrapTitle","hasOnlyChildren","webOnlyEventHandlers","isReactNative","renderTrailingInteractionElementWithChildren","_jsx","Box","alignSelf","renderTrailingInteractionElementWithoutChildren","undefined","renderLeadingElement","Boolean","BaseBox","marginRight","renderTrailingElement","_jsxs","metaAttribute","name","makeAnalyticsAttribute","base","m","touchAction","flexDirection","userSelect","overflow","ref","icon","ChevronLeftIcon","onClick","accessibilityLabel","paddingRight","flex","maxWidth","flexShrink","Heading","as","makeSize","sizeToken","weight","color","wordBreak","marginLeft","CloseIcon","width","Divider","BaseHeader","assignWithoutSideEffects","componentId"],"mappings":"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"}