{"version":3,"file":"useRadio.js","sources":["../../../../../../src/components/Radio/useRadio.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport React from 'react';\nimport type { GestureResponderEvent } from 'react-native';\nimport { useControllableState } from '~utils/useControllable';\nimport { useId } from '~utils/useId';\nimport { getPlatformType } from '~src/utils';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { throwBladeError } from '~utils/logger';\n\nexport type OnChange = ({\n  isChecked,\n  event,\n  value,\n}: {\n  isChecked: boolean;\n  event: React.ChangeEvent;\n  value?: string;\n}) => void;\n\ntype UseRadioProps = {\n  hasError?: boolean;\n  /**\n   * If `true`, The Radio will be checked. This also makes the Radio controlled\n   * Use `onChange` to update its value\n   *\n   * @default false\n   */\n  isChecked?: boolean;\n  /**\n   * If `true`, the Radio will be initially checked. This also makes the Radio uncontrolled\n   *\n   * @default false\n   */\n  defaultChecked?: boolean;\n  /**\n   * The callback invoked when the checked state of the `Radio` changes.\n   */\n  onChange?: OnChange;\n  /**\n   * The name of the input field in a Radio\n   * (Useful for form submission).\n   */\n  name?: string;\n  /**\n   * The value to be used in the Radio input.\n   * This is the value that will be returned on form submission.\n   */\n  value?: string;\n  /**\n   * If `true`, the Radio will be disabled\n   *\n   * @default false\n   */\n  isDisabled?: boolean;\n  /**\n   * If `true`, the Radio input is marked as required,\n   * and `required` attribute will be added\n   *\n   * @default false\n   */\n  isRequired?: boolean;\n};\n\nconst useRadio = ({\n  isChecked,\n  defaultChecked,\n  isDisabled,\n  isRequired,\n  hasError,\n  onChange,\n  name,\n  value,\n}: UseRadioProps) => {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const isReactNative = getPlatformType() === 'react-native';\n  if (__DEV__) {\n    if (isChecked && defaultChecked) {\n      throwBladeError({\n        message: `Do not provide both 'isChecked' and 'defaultChecked' to useRadio. Consider if you want this component to be controlled or uncontrolled.`,\n        moduleName: 'Radio',\n      });\n    }\n  }\n\n  const [radioState, setRadioState] = useControllableState({\n    value: isChecked,\n    defaultValue: defaultChecked ?? false,\n  });\n\n  const handleOnChange = (event: React.ChangeEvent<HTMLInputElement> | GestureResponderEvent) => {\n    if (isDisabled) {\n      event.stopPropagation();\n      event.preventDefault();\n      return;\n    }\n\n    setRadioState((checked) => {\n      // Prevent radio to be unchecked when clicked again\n      // Once checked radios don't act as toggle buttons\n      if (checked === false) {\n        onChange?.({\n          isChecked: true,\n          event: event as React.ChangeEvent,\n          value,\n        });\n        return true;\n      }\n      return checked;\n    });\n  };\n\n  const state = {\n    isChecked: radioState,\n    setChecked: setRadioState,\n  };\n\n  const idBase = useId('radio');\n  const helpTextId = useId(`${idBase}-helptext`);\n\n  const accessibilityProps = makeAccessible({\n    role: 'radio',\n    required: Boolean(isRequired),\n    invalid: Boolean(hasError),\n    disabled: Boolean(isDisabled),\n    checked: radioState,\n    describedBy: helpTextId,\n  });\n\n  if (isReactNative) {\n    return {\n      state,\n      inputProps: {\n        onPress: handleOnChange,\n        name,\n        value,\n        ...accessibilityProps,\n      },\n    };\n  }\n\n  return {\n    state,\n    ids: { helpTextId },\n    inputProps: {\n      ref: inputRef,\n      onChange: handleOnChange,\n      type: 'radio',\n      name,\n      value,\n      checked: radioState,\n      disabled: isDisabled,\n      required: isRequired,\n      ...accessibilityProps,\n    },\n  };\n};\n\nexport type InputProps = ReturnType<typeof useRadio>['inputProps'];\n\nexport { useRadio };\n"],"names":["useRadio","_ref","isChecked","defaultChecked","isDisabled","isRequired","hasError","onChange","name","value","inputRef","React","useRef","isReactNative","getPlatformType","throwBladeError","message","moduleName","_useControllableState","useControllableState","defaultValue","_useControllableState2","_slicedToArray","radioState","setRadioState","handleOnChange","event","stopPropagation","preventDefault","checked","state","setChecked","idBase","useId","helpTextId","concat","accessibilityProps","makeAccessible","role","required","Boolean","invalid","disabled","describedBy","inputProps","_objectSpread","onPress","ids","ref","type"],"mappings":"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"}