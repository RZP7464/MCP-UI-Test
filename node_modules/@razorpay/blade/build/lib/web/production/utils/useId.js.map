{"version":3,"file":"useId.js","sources":["../../../../../src/utils/useId.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/prefer-nullish-coalescing */\n/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport * as React from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\n\n/**\n * Credit: https://github.com/reach/reach-ui/blob/dev/packages/auto-id/src/auto-id.ts\n */\nlet handoffComplete = false;\nlet id = 0;\nconst genId = () => ++id;\n\n/**\n * Reack hook to generate unique id\n * It helps us provide stable ID which we can reference in the components\n * and also works in server side rendered component\n * TODO: Add support for `React.useId` after React18 upgrade\n *\n * @param prefix prefix to append before the id\n * @param idProp the external id passed from the user\n */\nconst useId = (prefix?: string, idProp?: string) => {\n  const initialId = idProp || (handoffComplete ? genId() : null);\n  const [uid, setUid] = React.useState(initialId);\n\n  useIsomorphicLayoutEffect(() => {\n    // Patch the ID after render. We do this in `useLayoutEffect` to avoid any\n    // rendering flicker, though it'll make the first render slower (unlikely\n    // to matter, but you're welcome to measure your app and let us know if\n    // it's a problem).\n    if (uid === null) setUid(genId());\n  }, []);\n\n  React.useEffect(() => {\n    if (!handoffComplete) {\n      handoffComplete = true;\n    }\n  }, []);\n\n  const id = uid != null ? uid.toString() : undefined;\n  return prefix ? `${prefix}-${id}` : id!;\n};\n\nexport { useId };\n"],"names":["handoffComplete","id","genId","useId","prefix","idProp","initialId","_React$useState","React","useState","_React$useState2","_slicedToArray","uid","setUid","useIsomorphicLayoutEffect","useEffect","toString","undefined","concat"],"mappings":";;;;AAOA;AACA;AACA;AACA,IAAIA,eAAe,GAAG,KAAK,CAAA;AAC3B,IAAIC,EAAE,GAAG,CAAC,CAAA;AACV,IAAMC,KAAK,GAAG,SAARA,KAAKA,GAAA;AAAA,EAAA,OAAS,EAAED,EAAE,CAAA;AAAA,CAAA,CAAA;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACME,IAAAA,KAAK,GAAG,SAARA,KAAKA,CAAIC,MAAe,EAAEC,MAAe,EAAK;EAClD,IAAMC,SAAS,GAAGD,MAAM,KAAKL,eAAe,GAAGE,KAAK,EAAE,GAAG,IAAI,CAAC,CAAA;AAC9D,EAAA,IAAAK,eAAA,GAAsBC,KAAK,CAACC,QAAQ,CAACH,SAAS,CAAC;IAAAI,gBAAA,GAAAC,cAAA,CAAAJ,eAAA,EAAA,CAAA,CAAA;AAAxCK,IAAAA,GAAG,GAAAF,gBAAA,CAAA,CAAA,CAAA;AAAEG,IAAAA,MAAM,GAAAH,gBAAA,CAAA,CAAA,CAAA,CAAA;AAElBI,EAAAA,yBAAyB,CAAC,YAAM;AAC9B;AACA;AACA;AACA;IACA,IAAIF,GAAG,KAAK,IAAI,EAAEC,MAAM,CAACX,KAAK,EAAE,CAAC,CAAA;GAClC,EAAE,EAAE,CAAC,CAAA;EAENM,KAAK,CAACO,SAAS,CAAC,YAAM;IACpB,IAAI,CAACf,eAAe,EAAE;AACpBA,MAAAA,eAAe,GAAG,IAAI,CAAA;AACxB,KAAA;GACD,EAAE,EAAE,CAAC,CAAA;AAEN,EAAA,IAAMC,EAAE,GAAGW,GAAG,IAAI,IAAI,GAAGA,GAAG,CAACI,QAAQ,EAAE,GAAGC,SAAS,CAAA;EACnD,OAAOb,MAAM,GAAAc,EAAAA,CAAAA,MAAA,CAAMd,MAAM,OAAAc,MAAA,CAAIjB,EAAE,CAAA,GAAKA,EAAG,CAAA;AACzC;;;;"}