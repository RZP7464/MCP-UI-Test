{"version":3,"file":"SideNavLink.web.js","sources":["../../../../../../../src/components/SideNav/SideNavItems/SideNavLink.web.tsx"],"sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { FloatingFocusManager, FloatingPortal, useFloating } from '@floating-ui/react';\nimport { NavLinkContext, useNavLink, useSideNav } from '../SideNavContext';\nimport type { SideNavLinkProps } from '../types';\nimport { classes, getNavItemTransition, NAV_ITEM_HEIGHT } from '../tokens';\nimport { Box } from '~components/Box';\nimport { makeBorderSize, makeSize, makeSpace } from '~utils';\nimport { BaseText } from '~components/Typography/BaseText';\nimport { ChevronDownIcon, ChevronRightIcon, ChevronUpIcon } from '~components/Icons';\nimport BaseBox from '~components/Box/BaseBox';\nimport { useCollapsible } from '~components/Collapsible/CollapsibleContext';\nimport { Collapsible, CollapsibleBody } from '~components/Collapsible';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { useFirstRender } from '~utils/useFirstRender';\nimport { getFocusRingStyles } from '~utils/getFocusRingStyles';\nimport { useIsomorphicLayoutEffect } from '~utils/useIsomorphicLayoutEffect';\nimport { throwBladeError } from '~utils/logger';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\nimport { Text } from '~components/Typography';\nimport { TooltipifyComponent } from '~utils/TooltipifyComponent';\n\nconst { SHOW_ON_LINK_HOVER, HIDE_WHEN_COLLAPSED, STYLED_NAV_LINK } = classes;\n\nconst StyledNavLinkContainer = styled(BaseBox)<{ $hasDescription: boolean }>((props) => {\n  return {\n    width: '100%',\n    [`.${SHOW_ON_LINK_HOVER}`]: {\n      opacity: 0,\n      '&:focus-within, &:focus-visible': {\n        opacity: 1,\n      },\n    },\n    '&:hover': {\n      [`.${SHOW_ON_LINK_HOVER}`]: {\n        opacity: 1,\n      },\n\n      [`.${STYLED_NAV_LINK}`]: {\n        color: props.theme.colors.interactive.text.gray.normal,\n        backgroundColor: props.theme.colors.interactive.background.gray.default,\n      },\n    },\n    [`.${STYLED_NAV_LINK}`]: {\n      position: 'relative',\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      height: props.$hasDescription ? undefined : makeSize(NAV_ITEM_HEIGHT),\n      width: '100%',\n      textDecoration: 'none',\n      overflow: 'hidden',\n      flexWrap: 'nowrap',\n      cursor: 'pointer',\n      padding: `${makeSpace(props.theme.spacing[props.$hasDescription ? 3 : 0])} ${makeSpace(\n        props.theme.spacing[4],\n      )}`,\n      margin: `${makeSpace(props.theme.spacing[1])} ${makeSpace(props.theme.spacing[0])}`,\n      color: props.theme.colors.interactive.text.gray.subtle,\n      borderRadius: props.theme.border.radius.medium,\n      borderWidth: makeBorderSize(props.theme.border.width.none),\n      backgroundColor: props.theme.colors.transparent,\n      transition: getNavItemTransition(props.theme),\n      '&[aria-current]': {\n        color: props.theme.colors.interactive.text.primary.subtle,\n        backgroundColor: props.theme.colors.interactive.background.primary.faded,\n      },\n      '&[aria-current]:hover': {\n        color: props.theme.colors.interactive.text.primary.normal,\n        backgroundColor: props.theme.colors.interactive.background.primary.fadedHighlighted,\n      },\n      '&:focus-visible': {\n        ...getFocusRingStyles({ theme: props.theme }),\n      },\n    },\n  };\n});\n\nconst NavLinkIconTitle = ({\n  icon: Icon,\n  title,\n  description,\n  titleSuffix,\n  isActive,\n  trailing,\n  isL1Item,\n}: Pick<\n  SideNavLinkProps,\n  'title' | 'isActive' | 'trailing' | 'description' | 'icon' | 'titleSuffix'\n> & {\n  isL1Item: boolean;\n}): React.ReactElement => {\n  return (\n    <Box width=\"100%\" textAlign=\"left\">\n      <Box display=\"flex\" justifyContent=\"space-between\" width=\"100%\">\n        <Box display=\"flex\" flexDirection=\"row\" gap=\"spacing.3\" alignItems=\"center\">\n          {Icon ? (\n            <BaseBox display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n              <Icon size=\"medium\" color=\"currentColor\" />\n            </BaseBox>\n          ) : null}\n          <BaseText\n            truncateAfterLines={1}\n            color=\"currentColor\"\n            fontWeight=\"medium\"\n            fontSize={100}\n            lineHeight={100}\n            as=\"p\"\n            className={isL1Item ? HIDE_WHEN_COLLAPSED : ''}\n          >\n            {title}\n          </BaseText>\n          {titleSuffix ? (\n            <BaseBox display=\"flex\" alignItems=\"center\">\n              {titleSuffix}\n            </BaseBox>\n          ) : null}\n        </Box>\n        <Box display=\"flex\" alignItems=\"center\">\n          {trailing}\n        </Box>\n      </Box>\n      {!isL1Item && description ? (\n        <Text\n          size=\"small\"\n          marginLeft=\"spacing.7\"\n          textAlign=\"left\"\n          weight=\"medium\"\n          color={isActive ? 'interactive.text.primary.muted' : 'interactive.text.gray.muted'}\n          truncateAfterLines={1}\n        >\n          {description}\n        </Text>\n      ) : null}\n    </Box>\n  );\n};\n\nconst L3Trigger = ({\n  title,\n  description,\n  icon,\n  as,\n  href,\n  target,\n  titleSuffix,\n  tooltip,\n  onClick,\n}: Pick<\n  SideNavLinkProps,\n  | 'title'\n  | 'description'\n  | 'icon'\n  | 'as'\n  | 'href'\n  | 'titleSuffix'\n  | 'tooltip'\n  | 'target'\n  | 'onClick'\n>): React.ReactElement => {\n  const { onExpandChange, isExpanded, collapsibleBodyId } = useCollapsible();\n\n  const toggleCollapse = (e: React.MouseEvent): void => {\n    onClick?.(e);\n    onExpandChange(!isExpanded);\n  };\n  const iconProps = {\n    size: 'medium',\n    color: 'currentColor',\n  } as const;\n\n  return (\n    <TooltipifyComponent tooltip={tooltip}>\n      <StyledNavLinkContainer $hasDescription={Boolean(description)}>\n        <BaseBox\n          className={STYLED_NAV_LINK}\n          as={href ? as : 'button'}\n          to={href}\n          target={target}\n          onClick={(e: React.MouseEvent) => toggleCollapse(e)}\n          {...makeAccessible({ expanded: isExpanded, controls: collapsibleBodyId })}\n        >\n          <NavLinkIconTitle\n            title={title}\n            description={description}\n            icon={icon}\n            isL1Item={false}\n            titleSuffix={titleSuffix}\n            trailing={\n              isExpanded ? <ChevronUpIcon {...iconProps} /> : <ChevronDownIcon {...iconProps} />\n            }\n          />\n        </BaseBox>\n      </StyledNavLinkContainer>\n    </TooltipifyComponent>\n  );\n};\n\n/**\n * This is the curved line that appears when you select L3 item\n */\nconst CurvedVerticalLine = styled(BaseBox)((props) => {\n  const { colors, border, spacing } = props.theme;\n  return {\n    borderWidth: makeBorderSize(props.theme.border.width.thin),\n    borderColor: `${colors.transparent} ${colors.transparent} ${colors.surface.border.primary.muted} ${colors.surface.border.primary.muted}`,\n    borderStyle: 'solid',\n    borderRadius: `${makeBorderSize(border.radius.none)} ${makeBorderSize(\n      border.radius.none,\n    )} ${makeBorderSize(border.radius.none)} ${makeBorderSize(border.radius.medium)}`,\n    // We set veritical line infinitely tall (full size of screen) and then hide the overflowing part from top\n    height: '100vh',\n    position: 'absolute',\n    // We want the active line to be positioned in the middle of item's height thus divide by 2\n    top: `calc(-100vh + ${makeSize(NAV_ITEM_HEIGHT / 2)})`,\n    width: makeSpace(spacing[3]),\n    left: makeSpace(-spacing[3]),\n  };\n});\n\nconst SideNavLink = ({\n  title,\n  description,\n  href,\n  children,\n  titleSuffix,\n  trailing,\n  isActive,\n  icon,\n  tooltip,\n  as,\n  target,\n  onClick,\n  ...rest\n}: SideNavLinkProps): React.ReactElement => {\n  const {\n    l2PortalContainerRef,\n    onLinkActiveChange,\n    closeMobileNav,\n    isL1Collapsed,\n    setIsL1Collapsed,\n  } = useSideNav();\n  const { level: _prevLevel } = useNavLink();\n  const prevLevel = _prevLevel ?? 0;\n  const currentLevel = prevLevel + 1;\n  const isL2Trigger = Boolean(children) && currentLevel === 1;\n  const isL3Trigger = Boolean(children) && currentLevel === 2;\n\n  if (__DEV__) {\n    if (Boolean(children) && currentLevel >= 3) {\n      throwBladeError({\n        message:\n          'SideNav only supports nesting upto L3 but L4 nesting was found. Check the nesting of your SideNavLevel items',\n        moduleName: 'SideNavLink',\n      });\n    }\n\n    if (currentLevel === 1 && Boolean(description)) {\n      throwBladeError({\n        message: 'Description is not supported for L1 items',\n        moduleName: 'SideNavLink',\n      });\n    }\n  }\n\n  const isFirstRender = useFirstRender();\n\n  const { refs, context } = useFloating({\n    open: isActive,\n  });\n\n  useIsomorphicLayoutEffect(() => {\n    onLinkActiveChange?.({\n      level: currentLevel,\n      title,\n      isActive: Boolean(isActive),\n      isL2Trigger,\n      isFirstRender,\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isActive]);\n\n  return (\n    <NavLinkContext.Provider value={{ level: currentLevel, title }}>\n      {isL3Trigger ? (\n        <Collapsible\n          defaultIsExpanded={isActive}\n          _dangerouslyDisableValidations={true}\n          _shouldApplyWidthRestrictions={false}\n        >\n          <L3Trigger\n            title={title}\n            description={description}\n            icon={icon}\n            as={as}\n            href={href}\n            titleSuffix={titleSuffix}\n            onClick={onClick}\n          />\n          <CollapsibleBody width=\"100%\" _hasMargin={false}>\n            <Box position=\"relative\">{children}</Box>\n          </CollapsibleBody>\n        </Collapsible>\n      ) : (\n        <>\n          <StyledNavLinkContainer\n            $hasDescription={currentLevel !== 1 && Boolean(description)}\n            position=\"relative\"\n          >\n            <TooltipifyComponent tooltip={tooltip}>\n              <BaseBox\n                className={STYLED_NAV_LINK}\n                as={as ?? 'a'}\n                to={href}\n                href={as ? undefined : href}\n                target={target}\n                ref={refs.setReference}\n                onClick={(e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n                  // Close the mobile nav when item is clicked and its not trigger for next menu\n                  if (!isL2Trigger) {\n                    closeMobileNav?.();\n                  }\n\n                  if (isActive) {\n                    onLinkActiveChange?.({\n                      level: currentLevel,\n                      title,\n                      isActive: Boolean(isActive),\n                      isL2Trigger,\n                      isFirstRender: false,\n                    });\n                  }\n\n                  onClick?.(e);\n                }}\n                onFocus={(e: { target: HTMLDivElement }) => {\n                  // FloatinFocusManager by default focusses on last clicked element when you move to different tab and come back to the original tab\n                  // Which can make L1 to expand when tabs / windows are changed\n                  // Adding focus-visible check ensures this behaviour of closing menus is only applicable when there is visible focus ring on it (while tabbing)\n                  const hasFocusRing = e.target?.matches(':focus-visible');\n                  if (isL1Collapsed && currentLevel === 1 && hasFocusRing) {\n                    setIsL1Collapsed?.(false);\n                  }\n                }}\n                aria-current={isActive ? 'page' : undefined}\n                data-level={currentLevel}\n                data-l2trigger={isL2Trigger}\n                {...makeAnalyticsAttribute(rest)}\n              >\n                <NavLinkIconTitle\n                  icon={icon}\n                  title={title}\n                  description={description}\n                  isActive={isActive}\n                  isL1Item={currentLevel === 1}\n                  titleSuffix={titleSuffix}\n                />\n                {isL2Trigger ? (\n                  <BaseBox className={HIDE_WHEN_COLLAPSED} display=\"flex\" alignItems=\"center\">\n                    <ChevronRightIcon size=\"medium\" color=\"currentColor\" />\n                  </BaseBox>\n                ) : null}\n              </BaseBox>\n            </TooltipifyComponent>\n            {trailing && !isL2Trigger ? (\n              <BaseBox\n                position=\"absolute\"\n                top=\"spacing.0\"\n                right=\"spacing.2\"\n                height=\"100%\"\n                display=\"flex\"\n                alignItems=\"center\"\n                className={`${HIDE_WHEN_COLLAPSED} ${SHOW_ON_LINK_HOVER}`}\n              >\n                {trailing}\n              </BaseBox>\n            ) : null}\n            {currentLevel === 3 && isActive ? <CurvedVerticalLine /> : null}\n          </StyledNavLinkContainer>\n          {children ? (\n            <FloatingPortal root={l2PortalContainerRef}>\n              {isActive && isL1Collapsed ? (\n                <FloatingFocusManager modal={false} context={context} initialFocus={-1} returnFocus>\n                  <BaseBox ref={refs.setFloating} height=\"100%\">\n                    {children}\n                  </BaseBox>\n                </FloatingFocusManager>\n              ) : null}\n            </FloatingPortal>\n          ) : null}\n        </>\n      )}\n    </NavLinkContext.Provider>\n  );\n};\n\nexport { SideNavLink };\n"],"names":["SHOW_ON_LINK_HOVER","classes","HIDE_WHEN_COLLAPSED","STYLED_NAV_LINK","StyledNavLinkContainer","styled","BaseBox","withConfig","displayName","componentId","props","_defineProperty","width","concat","opacity","color","theme","colors","interactive","text","gray","normal","backgroundColor","background","position","display","flexDirection","alignItems","height","$hasDescription","undefined","makeSize","NAV_ITEM_HEIGHT","textDecoration","overflow","flexWrap","cursor","padding","makeSpace","spacing","margin","subtle","borderRadius","border","radius","medium","borderWidth","makeBorderSize","none","transparent","transition","getNavItemTransition","primary","faded","fadedHighlighted","_objectSpread","getFocusRingStyles","NavLinkIconTitle","_ref2","Icon","icon","title","description","titleSuffix","isActive","trailing","isL1Item","_jsxs","Box","textAlign","children","justifyContent","gap","_jsx","size","BaseText","truncateAfterLines","fontWeight","fontSize","lineHeight","as","className","Text","marginLeft","weight","L3Trigger","_ref3","href","target","tooltip","onClick","_useCollapsible","useCollapsible","onExpandChange","isExpanded","collapsibleBodyId","toggleCollapse","e","iconProps","TooltipifyComponent","Boolean","to","makeAccessible","expanded","controls","ChevronUpIcon","ChevronDownIcon","CurvedVerticalLine","_props$theme","thin","borderColor","surface","muted","borderStyle","top","left","SideNavLink","_ref4","rest","_objectWithoutProperties","_excluded","_useSideNav","useSideNav","l2PortalContainerRef","onLinkActiveChange","closeMobileNav","isL1Collapsed","setIsL1Collapsed","_useNavLink","useNavLink","_prevLevel","level","prevLevel","currentLevel","isL2Trigger","isL3Trigger","throwBladeError","message","moduleName","isFirstRender","useFirstRender","_useFloating","useFloating","open","refs","context","useIsomorphicLayoutEffect","NavLinkContext","Provider","value","Collapsible","defaultIsExpanded","_dangerouslyDisableValidations","_shouldApplyWidthRestrictions","CollapsibleBody","_hasMargin","_Fragment","ref","setReference","onFocus","_e$target","hasFocusRing","matches","makeAnalyticsAttribute","ChevronRightIcon","right","FloatingPortal","root","FloatingFocusManager","modal","initialFocus","returnFocus","setFloating"],"mappings":"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"}