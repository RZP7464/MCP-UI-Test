{"version":3,"file":"TablePagination.web.js","sources":["../../../../../../src/components/Table/TablePagination.web.tsx"],"sourcesContent":["import React, { useEffect, useMemo } from 'react';\nimport { useTableContext } from './TableContext';\nimport { ComponentIds } from './componentIds';\nimport { tablePagination } from './tokens';\nimport type { TablePaginationProps } from './types';\nimport isUndefined from '~utils/lodashButBetter/isUndefined';\nimport BaseBox from '~components/Box/BaseBox';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { throwBladeError } from '~utils/logger';\nimport { Pagination } from '~components/Pagination';\n\nconst _TablePagination = ({\n  currentPage: controlledCurrentPage,\n  onPageChange,\n  onPageSizeChange,\n  defaultPageSize = tablePagination.defaultPageSize,\n  showPageSizePicker = true,\n  showPageNumberSelector = false,\n  showLabel,\n  label,\n  totalItemCount,\n  paginationType = 'client',\n  ...rest\n}: TablePaginationProps): React.ReactElement => {\n  const {\n    setPaginationPage,\n    currentPaginationState,\n    totalItems,\n    setPaginationRowSize,\n    setPaginationType,\n    backgroundColor,\n  } = useTableContext();\n\n  // Sync pagination type with table context\n  useEffect(() => {\n    setPaginationType(paginationType);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [paginationType]);\n\n  // Calculate totalPages - use provided value, or calculate from totalItemCount\n  const totalPages = useMemo(() => {\n    if (\n      !isUndefined(totalItemCount) &&\n      currentPaginationState &&\n      !isUndefined(currentPaginationState.size)\n    ) {\n      return Math.ceil(totalItemCount / currentPaginationState.size);\n    }\n    if (\n      paginationType === 'client' &&\n      totalItems &&\n      currentPaginationState &&\n      !isUndefined(currentPaginationState.size)\n    ) {\n      return Math.ceil(totalItems / currentPaginationState.size);\n    }\n    return 1;\n  }, [totalItemCount, currentPaginationState, totalItems, paginationType]);\n\n  // Determine current page - use controlled value, fallback to table context, or default to 0 (0-indexed)\n  const currentPage = useMemo(() => {\n    if (!isUndefined(controlledCurrentPage)) {\n      return controlledCurrentPage;\n    }\n    if (!isUndefined(currentPaginationState?.page)) {\n      return currentPaginationState?.page;\n    }\n    return 0;\n  }, [controlledCurrentPage, currentPaginationState?.page]);\n\n  // Determine current page size - fallback to table context, or default\n  const currentPageSize = useMemo(() => {\n    if (!isUndefined(currentPaginationState?.size)) {\n      return currentPaginationState?.size;\n    }\n    return defaultPageSize;\n  }, [currentPaginationState?.size, defaultPageSize]);\n\n  // Generate default label for table context\n  const defaultLabel = useMemo(() => {\n    if (label) {\n      return label;\n    }\n    if (currentPaginationState && totalItemCount) {\n      const start = currentPaginationState.page * currentPaginationState.size + 1;\n      const end = Math.min(\n        (currentPaginationState.page + 1) * currentPaginationState.size,\n        totalItemCount,\n      );\n      return `Showing ${start}-${end} Items`;\n    }\n    if (currentPaginationState && totalItems) {\n      const start = currentPaginationState.page * currentPaginationState.size + 1;\n      const end = Math.min(\n        (currentPaginationState.page + 1) * currentPaginationState.size,\n        totalItems,\n      );\n      return `Showing ${start}-${end} Items`;\n    }\n    if (totalItemCount) {\n      return `Showing 1 to ${totalItemCount} Items`;\n    }\n    if (totalItems) {\n      return `Showing 1 to ${totalItems} Items`;\n    }\n    return 'Showing Items';\n  }, [label, currentPaginationState, totalItemCount, totalItems]);\n\n  // Sync page size with table context\n  useEffect(() => {\n    if (!isUndefined(currentPageSize)) {\n      setPaginationRowSize(currentPageSize);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentPageSize]);\n\n  // Sync page with table context\n  useEffect(() => {\n    if (!isUndefined(currentPage) && currentPaginationState?.page !== currentPage) {\n      setPaginationPage(currentPage);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentPage, currentPaginationState?.page]);\n\n  // Handle page change - update table context and call callback\n  // Pagination component uses 1-indexed pages, but Table uses 0-indexed\n  const handlePageChange = ({ page }: { page: number }): void => {\n    // Convert from 1-indexed (Pagination) to 0-indexed (Table)\n    const zeroIndexedPage = page - 1;\n    onPageChange?.({ page: zeroIndexedPage });\n    setPaginationPage(zeroIndexedPage);\n  };\n\n  // Handle page size change - update table context and call callback\n  const handlePageSizeChange = ({ pageSize }: { pageSize: number }): void => {\n    onPageSizeChange?.({ pageSize });\n    setPaginationRowSize(pageSize);\n  };\n\n  // Validation for server-side pagination\n  if (__DEV__) {\n    if (paginationType === 'server' && (isUndefined(totalItemCount) || isUndefined(onPageChange))) {\n      throwBladeError({\n        message:\n          '`onPageChange` and `totalItemCount` props are required when paginationType is server.',\n        moduleName: 'TablePagination',\n      });\n    }\n  }\n\n  return (\n    <BaseBox backgroundColor={backgroundColor}>\n      <Pagination\n        totalPages={totalPages}\n        selectedPage={currentPage !== undefined ? currentPage + 1 : undefined}\n        defaultSelectedPage={1}\n        onSelectedPageChange={handlePageChange}\n        defaultPageSize={defaultPageSize}\n        pageSize={currentPageSize as 10 | 25 | 50}\n        onPageSizeChange={handlePageSizeChange}\n        showPageSizePicker={showPageSizePicker}\n        showPageNumberSelector={showPageNumberSelector}\n        showLabel={showLabel}\n        label={defaultLabel}\n        pageSizeLabel=\"rows / page\"\n        {...rest}\n      />\n    </BaseBox>\n  );\n};\n\nconst TablePagination = assignWithoutSideEffects(_TablePagination, {\n  componentId: ComponentIds.TablePagination,\n});\n\nexport { TablePagination };\n"],"names":["_TablePagination","_ref","controlledCurrentPage","currentPage","onPageChange","onPageSizeChange","_ref$defaultPageSize","defaultPageSize","tablePagination","_ref$showPageSizePick","showPageSizePicker","_ref$showPageNumberSe","showPageNumberSelector","showLabel","label","totalItemCount","_ref$paginationType","paginationType","rest","_objectWithoutProperties","_excluded","_useTableContext","useTableContext","setPaginationPage","currentPaginationState","totalItems","setPaginationRowSize","setPaginationType","backgroundColor","useEffect","totalPages","useMemo","isUndefined","size","Math","ceil","page","currentPageSize","defaultLabel","start","end","min","concat","handlePageChange","_ref2","zeroIndexedPage","handlePageSizeChange","_ref3","pageSize","throwBladeError","message","moduleName","_jsx","BaseBox","children","Pagination","_objectSpread","selectedPage","undefined","defaultSelectedPage","onSelectedPageChange","pageSizeLabel","TablePagination","assignWithoutSideEffects","componentId","ComponentIds"],"mappings":"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"}