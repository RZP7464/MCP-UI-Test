{"version":3,"file":"useToast.js","sources":["../../../../../../src/components/Toast/useToast.tsx"],"sourcesContent":["import type { Toast } from 'react-hot-toast';\nimport toast, { useToasterStore } from 'react-hot-toast';\nimport type { ToastProps } from './types';\nimport { Toast as ToastComponent } from './Toast';\nimport { logger } from '~utils/logger';\n\ntype BladeToast = Omit<Toast, 'type'> & ToastProps;\ntype UseToastReturn = {\n  toasts: BladeToast[];\n  show: (props: ToastProps) => string;\n  dismiss: (id?: string) => void;\n};\n\nconst useToast = (): UseToastReturn => {\n  const { toasts } = useToasterStore();\n  const show = (props: ToastProps): string => {\n    props.type = props.type ?? 'informational';\n\n    // Do not show promotional toasts if there is already one\n    if (\n      toasts.find((t) => {\n        // @ts-expect-error - react-hot-toast doesn't recognize our promotional type\n        return t.type === 'promotional';\n      }) &&\n      props.type === 'promotional'\n    ) {\n      if (__DEV__) {\n        logger({\n          message: 'There can only be one promotional toast at a time',\n          type: 'warn',\n          moduleName: 'Toast',\n        });\n      }\n      return '';\n    }\n\n    const isPromoToast = props.type === 'promotional';\n    if (props.autoDismiss === undefined) {\n      // Promotional toasts should not auto dismiss\n      props.autoDismiss = !isPromoToast;\n    }\n\n    if (props.duration === undefined) {\n      // Set default durations\n      if (isPromoToast) {\n        props.duration = 8000;\n      } else {\n        props.duration = 4000;\n      }\n    }\n\n    // If autoDismiss is false, set duration to infinity\n    if (!props.autoDismiss) {\n      props.duration = Infinity;\n    }\n\n    return toast.custom(({ visible, id }) => {\n      return <ToastComponent {...props} id={id} isVisible={visible} />;\n    }, props);\n  };\n\n  return {\n    toasts: (toasts as unknown) as BladeToast[],\n    show,\n    dismiss: toast.dismiss,\n  };\n};\n\nexport type { UseToastReturn };\nexport { useToast };\n"],"names":["useToast","_useToasterStore","useToasterStore","toasts","show","props","_props$type","type","find","t","logger","message","moduleName","isPromoToast","autoDismiss","undefined","duration","Infinity","toast","custom","_ref","visible","id","_jsx","ToastComponent","_objectSpread","isVisible","dismiss"],"mappings":";;;;;;;;;AAaA,IAAMA,QAAQ,GAAG,SAAXA,QAAQA,GAAyB;AACrC,EAAA,IAAAC,gBAAA,GAAmBC,eAAe,EAAE;IAA5BC,MAAM,GAAAF,gBAAA,CAANE,MAAM,CAAA;AACd,EAAA,IAAMC,IAAI,GAAG,SAAPA,IAAIA,CAAIC,KAAiB,EAAa;AAAA,IAAA,IAAAC,WAAA,CAAA;AAC1CD,IAAAA,KAAK,CAACE,IAAI,GAAAD,CAAAA,WAAA,GAAGD,KAAK,CAACE,IAAI,MAAAD,IAAAA,IAAAA,WAAA,KAAAA,KAAAA,CAAAA,GAAAA,WAAA,GAAI,eAAe,CAAA;;AAE1C;AACA,IAAA,IACEH,MAAM,CAACK,IAAI,CAAC,UAACC,CAAC,EAAK;AACjB;AACA,MAAA,OAAOA,CAAC,CAACF,IAAI,KAAK,aAAa,CAAA;AACjC,KAAC,CAAC,IACFF,KAAK,CAACE,IAAI,KAAK,aAAa,EAC5B;AACA,MAAA,IAAI,IAAO,EAAE;AACXG,QAAAA,MAAM,CAAC;AACLC,UAAAA,OAAO,EAAE,mDAAmD;AAC5DJ,UAAAA,IAAI,EAAE,MAAM;AACZK,UAAAA,UAAU,EAAE,OAAA;AACd,SAAC,CAAC,CAAA;AACJ,OAAA;AACA,MAAA,OAAO,EAAE,CAAA;AACX,KAAA;AAEA,IAAA,IAAMC,YAAY,GAAGR,KAAK,CAACE,IAAI,KAAK,aAAa,CAAA;AACjD,IAAA,IAAIF,KAAK,CAACS,WAAW,KAAKC,SAAS,EAAE;AACnC;AACAV,MAAAA,KAAK,CAACS,WAAW,GAAG,CAACD,YAAY,CAAA;AACnC,KAAA;AAEA,IAAA,IAAIR,KAAK,CAACW,QAAQ,KAAKD,SAAS,EAAE;AAChC;AACA,MAAA,IAAIF,YAAY,EAAE;QAChBR,KAAK,CAACW,QAAQ,GAAG,IAAI,CAAA;AACvB,OAAC,MAAM;QACLX,KAAK,CAACW,QAAQ,GAAG,IAAI,CAAA;AACvB,OAAA;AACF,KAAA;;AAEA;AACA,IAAA,IAAI,CAACX,KAAK,CAACS,WAAW,EAAE;MACtBT,KAAK,CAACW,QAAQ,GAAGC,QAAQ,CAAA;AAC3B,KAAA;AAEA,IAAA,OAAOC,KAAK,CAACC,MAAM,CAAC,UAAAC,IAAA,EAAqB;AAAA,MAAA,IAAlBC,OAAO,GAAAD,IAAA,CAAPC,OAAO;QAAEC,EAAE,GAAAF,IAAA,CAAFE,EAAE,CAAA;MAChC,oBAAOC,GAAA,CAACC,KAAc,EAAAC,aAAA,CAAAA,aAAA,KAAKpB,KAAK,CAAA,EAAA,EAAA,EAAA;AAAEiB,QAAAA,EAAE,EAAEA,EAAG;AAACI,QAAAA,SAAS,EAAEL,OAAAA;AAAQ,OAAA,CAAE,CAAC,CAAA;KACjE,EAAEhB,KAAK,CAAC,CAAA;GACV,CAAA;EAED,OAAO;AACLF,IAAAA,MAAM,EAAGA,MAAkC;AAC3CC,IAAAA,IAAI,EAAJA,IAAI;IACJuB,OAAO,EAAET,KAAK,CAACS,OAAAA;GAChB,CAAA;AACH;;;;"}