{"version":3,"file":"utils.js","sources":["../../../../../../src/components/Tabs/utils.ts"],"sourcesContent":["import React from 'react';\nimport type { TabsProps } from './types';\nimport { getComponentId } from '~utils/isValidAllowedChildren';\nimport { logger, throwBladeError } from '~utils/logger';\nimport { useIsomorphicLayoutEffect } from '~utils/useIsomorphicLayoutEffect';\n\nconst iconSizeMap = {\n  small: 'medium',\n  medium: 'medium',\n  large: 'large',\n} as const;\n\nconst badgeSizeMap = {\n  small: 'small',\n  medium: 'small',\n  large: 'medium',\n} as const;\n\nconst counterSizeMap = {\n  small: 'small',\n  medium: 'small',\n  large: 'small',\n} as const;\n\nconst propRestrictionMap = {\n  Badge: {\n    small: {\n      size: badgeSizeMap.small,\n    },\n    medium: {\n      size: badgeSizeMap.medium,\n    },\n    large: {\n      size: badgeSizeMap.large,\n    },\n  },\n  Counter: {\n    small: {\n      size: counterSizeMap.small,\n    },\n    medium: {\n      size: counterSizeMap.medium,\n    },\n    large: {\n      size: counterSizeMap.large,\n    },\n  },\n} as const;\n\ntype TrailingComponents = keyof typeof propRestrictionMap;\n\nconst useTabsItemPropRestriction = (\n  trailing: React.ReactNode,\n  tabItemSize: NonNullable<TabsProps['size']>,\n): React.ReactNode => {\n  const [\n    validatedTrailingComponent,\n    setValidatedTrailingComponent,\n  ] = React.useState<React.ReactElement | null>(null);\n\n  // validate and restrict sub component props in trailing prop\n  useIsomorphicLayoutEffect(() => {\n    if (React.isValidElement(trailing)) {\n      const trailingComponentType = getComponentId(trailing) as TrailingComponents;\n      const restrictedProps = propRestrictionMap[trailingComponentType]?.[tabItemSize];\n      if (__DEV__) {\n        if (!restrictedProps) {\n          throwBladeError({\n            message: `Only Badge or Counter component is accepted as trailing`,\n            moduleName: 'TabsItem',\n          });\n        }\n\n        const restrictedPropKeys = Object.keys(restrictedProps);\n        for (const prop of restrictedPropKeys) {\n          if (trailing?.props?.hasOwnProperty(prop)) {\n            logger({\n              message: `Do not pass \"${prop}\" to \"${trailingComponentType}\" while inside TabsItem trailing, because we override it.`,\n              moduleName: 'TabsItem',\n              type: 'warn',\n            });\n          }\n        }\n      }\n      setValidatedTrailingComponent(\n        React.cloneElement(trailing as React.ReactElement, restrictedProps),\n      );\n    }\n  }, [tabItemSize, trailing]);\n\n  return validatedTrailingComponent;\n};\n\nconst componentIds = {\n  TabList: 'TabList',\n  TabPanel: 'TabPanel',\n} as const;\n\nexport { useTabsItemPropRestriction, iconSizeMap, componentIds };\n"],"names":["iconSizeMap","small","medium","large","badgeSizeMap","counterSizeMap","propRestrictionMap","Badge","size","Counter","useTabsItemPropRestriction","trailing","tabItemSize","_React$useState","React","useState","_React$useState2","_slicedToArray","validatedTrailingComponent","setValidatedTrailingComponent","useIsomorphicLayoutEffect","isValidElement","_propRestrictionMap$t","trailingComponentType","getComponentId","restrictedProps","throwBladeError","message","moduleName","restrictedPropKeys","Object","keys","_i","_restrictedPropKeys","length","_trailing$props","prop","props","hasOwnProperty","logger","concat","type","cloneElement","componentIds","TabList","TabPanel"],"mappings":"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"}