{"version":3,"file":"PasswordInput.js","sources":["../../../../../../../src/components/Input/PasswordInput/PasswordInput.tsx"],"sourcesContent":["import React from 'react';\nimport type { BaseInputProps } from '../BaseInput';\nimport { BaseInput } from '../BaseInput';\nimport { EyeIcon, EyeOffIcon } from '~components/Icons';\nimport BaseBox from '~components/Box/BaseBox';\nimport { CharacterCounter } from '~components/Form/CharacterCounter';\nimport { IconButton } from '~components/Button/IconButton';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { MetaConstants } from '~utils/metaAttribute';\nimport type { DataAnalyticsAttribute, BladeElementRef } from '~utils/types';\n\ntype PasswordInputExtraProps = {\n  /**\n   * Shows a reveal button to toggle password visibility\n   *\n   * @default true\n   */\n  showRevealButton?: boolean;\n\n  /**\n   * Displays asterisk (`*`) when `isRequired` is enabled\n   *\n   * @default none\n   */\n  necessityIndicator?: Exclude<BaseInputProps['necessityIndicator'], 'optional'>;\n\n  /**\n   * Determines what autoComplete suggestion type to show. Defaults to using platform heuristics.\n   *\n   * It's not recommended to turn this off in favor of safe password practices.\n   * Providing `password` or `newPassword` is more informative to the platform for browser autofill or password managers.\n   *\n   * **Note**: Using `newPassword` on iOS has some [known issue](https://github.com/facebook/react-native/issues/21911) on React Native\n   *\n   * Internally it'll render platform specific attributes:\n   *\n   * - web: `autocomplete`\n   * - iOS: `textContentType`\n   * - android: `autoComplete`\n   *\n   */\n  autoCompleteSuggestionType?: Extract<\n    BaseInputProps['autoCompleteSuggestionType'],\n    'none' | 'password' | 'newPassword'\n  >;\n};\n\ntype PasswordInputCommonProps = Pick<\n  BaseInputProps,\n  | 'label'\n  | 'accessibilityLabel'\n  | 'labelPosition'\n  | 'labelSuffix'\n  | 'labelTrailing'\n  | 'maxCharacters'\n  | 'validationState'\n  | 'errorText'\n  | 'successText'\n  | 'helpText'\n  | 'isDisabled'\n  | 'defaultValue'\n  | 'placeholder'\n  | 'isRequired'\n  | 'value'\n  | 'onChange'\n  | 'onBlur'\n  | 'onSubmit'\n  | 'onFocus'\n  | 'name'\n  | 'autoFocus'\n  | 'keyboardReturnKeyType'\n  | 'autoCompleteSuggestionType'\n  | 'testID'\n  | 'size'\n  | keyof DataAnalyticsAttribute\n> &\n  PasswordInputExtraProps &\n  StyledPropsBlade;\n\n/*\n  Mandatory accessibilityLabel prop when label is not provided\n*/\ntype PasswordInputPropsWithA11yLabel = {\n  /**\n   * Label to be shown for the input field\n   */\n  label?: undefined;\n  /**\n   * Accessibility label for the input\n   */\n  accessibilityLabel: string;\n};\n\n/*\n  Optional accessibilityLabel prop when label is provided\n*/\ntype PasswordInputPropsWithLabel = {\n  /**\n   * Label to be shown for the input field\n   */\n  label: string;\n  /**\n   * Accessibility label for the input\n   */\n  accessibilityLabel?: string;\n};\n\ntype PasswordInputProps = (PasswordInputPropsWithA11yLabel | PasswordInputPropsWithLabel) &\n  PasswordInputCommonProps;\n\nconst _PasswordInput: React.ForwardRefRenderFunction<BladeElementRef, PasswordInputProps> = (\n  {\n    label,\n    accessibilityLabel,\n    labelPosition = 'top',\n    showRevealButton = true,\n    maxCharacters,\n    validationState,\n    errorText,\n    successText,\n    helpText,\n    isDisabled = false,\n    defaultValue,\n    placeholder,\n    isRequired = false,\n    necessityIndicator = 'none',\n    value,\n    onChange,\n    onFocus,\n    onBlur,\n    onSubmit,\n    name,\n    autoFocus = false,\n    keyboardReturnKeyType = 'done',\n    autoCompleteSuggestionType,\n    testID,\n    size = 'medium',\n    labelSuffix,\n    labelTrailing,\n    ...rest\n  },\n  ref,\n) => {\n  const [isRevealed, setIsRevealed] = React.useState(false);\n  const isEnabled = !isDisabled;\n\n  // If input is disabled reveal button shouldn't be present and input should be masked\n  const isRevealedAndEnabled = isRevealed && isEnabled;\n\n  const toggleIsRevealed = (): void => setIsRevealed((revealed) => !revealed);\n  const iconAccessibilityLabel = isRevealedAndEnabled ? 'Hide password' : 'Show password';\n  const type = isRevealedAndEnabled ? 'text' : 'password';\n\n  const revealButtonIcon = isRevealedAndEnabled ? EyeOffIcon : EyeIcon;\n  const revealButton =\n    showRevealButton && !isDisabled ? (\n      <IconButton\n        size=\"medium\"\n        icon={revealButtonIcon}\n        onClick={toggleIsRevealed}\n        accessibilityLabel={iconAccessibilityLabel}\n      />\n    ) : null;\n\n  const trailingFooterSlot = (value?: string): React.ReactNode =>\n    maxCharacters ? (\n      <BaseBox marginTop=\"spacing.2\" marginRight=\"spacing.1\">\n        <CharacterCounter currentCount={value?.length ?? 0} maxCount={maxCharacters} />\n      </BaseBox>\n    ) : null;\n\n  return (\n    <BaseInput\n      ref={ref}\n      componentName={MetaConstants.PasswordInput}\n      id=\"password-field\"\n      label={label as string}\n      accessibilityLabel={accessibilityLabel}\n      hideLabelText={!Boolean(label)}\n      labelPosition={labelPosition}\n      type={type}\n      labelSuffix={labelSuffix}\n      labelTrailing={labelTrailing}\n      trailingInteractionElement={revealButton}\n      trailingFooterSlot={trailingFooterSlot}\n      maxCharacters={maxCharacters}\n      validationState={validationState}\n      errorText={errorText}\n      successText={successText}\n      helpText={helpText}\n      isDisabled={isDisabled}\n      defaultValue={defaultValue}\n      placeholder={placeholder}\n      isRequired={isRequired}\n      necessityIndicator={necessityIndicator}\n      value={value}\n      onChange={onChange}\n      onBlur={onBlur}\n      onSubmit={onSubmit}\n      onFocus={onFocus}\n      name={name}\n      // eslint-disable-next-line jsx-a11y/no-autofocus\n      autoFocus={autoFocus}\n      autoCompleteSuggestionType={autoCompleteSuggestionType}\n      keyboardReturnKeyType={keyboardReturnKeyType}\n      autoCapitalize=\"none\"\n      testID={testID}\n      size={size}\n      {...rest}\n    />\n  );\n};\n\n// nosemgrep\nconst PasswordInput = assignWithoutSideEffects(React.forwardRef(_PasswordInput), {\n  displayName: 'PasswordInput',\n});\n\nexport type { PasswordInputProps };\nexport { PasswordInput };\n"],"names":["_PasswordInput","_ref","ref","label","accessibilityLabel","_ref$labelPosition","labelPosition","_ref$showRevealButton","showRevealButton","maxCharacters","validationState","errorText","successText","helpText","_ref$isDisabled","isDisabled","defaultValue","placeholder","_ref$isRequired","isRequired","_ref$necessityIndicat","necessityIndicator","value","onChange","onFocus","onBlur","onSubmit","name","_ref$autoFocus","autoFocus","_ref$keyboardReturnKe","keyboardReturnKeyType","autoCompleteSuggestionType","testID","_ref$size","size","labelSuffix","labelTrailing","rest","_objectWithoutProperties","_excluded","_React$useState","React","useState","_React$useState2","_slicedToArray","isRevealed","setIsRevealed","isEnabled","isRevealedAndEnabled","toggleIsRevealed","revealed","iconAccessibilityLabel","type","revealButtonIcon","EyeOffIcon","EyeIcon","revealButton","_jsx","IconButton","icon","onClick","trailingFooterSlot","_value$length","BaseBox","marginTop","marginRight","children","CharacterCounter","currentCount","length","maxCount","BaseInput","_objectSpread","componentName","MetaConstants","PasswordInput","id","hideLabelText","Boolean","trailingInteractionElement","autoCapitalize","assignWithoutSideEffects","forwardRef","displayName"],"mappings":"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"}