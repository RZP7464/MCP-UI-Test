{"version":3,"file":"InputDropdownButton.web.js","sources":["../../../../../../src/components/Dropdown/InputDropdownButton.web.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-unnecessary-type-assertion */\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport { useDropdown } from './useDropdown';\nimport { dropdownComponentIds } from './dropdownComponentIds';\nimport type { BaseButtonProps } from '~components/Button/BaseButton/BaseButton';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { makeSpace } from '~utils';\nimport { ChevronUpDownIcon } from '~components/Icons';\nimport { Box } from '~components/Box';\nimport { getFocusRingStyles } from '~utils/getFocusRingStyles';\nimport { Text } from '~components/Typography';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { getActionListContainerRole } from '~components/ActionList/getA11yRoles';\nimport { useId } from '~utils/useId';\nimport type { DataAnalyticsAttribute } from '~utils/types';\nimport type { IconComponent } from '~components/Icons';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\nimport { metaAttribute } from '~utils/metaAttribute';\nimport { useControlledDropdownInput } from '~utils/useControlledDropdownInput';\n\ntype BaseInputDropDownButtonProps = {\n  /**\n   * isOpen is used to control the open state of the dropdown\n   */\n  isOpen?: boolean;\n  /**\n   * onBlur is the callback function that is called when the dropdown is blurred\n   */\n  onBlur?: BaseButtonProps['onBlur'];\n  /**\n   * onKeyDown is the callback function that is called when the dropdown is keyed down\n   */\n  onKeyDown?: BaseButtonProps['onKeyDown'];\n  /**\n   * onClick is the callback function that is called when the dropdown is clicked\n   */\n  onClick?: BaseButtonProps['onClick'];\n  /**\n   * accessibilityLabel is the label of the dropdown\n   */\n  accessibilityLabel?: string;\n  /**\n   * @private\n   */\n  _isInsideSearchInput?: boolean;\n  /**\n   * isDisabled is the disabled state of the dropdown\n   */\n  isDisabled?: boolean;\n  /**\n   * onChange is the callback function that is called when the dropdown is changed\n   */\n  onChange?: (props: { name: string; value: string }) => void;\n  /**\n   * name is the name of the dropdown\n   */\n  name?: string;\n  /**\n   * testID is the testID of the dropdown\n   */\n  testID?: string;\n  /**\n   * icon is the icon of the dropdown\n   */\n  icon?: IconComponent;\n} & DataAnalyticsAttribute;\n\ntype ControlledInputDropDownButtonProps = BaseInputDropDownButtonProps & {\n  /**\n   * value is the value of the dropdown\n   */\n  value: string;\n  defaultValue?: never;\n};\n\ntype UncontrolledInputDropDownButtonProps = BaseInputDropDownButtonProps & {\n  value?: never;\n  /**\n   * defaultValue is the default selected value of the dropdown\n   */\n  defaultValue: string;\n};\n\ntype InputDropDownButtonProps =\n  | ControlledInputDropDownButtonProps\n  | UncontrolledInputDropDownButtonProps;\n\nconst StyledSearchTrailingDropdown = styled.button<{ $isSelected?: boolean; isDisabled?: boolean }>(\n  ({ theme, isDisabled }) => {\n    const { spacing } = theme;\n    return {\n      backgroundColor: theme.colors.transparent,\n      gap: makeSpace(spacing[2]),\n      display: 'flex',\n      height: '100%',\n      alignItems: 'center',\n      border: 'none',\n      cursor: isDisabled ? 'not-allowed' : 'pointer',\n      '&[disabled]': {\n        cursor: 'not-allowed',\n        pointerEvents: 'none',\n      },\n      '&:focus': {\n        ...getFocusRingStyles({ theme }),\n        backgroundColor: theme.colors.interactive.background.gray.faded,\n      },\n      '&:hover': {\n        backgroundColor: theme.colors.interactive.background.gray.faded,\n      },\n      '&:focus-visible': {\n        outlineOffset: makeSpace(theme.spacing[0]),\n      },\n      borderRadius: theme.border.radius.small,\n    };\n  },\n);\n\nconst _InputDropdownButton = ({\n  onClick,\n  onBlur,\n  onKeyDown,\n  accessibilityLabel,\n  _isInsideSearchInput = false,\n  isDisabled,\n  onChange,\n  name,\n  testID,\n  value,\n  defaultValue,\n  icon: Icon,\n  ...rest\n}: InputDropDownButtonProps): React.ReactElement | null => {\n  const idBase = useId('input-drop-down-button');\n  const {\n    onTriggerClick,\n    onTriggerKeydown,\n    dropdownBaseId,\n    isOpen,\n    activeIndex,\n    hasFooterAction,\n    triggererRef,\n    displayValue,\n  } = useDropdown();\n\n  useControlledDropdownInput({\n    onChange: ({ name, values }) => {\n      onChange?.({\n        name: name || idBase,\n        value: values[0],\n      });\n    },\n    name,\n    value,\n    defaultValue,\n    triggererRef,\n    isSelectInput: false,\n  });\n\n  if (!displayValue) {\n    return null;\n  }\n\n  return (\n    <StyledSearchTrailingDropdown\n      type=\"button\"\n      onClick={(e) => {\n        if (isDisabled) return;\n        onTriggerClick();\n        // Setting it for web fails it on native typecheck and vice versa\n        onClick?.(e as any);\n        // Since this dropdown is inside another dropdown we should stop event stopPropagation.\n        e?.stopPropagation();\n      }}\n      onBlur={(e) => {\n        if (isDisabled) return;\n        // With button trigger, there is no \"value\" as such. It's just clickable items\n        // Setting it for web fails it on native typecheck and vice versa\n        onBlur?.(e as any);\n        e?.stopPropagation();\n      }}\n      onKeyDown={(e) => {\n        if (isDisabled) return;\n        onTriggerKeydown?.({ event: e as any });\n        // Setting it for web fails it on native typecheck and vice versa\n        onKeyDown?.(e as any);\n        e?.stopPropagation();\n      }}\n      {...makeAccessible({\n        label: accessibilityLabel ?? `change ${displayValue} filter`,\n        hasPopup: getActionListContainerRole(hasFooterAction, 'InputDropdownButton'),\n        expanded: isOpen,\n        controls: `${dropdownBaseId}-actionlist`,\n        activeDescendant: activeIndex >= 0 ? `${dropdownBaseId}-${activeIndex}` : undefined,\n      })}\n      ref={triggererRef}\n      isDisabled={isDisabled}\n      {...makeAnalyticsAttribute(rest)}\n      {...metaAttribute({ name: 'InputDropdownButton', testID })}\n    >\n      <Box padding=\"spacing.2\" display=\"flex\" gap=\"spacing.2\" alignItems=\"center\">\n        {_isInsideSearchInput && (\n          <Text\n            variant=\"body\"\n            size=\"medium\"\n            weight=\"regular\"\n            color={isDisabled ? 'surface.text.gray.disabled' : 'surface.text.gray.muted'}\n          >\n            {' '}\n            in\n          </Text>\n        )}\n        {Icon && (\n          <Icon\n            size=\"medium\"\n            color={isDisabled ? 'surface.icon.gray.disabled' : 'surface.icon.gray.muted'}\n          />\n        )}\n\n        <Text\n          variant=\"body\"\n          size=\"medium\"\n          weight=\"regular\"\n          color={isDisabled ? 'surface.text.gray.disabled' : 'surface.text.gray.subtle'}\n        >\n          {displayValue}\n        </Text>\n        <ChevronUpDownIcon\n          color={isDisabled ? 'surface.icon.gray.disabled' : 'surface.icon.gray.muted'}\n        />\n      </Box>\n    </StyledSearchTrailingDropdown>\n  );\n};\n\nconst InputDropdownButton = assignWithoutSideEffects(_InputDropdownButton, {\n  componentId: dropdownComponentIds.triggers.InputDropdownButton,\n  displayName: 'InputDropDown',\n});\n\nexport { InputDropdownButton };\n"],"names":["StyledSearchTrailingDropdown","styled","button","withConfig","displayName","componentId","_ref","theme","isDisabled","spacing","backgroundColor","colors","transparent","gap","makeSpace","display","height","alignItems","border","cursor","pointerEvents","_objectSpread","getFocusRingStyles","interactive","background","gray","faded","outlineOffset","borderRadius","radius","small","_InputDropdownButton","_ref2","onClick","onBlur","onKeyDown","accessibilityLabel","_ref2$_isInsideSearch","_isInsideSearchInput","onChange","name","testID","value","defaultValue","Icon","icon","rest","_objectWithoutProperties","_excluded","idBase","useId","_useDropdown","useDropdown","onTriggerClick","onTriggerKeydown","dropdownBaseId","isOpen","activeIndex","hasFooterAction","triggererRef","displayValue","useControlledDropdownInput","_ref3","values","isSelectInput","_jsx","type","e","stopPropagation","event","makeAccessible","label","concat","hasPopup","getActionListContainerRole","expanded","controls","activeDescendant","undefined","ref","makeAnalyticsAttribute","metaAttribute","children","_jsxs","Box","padding","Text","variant","size","weight","color","ChevronUpDownIcon","InputDropdownButton","assignWithoutSideEffects","dropdownComponentIds","triggers"],"mappings":"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"}