{"version":3,"file":"TableBody.web.js","sources":["../../../../../../src/components/Table/TableBody.web.tsx"],"sourcesContent":["import React, { useEffect, useMemo } from 'react';\nimport { Body, Row, Cell } from '@table-library/react-table-library/table';\nimport { Virtualized } from '@table-library/react-table-library/virtualized';\nimport styled from 'styled-components';\nimport { useTableContext } from './TableContext';\nimport { checkboxCellWidth, classes, tableRow } from './tokens';\nimport { ComponentIds } from './componentIds';\nimport type {\n  TableProps,\n  TableBodyProps,\n  TableRowProps,\n  TableCellProps,\n  TableBackgroundColors,\n  VirtualizedWrapperProps,\n  RowHeightType,\n  TableNode,\n} from './types';\nimport { getTableActionsHoverStyles, getTableRowBackgroundTransition } from './utils';\nimport { getTableBodyStyles } from './commonStyles';\nimport getIn from '~utils/lodashButBetter/get';\nimport { Text } from '~components/Typography';\nimport type { CheckboxProps } from '~components/Checkbox';\nimport { Checkbox } from '~components/Checkbox';\nimport { getMediaQuery, makeMotionTime, makeSize, makeSpace } from '~utils';\nimport BaseBox from '~components/Box/BaseBox';\nimport { MetaConstants, metaAttribute } from '~utils/metaAttribute';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { getFocusRingStyles } from '~utils/getFocusRingStyles';\nimport { size } from '~tokens/global';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { useIsomorphicLayoutEffect } from '~utils/useIsomorphicLayoutEffect';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\nconst StyledBody = styled(Body)<{\n  $isSelectable: boolean;\n  $showStripedRows: boolean;\n}>(({ theme, $showStripedRows, $isSelectable }) => {\n  const rowBackgroundTransition = getTableRowBackgroundTransition(theme);\n\n  return {\n    '&&&': {\n      border: 'none',\n      transition: rowBackgroundTransition,\n\n      '& tr:last-child .cell-wrapper': {\n        borderBottom: 'none',\n      },\n\n      ...{\n        ...getTableBodyStyles({\n          addCommonStyles: true,\n          theme,\n          isSelectable: $isSelectable,\n          showStripedRows: $showStripedRows,\n          isVirtualized: false,\n        }),\n      },\n    },\n  };\n});\n\nconst _TableBody = <Item,>({ children, ...rest }: TableBodyProps<Item>): React.ReactElement => {\n  const { showStripedRows, selectionType } = useTableContext();\n  const isSelectable = selectionType !== 'none';\n\n  return (\n    <StyledBody\n      $isSelectable={isSelectable}\n      $showStripedRows={showStripedRows}\n      $showBorderedCells={true}\n      {...metaAttribute({ name: MetaConstants.TableBody })}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      {children}\n    </StyledBody>\n  );\n};\n\nconst TableBody = assignWithoutSideEffects(_TableBody, {\n  componentId: ComponentIds.TableBody,\n});\n\nexport const StyledCell = styled(Cell)<{\n  $backgroundColor: TableBackgroundColors;\n  gridRow?: string;\n}>(({ theme, $backgroundColor, gridRow }) => ({\n  '&&&': {\n    height: '100%',\n    backgroundColor: getIn(theme.colors, $backgroundColor),\n    gridRow,\n    '& > div:first-child': {\n      alignSelf: 'stretch',\n    },\n    '&:focus-visible': { ...getFocusRingStyles({ theme, negativeOffset: true }) },\n  },\n}));\n\nexport const CellWrapper = styled(BaseBox)<{\n  $rowDensity: NonNullable<TableProps<unknown>['rowDensity']>;\n  showStripedRows?: boolean;\n  hasPadding?: boolean;\n  textAlign?: TableCellProps['textAlign'];\n}>(({ theme, $rowDensity, showStripedRows, hasPadding = true, textAlign }) => {\n  const rowBackgroundTransition = `background-color ${makeMotionTime(\n    getIn(theme.motion, tableRow.backgroundColorMotionDuration),\n  )} ${getIn(theme.motion, tableRow.backgroundColorMotionEasing)}`;\n\n  return {\n    '&&&': {\n      transition: rowBackgroundTransition,\n      backgroundColor: tableRow.nonStripeWrapper.backgroundColor,\n      paddingLeft: hasPadding ? makeSpace(getIn(theme, tableRow.paddingLeft[$rowDensity])) : '0px',\n      paddingRight: hasPadding\n        ? makeSpace(getIn(theme, tableRow.paddingRight[$rowDensity]))\n        : '0px',\n      minHeight: makeSize(getIn(size, tableRow.minHeight[$rowDensity])),\n      height: '100%',\n      width: '100%',\n      justifyContent: textAlign,\n      ...(!showStripedRows && {\n        borderBottomWidth: makeSpace(getIn(theme.border.width, tableRow.borderBottomWidth)),\n        borderBottomColor: getIn(theme.colors, tableRow.borderColor),\n        borderBottomStyle: 'solid',\n      }),\n    },\n  };\n});\n\nconst _TableCell = ({\n  children,\n  textAlign,\n  _hasPadding,\n  gridColumnStart,\n  gridColumnEnd,\n  gridRowStart,\n  gridRowEnd,\n  ...rest\n}: TableCellProps): React.ReactElement => {\n  const isChildrenString = typeof children === 'string';\n  const { selectionType, rowDensity, showStripedRows, backgroundColor } = useTableContext();\n  const isSelectable = selectionType !== 'none';\n\n  const hasRowSpan = Boolean(gridRowStart && gridRowEnd);\n  const gridRowValue = hasRowSpan ? `${gridRowStart} / ${gridRowEnd}` : undefined;\n\n  return (\n    <StyledCell\n      tabIndex={0}\n      role=\"cell\"\n      className={hasRowSpan ? classes.HAS_ROW_SPANNING : ''}\n      $backgroundColor={backgroundColor}\n      gridColumnStart={gridColumnStart}\n      gridColumnEnd={gridColumnEnd}\n      gridRow={gridRowValue}\n      {...metaAttribute({ name: MetaConstants.TableCell })}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      <BaseBox className=\"cell-wrapper-base\" display=\"flex\" alignItems=\"center\" height=\"100%\">\n        <CellWrapper\n          className=\"cell-wrapper\"\n          $rowDensity={rowDensity}\n          showStripedRows={showStripedRows}\n          display=\"flex\"\n          alignItems=\"center\"\n          hasPadding={_hasPadding}\n          flex={1}\n          textAlign={textAlign}\n          // when a direct string child is passed we want to disable pointer events\n          // for custom cells components, consumers can handle pointer events themselves\n          pointerEvents={isChildrenString && isSelectable ? 'none' : 'auto'}\n          // allow text to wrap, so that if the <Text> overflows it can truncate\n          whiteSpace=\"normal\"\n          position=\"relative\"\n          {...metaAttribute({ name: MetaConstants.TableCellWrapper })}\n        >\n          {isChildrenString ? (\n            <Text color=\"surface.text.gray.subtle\" size=\"small\" truncateAfterLines={1}>\n              {children}\n            </Text>\n          ) : (\n            children\n          )}\n        </CellWrapper>\n      </BaseBox>\n    </StyledCell>\n  );\n};\n\nconst TableCell = assignWithoutSideEffects(_TableCell, {\n  componentId: ComponentIds.TableCell,\n});\n\nconst TableCheckboxCell = ({\n  isChecked,\n  onChange,\n  isDisabled,\n  isIndeterminate,\n}: {\n  isChecked: CheckboxProps['isChecked'];\n  onChange: CheckboxProps['onChange'];\n  isDisabled?: boolean;\n  isIndeterminate?: boolean;\n}): React.ReactElement => {\n  return (\n    <TableCell>\n      <BaseBox\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        flex={1}\n        width={makeSize(checkboxCellWidth)}\n        onClick={(e) => {\n          /* Make entire 44px checkbox area clickable while preventing row selection */\n          if (e.target === e.currentTarget && !isDisabled) {\n            onChange?.({ isChecked: !isChecked });\n          }\n          e.stopPropagation();\n        }}\n      >\n        <Checkbox\n          isDisabled={isDisabled}\n          isChecked={isChecked}\n          onChange={onChange}\n          isIndeterminate={isIndeterminate}\n          {...makeAccessible({ label: 'Select Row' })}\n        />\n      </BaseBox>\n    </TableCell>\n  );\n};\n\nconst StyledRow = styled(Row)<{\n  $isSelectable: boolean;\n  $isHoverable: boolean;\n  $showBorderedCells: boolean;\n  $isGrouped: boolean;\n  $isGroupHeader: boolean;\n}>(({ theme, $isSelectable, $isHoverable, $showBorderedCells, $isGrouped, $isGroupHeader }) => {\n  const { hasHoverActions } = useTableContext();\n\n  const rowBackgroundTransition = `background-color ${makeMotionTime(\n    getIn(theme.motion, tableRow.backgroundColorMotionDuration),\n  )} ${getIn(theme.motion, tableRow.backgroundColorMotionEasing)}`;\n\n  return {\n    '&&&': {\n      backgroundColor: 'transparent',\n      '& .cell-wrapper': $showBorderedCells\n        ? {\n            borderRightWidth: makeSpace(getIn(theme.border.width, tableRow.borderBottomWidth)),\n            borderRightStyle: 'solid',\n            borderRightColor: getIn(theme.colors, tableRow.borderColor),\n          }\n        : undefined,\n      '& td:last-child .cell-wrapper': {\n        borderRight: 'none',\n      },\n      ...(hasHoverActions\n        ? {\n            [`@media ${getMediaQuery({ min: theme.breakpoints.m })}`]: {\n              '& td:last-child': {\n                opacity: 0,\n                position: 'sticky',\n                zIndex: 2,\n                right: 0,\n                width: '0px',\n                '& > div:first-child': {\n                  overflow: 'visible',\n                },\n              },\n              '& td:last-child:focus-within': {\n                opacity: 1,\n                ...getTableActionsHoverStyles({\n                  theme,\n                  hoverColor: tableRow.nonStripe.backgroundColor,\n                }),\n              },\n              '&:hover td:last-child': {\n                opacity: 1,\n              },\n            },\n          }\n        : {}),\n      ...(($isHoverable || $isSelectable) && {\n        '&:hover:not(.disabled-row) .cell-wrapper-base': {\n          transition: rowBackgroundTransition,\n          cursor: 'pointer',\n          backgroundColor: getIn(theme.colors, tableRow.nonStripe.backgroundColorHover),\n          ...getTableActionsHoverStyles({\n            hoverColor: tableRow.nonStripe.backgroundColorHover,\n            theme,\n          }),\n        },\n      }),\n      ...($isSelectable && {\n        '&:focus:not(.disabled-row) .cell-wrapper-base': {\n          transition: rowBackgroundTransition,\n          backgroundColor: getIn(theme.colors, tableRow.nonStripe.backgroundColorFocus),\n          cursor: 'pointer',\n          ...getTableActionsHoverStyles({\n            hoverColor: tableRow.nonStripe.backgroundColorFocus,\n            backgroundGradientColor: tableRow.nonStripe.backgroundColorHover,\n            theme,\n          }),\n        },\n        '&:active:not(.disabled-row) .cell-wrapper-base': {\n          transition: rowBackgroundTransition,\n          backgroundColor: getIn(theme.colors, tableRow.nonStripe.backgroundColorActive),\n          cursor: 'pointer',\n        },\n      }),\n      '&:focus': getFocusRingStyles({ theme, negativeOffset: true }),\n      ...($isGroupHeader && {\n        '& td': {\n          backgroundColor: getIn(theme.colors, tableRow.groupHeaderBackgroundColor),\n        },\n      }),\n      ...($isGrouped && {\n        '& .cell-wrapper': {\n          border: 'none',\n        },\n      }),\n    },\n  };\n});\n\nconst _TableRow = <Item,>({\n  children,\n  item,\n  isDisabled,\n  onHover,\n  onClick,\n  hoverActions,\n  testID,\n  ...rest\n}: TableRowProps<Item>): React.ReactElement => {\n  const {\n    selectionType,\n    selectedRows,\n    toggleRowSelectionById,\n    setDisabledRows,\n    showBorderedCells,\n    setHasHoverActions,\n    isVirtualized,\n    isGrouped,\n  } = useTableContext();\n  const isSelectable = selectionType !== 'none';\n  const isMultiSelect = selectionType === 'multiple';\n  const isSelected = selectedRows?.includes(item.id);\n  const hasHoverActions = Boolean(hoverActions);\n  const isGroupHeader =\n    isGrouped &&\n    (item as { treeXLevel?: number }).treeXLevel === 0 &&\n    ((item as { nodes?: unknown[] }).nodes?.length ?? 0) > 0;\n\n  const getGroupSelectionState = useMemo(() => {\n    if (!isGroupHeader || !isMultiSelect || !selectedRows) {\n      return { isAllSelected: false, isIndeterminate: false };\n    }\n\n    const childNodes = (item as { nodes?: string[] }).nodes ?? [];\n    if (childNodes.length === 0) {\n      return { isAllSelected: false, isIndeterminate: false };\n    }\n\n    const selectedChildIds = childNodes.filter((child) => selectedRows.includes(child));\n    const selectedCount = selectedChildIds?.length ?? 0;\n    const totalCount = childNodes?.length ?? 0;\n\n    const isAllSelected = selectedCount === totalCount;\n    const isIndeterminate = selectedCount > 0 && selectedCount < totalCount && !isSelected;\n\n    return { isAllSelected, isIndeterminate };\n  }, [isGroupHeader, isMultiSelect, selectedRows, item, isSelected]);\n\n  const { isAllSelected, isIndeterminate } = getGroupSelectionState;\n\n  useEffect(() => {\n    if (isDisabled) {\n      setDisabledRows((prev) => [...prev, item.id]);\n    }\n  }, [isDisabled, item.id, setDisabledRows]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (hasHoverActions) {\n      setHasHoverActions(true);\n    }\n  }, [hasHoverActions]);\n\n  return (\n    <StyledRow\n      disabled={isDisabled}\n      $isSelectable={isDisabled ? false : isSelectable}\n      $isHoverable={isDisabled ? false : Boolean(onHover) || Boolean(onClick)}\n      $showBorderedCells={showBorderedCells}\n      item={item}\n      className={isDisabled ? 'disabled-row' : ''}\n      onMouseEnter={() => onHover?.({ item })}\n      onClick={() => {\n        onClick?.({ item });\n        if (selectionType !== 'none' && !isDisabled) {\n          toggleRowSelectionById(item.id);\n        }\n      }}\n      {...makeAccessible({ selected: isSelected })}\n      {...metaAttribute({ name: MetaConstants.TableRow, testID })}\n      {...makeAnalyticsAttribute(rest)}\n      $isVirtualized={isVirtualized}\n      $isGrouped={isGrouped}\n      $isGroupHeader={isGroupHeader}\n    >\n      {isMultiSelect && (\n        <TableCheckboxCell\n          isChecked={Boolean(isSelected) || Boolean(isAllSelected)}\n          onChange={() => !isDisabled && toggleRowSelectionById(item.id)}\n          isDisabled={isDisabled}\n          isIndeterminate={isIndeterminate}\n        />\n      )}\n      {children}\n      {hoverActions ? (\n        <TableCell _hasPadding={false}>\n          <BaseBox\n            className={classes.HOVER_ACTIONS}\n            position={{ base: 'relative', m: 'absolute' }}\n            top=\"spacing.0\"\n            right=\"spacing.0\"\n            height=\"100%\"\n            flexShrink={0}\n            flexGrow={1}\n            width=\"max-content\"\n          >\n            <BaseBox\n              className={classes.HOVER_ACTIONS_LAYER2}\n              height=\"100%\"\n              width=\"max-content\"\n              display=\"flex\"\n              alignItems=\"center\"\n            >\n              <BaseBox\n                height=\"100%\"\n                width=\"max-content\"\n                className={classes.HOVER_ACTIONS_LAYER3}\n                display=\"flex\"\n                alignItems=\"center\"\n                paddingLeft={{ base: 'spacing.4', m: 'spacing.6' }}\n                paddingRight=\"spacing.4\"\n                gap=\"spacing.3\"\n              >\n                {hoverActions}\n              </BaseBox>\n            </BaseBox>\n          </BaseBox>\n        </TableCell>\n      ) : null}\n    </StyledRow>\n  );\n};\n\nconst _Virtulized = <Item,>({\n  headerHeight,\n  rowHeight,\n  children,\n}: VirtualizedWrapperProps): React.ReactElement => {\n  const [parsedHeader = null, parsedBody = null] = React.Children.toArray(children);\n  const { rowDensity, tableData } = useTableContext<Item>();\n  const _tableRow = Number(tableRow.minHeight[rowDensity]);\n\n  const _rowHeight = (item: TableNode<Item>, index: number): number => {\n    if (index === 0) {\n      return headerHeight ?? _tableRow;\n    }\n    return rowHeight ? rowHeight(item, index - 1) : _tableRow;\n  };\n\n  const bodyFunction =\n    React.isValidElement(parsedBody) &&\n    parsedBody.props &&\n    typeof parsedBody.props === 'object' &&\n    'children' in parsedBody.props\n      ? parsedBody.props.children\n      : null;\n\n  return (\n    <Virtualized\n      tableList={tableData}\n      rowHeight={_rowHeight as RowHeightType}\n      header={() => parsedHeader}\n      body={bodyFunction as (node: TableNode<Item>, index: number) => React.ReactNode}\n    />\n  );\n};\n\nconst TableRow = assignWithoutSideEffects(_TableRow, {\n  componentId: ComponentIds.TableRow,\n});\n\nconst TableVirtualizedWrapper = assignWithoutSideEffects(_Virtulized, {\n  componentId: ComponentIds.VirtualizedTable,\n});\nexport { TableBody, TableRow, TableCell, TableVirtualizedWrapper };\n"],"names":["StyledBody","styled","Body","withConfig","displayName","componentId","_ref","theme","$showStripedRows","$isSelectable","rowBackgroundTransition","getTableRowBackgroundTransition","_objectSpread","border","transition","borderBottom","getTableBodyStyles","addCommonStyles","isSelectable","showStripedRows","isVirtualized","_TableBody","_ref2","children","rest","_objectWithoutProperties","_excluded","_useTableContext","useTableContext","selectionType","_jsx","$showBorderedCells","metaAttribute","name","MetaConstants","TableBody","makeAnalyticsAttribute","assignWithoutSideEffects","ComponentIds","StyledCell","Cell","_ref3","$backgroundColor","gridRow","height","backgroundColor","getIn","colors","alignSelf","getFocusRingStyles","negativeOffset","CellWrapper","BaseBox","_ref4","$rowDensity","_ref4$hasPadding","hasPadding","textAlign","concat","makeMotionTime","motion","tableRow","backgroundColorMotionDuration","backgroundColorMotionEasing","nonStripeWrapper","paddingLeft","makeSpace","paddingRight","minHeight","makeSize","size","width","justifyContent","borderBottomWidth","borderBottomColor","borderColor","borderBottomStyle","_TableCell","_ref5","_hasPadding","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","_excluded2","isChildrenString","_useTableContext2","rowDensity","hasRowSpan","Boolean","gridRowValue","undefined","tabIndex","role","className","classes","HAS_ROW_SPANNING","TableCell","display","alignItems","flex","pointerEvents","whiteSpace","position","TableCellWrapper","Text","color","truncateAfterLines","TableCheckboxCell","_ref6","isChecked","onChange","isDisabled","isIndeterminate","checkboxCellWidth","onClick","e","target","currentTarget","stopPropagation","Checkbox","makeAccessible","label","StyledRow","Row","_ref7","$isHoverable","$isGrouped","$isGroupHeader","_useTableContext3","hasHoverActions","borderRightWidth","borderRightStyle","borderRightColor","borderRight","_defineProperty","getMediaQuery","min","breakpoints","m","opacity","zIndex","right","overflow","getTableActionsHoverStyles","hoverColor","nonStripe","cursor","backgroundColorHover","backgroundColorFocus","backgroundGradientColor","backgroundColorActive","groupHeaderBackgroundColor","_TableRow","_ref9","_nodes$length","_nodes","item","onHover","hoverActions","testID","_excluded3","_useTableContext4","selectedRows","toggleRowSelectionById","setDisabledRows","showBorderedCells","setHasHoverActions","isGrouped","isMultiSelect","isSelected","includes","id","isGroupHeader","treeXLevel","nodes","length","getGroupSelectionState","useMemo","_nodes2","_selectedChildIds$len","_childNodes$length","isAllSelected","childNodes","selectedChildIds","filter","child","selectedCount","totalCount","useEffect","prev","_toConsumableArray","useIsomorphicLayoutEffect","_jsxs","disabled","onMouseEnter","selected","TableRow","$isVirtualized","HOVER_ACTIONS","base","top","flexShrink","flexGrow","HOVER_ACTIONS_LAYER2","HOVER_ACTIONS_LAYER3","gap","_Virtulized","_ref0","headerHeight","rowHeight","_React$Children$toArr","React","Children","toArray","_React$Children$toArr2","_slicedToArray","_React$Children$toArr3","parsedHeader","_React$Children$toArr4","parsedBody","_useTableContext5","tableData","_tableRow","Number","_rowHeight","index","bodyFunction","isValidElement","props","_typeof","Virtualized","tableList","header","body","TableVirtualizedWrapper","VirtualizedTable"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,IAAMA,UAAU,gBAAGC,MAAM,CAACC,IAAI,CAAC,CAAAC,UAAA,CAAA;EAAAC,WAAA,EAAA,0BAAA;EAAAC,WAAA,EAAA,cAAA;AAAA,CAG5B,CAAA,CAAA,UAAAC,IAAA,EAAgD;AAAA,EAAA,IAA7CC,KAAK,GAAAD,IAAA,CAALC,KAAK;IAAEC,gBAAgB,GAAAF,IAAA,CAAhBE,gBAAgB;IAAEC,aAAa,GAAAH,IAAA,CAAbG,aAAa,CAAA;AAC1C,EAAA,IAAMC,uBAAuB,GAAGC,+BAA+B,CAACJ,KAAK,CAAC,CAAA;EAEtE,OAAO;AACL,IAAA,KAAK,EAAAK,aAAA,CAAA;AACHC,MAAAA,MAAM,EAAE,MAAM;AACdC,MAAAA,UAAU,EAAEJ,uBAAuB;AAEnC,MAAA,+BAA+B,EAAE;AAC/BK,QAAAA,YAAY,EAAE,MAAA;AAChB,OAAA;KAACH,EAAAA,aAAA,CAGII,EAAAA,EAAAA,kBAAkB,CAAC;AACpBC,MAAAA,eAAe,EAAE,IAAI;AACrBV,MAAAA,KAAK,EAALA,KAAK;AACLW,MAAAA,YAAY,EAAET,aAAa;AAC3BU,MAAAA,eAAe,EAAEX,gBAAgB;AACjCY,MAAAA,aAAa,EAAE,KAAA;AACjB,KAAC,CAAC,CAAA,CAAA;GAGP,CAAA;AACH,CAAC,CAAC,CAAA;AAEF,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAAC,KAAA,EAA+E;AAAA,EAAA,IAAlEC,QAAQ,GAAAD,KAAA,CAARC,QAAQ;AAAKC,IAAAA,IAAI,GAAAC,wBAAA,CAAAH,KAAA,EAAAI,SAAA,CAAA,CAAA;AAC5C,EAAA,IAAAC,gBAAA,GAA2CC,eAAe,EAAE;IAApDT,eAAe,GAAAQ,gBAAA,CAAfR,eAAe;IAAEU,aAAa,GAAAF,gBAAA,CAAbE,aAAa,CAAA;AACtC,EAAA,IAAMX,YAAY,GAAGW,aAAa,KAAK,MAAM,CAAA;EAE7C,oBACEC,GAAA,CAAC9B,UAAU,EAAAY,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAA;AACTH,IAAAA,aAAa,EAAES,YAAa;AAC5BV,IAAAA,gBAAgB,EAAEW,eAAgB;AAClCY,IAAAA,kBAAkB,EAAE,IAAA;AAAK,GAAA,EACrBC,aAAa,CAAC;IAAEC,IAAI,EAAEC,aAAa,CAACC,SAAAA;AAAU,GAAC,CAAC,CAAA,EAChDC,sBAAsB,CAACZ,IAAI,CAAC,CAAA,EAAA,EAAA,EAAA;AAAAD,IAAAA,QAAA,EAE/BA,QAAAA;AAAQ,GAAA,CACC,CAAC,CAAA;AAEjB,CAAC,CAAA;AAED,IAAMY,SAAS,gBAAGE,wBAAwB,CAAChB,UAAU,EAAE;EACrDhB,WAAW,EAAEiC,YAAY,CAACH,SAAAA;AAC5B,CAAC,EAAC;AAEK,IAAMI,UAAU,gBAAGtC,MAAM,CAACuC,IAAI,CAAC,CAAArC,UAAA,CAAA;EAAAC,WAAA,EAAA,0BAAA;EAAAC,WAAA,EAAA,cAAA;AAAA,CAAA,CAAA,CAGnC,UAAAoC,KAAA,EAAA;AAAA,EAAA,IAAGlC,KAAK,GAAAkC,KAAA,CAALlC,KAAK;IAAEmC,gBAAgB,GAAAD,KAAA,CAAhBC,gBAAgB;IAAEC,OAAO,GAAAF,KAAA,CAAPE,OAAO,CAAA;EAAA,OAAQ;AAC5C,IAAA,KAAK,EAAE;AACLC,MAAAA,MAAM,EAAE,MAAM;MACdC,eAAe,EAAEC,KAAK,CAACvC,KAAK,CAACwC,MAAM,EAAEL,gBAAgB,CAAC;AACtDC,MAAAA,OAAO,EAAPA,OAAO;AACP,MAAA,qBAAqB,EAAE;AACrBK,QAAAA,SAAS,EAAE,SAAA;OACZ;AACD,MAAA,iBAAiB,EAAApC,aAAA,CAAOqC,EAAAA,EAAAA,kBAAkB,CAAC;AAAE1C,QAAAA,KAAK,EAALA,KAAK;AAAE2C,QAAAA,cAAc,EAAE,IAAA;AAAK,OAAC,CAAC,CAAA;AAC7E,KAAA;GACD,CAAA;AAAA,CAAC,EAAC;AAEI,IAAMC,WAAW,gBAAGlD,MAAM,CAACmD,OAAO,CAAC,CAAAjD,UAAA,CAAA;EAAAC,WAAA,EAAA,2BAAA;EAAAC,WAAA,EAAA,cAAA;AAAA,CAKvC,CAAA,CAAA,UAAAgD,KAAA,EAA2E;AAAA,EAAA,IAAxE9C,KAAK,GAAA8C,KAAA,CAAL9C,KAAK;IAAE+C,WAAW,GAAAD,KAAA,CAAXC,WAAW;IAAEnC,eAAe,GAAAkC,KAAA,CAAflC,eAAe;IAAAoC,gBAAA,GAAAF,KAAA,CAAEG,UAAU;AAAVA,IAAAA,UAAU,GAAAD,gBAAA,KAAG,KAAA,CAAA,GAAA,IAAI,GAAAA,gBAAA;IAAEE,SAAS,GAAAJ,KAAA,CAATI,SAAS,CAAA;AACrE,EAAA,IAAM/C,uBAAuB,GAAA,mBAAA,CAAAgD,MAAA,CAAuBC,cAAc,CAChEb,KAAK,CAACvC,KAAK,CAACqD,MAAM,EAAEC,QAAQ,CAACC,6BAA6B,CAC5D,CAAC,EAAAJ,GAAAA,CAAAA,CAAAA,MAAA,CAAIZ,KAAK,CAACvC,KAAK,CAACqD,MAAM,EAAEC,QAAQ,CAACE,2BAA2B,CAAC,CAAE,CAAA;EAEhE,OAAO;AACL,IAAA,KAAK,EAAAnD,aAAA,CAAA;AACHE,MAAAA,UAAU,EAAEJ,uBAAuB;AACnCmC,MAAAA,eAAe,EAAEgB,QAAQ,CAACG,gBAAgB,CAACnB,eAAe;AAC1DoB,MAAAA,WAAW,EAAET,UAAU,GAAGU,SAAS,CAACpB,KAAK,CAACvC,KAAK,EAAEsD,QAAQ,CAACI,WAAW,CAACX,WAAW,CAAC,CAAC,CAAC,GAAG,KAAK;AAC5Fa,MAAAA,YAAY,EAAEX,UAAU,GACpBU,SAAS,CAACpB,KAAK,CAACvC,KAAK,EAAEsD,QAAQ,CAACM,YAAY,CAACb,WAAW,CAAC,CAAC,CAAC,GAC3D,KAAK;AACTc,MAAAA,SAAS,EAAEC,QAAQ,CAACvB,KAAK,CAACwB,IAAI,EAAET,QAAQ,CAACO,SAAS,CAACd,WAAW,CAAC,CAAC,CAAC;AACjEV,MAAAA,MAAM,EAAE,MAAM;AACd2B,MAAAA,KAAK,EAAE,MAAM;AACbC,MAAAA,cAAc,EAAEf,SAAAA;KACZ,EAAA,CAACtC,eAAe,IAAI;AACtBsD,MAAAA,iBAAiB,EAAEP,SAAS,CAACpB,KAAK,CAACvC,KAAK,CAACM,MAAM,CAAC0D,KAAK,EAAEV,QAAQ,CAACY,iBAAiB,CAAC,CAAC;MACnFC,iBAAiB,EAAE5B,KAAK,CAACvC,KAAK,CAACwC,MAAM,EAAEc,QAAQ,CAACc,WAAW,CAAC;AAC5DC,MAAAA,iBAAiB,EAAE,OAAA;KACpB,CAAA;GAEJ,CAAA;AACH,CAAC,EAAC;AAEF,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAAC,KAAA,EAS0B;AAAA,EAAA,IARxCvD,QAAQ,GAAAuD,KAAA,CAARvD,QAAQ;IACRkC,SAAS,GAAAqB,KAAA,CAATrB,SAAS;IACTsB,WAAW,GAAAD,KAAA,CAAXC,WAAW;IACXC,eAAe,GAAAF,KAAA,CAAfE,eAAe;IACfC,aAAa,GAAAH,KAAA,CAAbG,aAAa;IACbC,YAAY,GAAAJ,KAAA,CAAZI,YAAY;IACZC,UAAU,GAAAL,KAAA,CAAVK,UAAU;AACP3D,IAAAA,IAAI,GAAAC,wBAAA,CAAAqD,KAAA,EAAAM,UAAA,CAAA,CAAA;AAEP,EAAA,IAAMC,gBAAgB,GAAG,OAAO9D,QAAQ,KAAK,QAAQ,CAAA;AACrD,EAAA,IAAA+D,iBAAA,GAAwE1D,eAAe,EAAE;IAAjFC,aAAa,GAAAyD,iBAAA,CAAbzD,aAAa;IAAE0D,UAAU,GAAAD,iBAAA,CAAVC,UAAU;IAAEpE,eAAe,GAAAmE,iBAAA,CAAfnE,eAAe;IAAE0B,eAAe,GAAAyC,iBAAA,CAAfzC,eAAe,CAAA;AACnE,EAAA,IAAM3B,YAAY,GAAGW,aAAa,KAAK,MAAM,CAAA;AAE7C,EAAA,IAAM2D,UAAU,GAAGC,OAAO,CAACP,YAAY,IAAIC,UAAU,CAAC,CAAA;AACtD,EAAA,IAAMO,YAAY,GAAGF,UAAU,GAAA,EAAA,CAAA9B,MAAA,CAAMwB,YAAY,EAAA,KAAA,CAAA,CAAAxB,MAAA,CAAMyB,UAAU,CAAA,GAAKQ,SAAS,CAAA;EAE/E,oBACE7D,GAAA,CAACS,UAAU,EAAA3B,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAA;AACTgF,IAAAA,QAAQ,EAAE,CAAE;AACZC,IAAAA,IAAI,EAAC,MAAM;AACXC,IAAAA,SAAS,EAAEN,UAAU,GAAGO,OAAO,CAACC,gBAAgB,GAAG,EAAG;AACtDtD,IAAAA,gBAAgB,EAAEG,eAAgB;AAClCmC,IAAAA,eAAe,EAAEA,eAAgB;AACjCC,IAAAA,aAAa,EAAEA,aAAc;AAC7BtC,IAAAA,OAAO,EAAE+C,YAAAA;AAAa,GAAA,EAClB1D,aAAa,CAAC;IAAEC,IAAI,EAAEC,aAAa,CAAC+D,SAAAA;AAAU,GAAC,CAAC,CAAA,EAChD7D,sBAAsB,CAACZ,IAAI,CAAC,CAAA,EAAA,EAAA,EAAA;IAAAD,QAAA,eAEhCO,GAAA,CAACsB,OAAO,EAAA;AAAC0C,MAAAA,SAAS,EAAC,mBAAmB;AAACI,MAAAA,OAAO,EAAC,MAAM;AAACC,MAAAA,UAAU,EAAC,QAAQ;AAACvD,MAAAA,MAAM,EAAC,MAAM;AAAArB,MAAAA,QAAA,eACrFO,GAAA,CAACqB,WAAW,EAAAvC,aAAA,CAAAA,aAAA,CAAA;AACVkF,QAAAA,SAAS,EAAC,cAAc;AACxBxC,QAAAA,WAAW,EAAEiC,UAAW;AACxBpE,QAAAA,eAAe,EAAEA,eAAgB;AACjC+E,QAAAA,OAAO,EAAC,MAAM;AACdC,QAAAA,UAAU,EAAC,QAAQ;AACnB3C,QAAAA,UAAU,EAAEuB,WAAY;AACxBqB,QAAAA,IAAI,EAAE,CAAE;AACR3C,QAAAA,SAAS,EAAEA,SAAAA;AACX;AACA;AAAA;AACA4C,QAAAA,aAAa,EAAEhB,gBAAgB,IAAInE,YAAY,GAAG,MAAM,GAAG,MAAA;AAC3D;AAAA;AACAoF,QAAAA,UAAU,EAAC,QAAQ;AACnBC,QAAAA,QAAQ,EAAC,UAAA;AAAU,OAAA,EACfvE,aAAa,CAAC;QAAEC,IAAI,EAAEC,aAAa,CAACsE,gBAAAA;AAAiB,OAAC,CAAC,CAAA,EAAA,EAAA,EAAA;AAAAjF,QAAAA,QAAA,EAE1D8D,gBAAgB,gBACfvD,GAAA,CAAC2E,IAAI,EAAA;AAACC,UAAAA,KAAK,EAAC,0BAA0B;AAACpC,UAAAA,IAAI,EAAC,OAAO;AAACqC,UAAAA,kBAAkB,EAAE,CAAE;AAAApF,UAAAA,QAAA,EACvEA,QAAAA;AAAQ,SACL,CAAC,GAEPA,QAAAA;OAES,CAAA,CAAA;KACN,CAAA;AAAC,GAAA,CACA,CAAC,CAAA;AAEjB,CAAC,CAAA;AAED,IAAM0E,SAAS,gBAAG5D,wBAAwB,CAACwC,UAAU,EAAE;EACrDxE,WAAW,EAAEiC,YAAY,CAAC2D,SAAAA;AAC5B,CAAC,EAAC;AAEF,IAAMW,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAAC,KAAA,EAUG;AAAA,EAAA,IATxBC,SAAS,GAAAD,KAAA,CAATC,SAAS;IACTC,QAAQ,GAAAF,KAAA,CAARE,QAAQ;IACRC,UAAU,GAAAH,KAAA,CAAVG,UAAU;IACVC,eAAe,GAAAJ,KAAA,CAAfI,eAAe,CAAA;EAOf,oBACEnF,GAAA,CAACmE,SAAS,EAAA;IAAA1E,QAAA,eACRO,GAAA,CAACsB,OAAO,EAAA;AACN8C,MAAAA,OAAO,EAAC,MAAM;AACdC,MAAAA,UAAU,EAAC,QAAQ;AACnB3B,MAAAA,cAAc,EAAC,QAAQ;AACvB4B,MAAAA,IAAI,EAAE,CAAE;AACR7B,MAAAA,KAAK,EAAEF,QAAQ,CAAC6C,iBAAiB,CAAE;AACnCC,MAAAA,OAAO,EAAE,SAATA,OAAOA,CAAGC,CAAC,EAAK;AACd;QACA,IAAIA,CAAC,CAACC,MAAM,KAAKD,CAAC,CAACE,aAAa,IAAI,CAACN,UAAU,EAAE;AAC/CD,UAAAA,QAAQ,KAARA,IAAAA,IAAAA,QAAQ,KAARA,KAAAA,CAAAA,IAAAA,QAAQ,CAAG;AAAED,YAAAA,SAAS,EAAE,CAACA,SAAAA;AAAU,WAAC,CAAC,CAAA;AACvC,SAAA;QACAM,CAAC,CAACG,eAAe,EAAE,CAAA;OACnB;AAAAhG,MAAAA,QAAA,eAEFO,GAAA,CAAC0F,QAAQ,EAAA5G,aAAA,CAAA;AACPoG,QAAAA,UAAU,EAAEA,UAAW;AACvBF,QAAAA,SAAS,EAAEA,SAAU;AACrBC,QAAAA,QAAQ,EAAEA,QAAS;AACnBE,QAAAA,eAAe,EAAEA,eAAAA;AAAgB,OAAA,EAC7BQ,cAAc,CAAC;AAAEC,QAAAA,KAAK,EAAE,YAAA;AAAa,OAAC,CAAC,CAC5C,CAAA;KACM,CAAA;AAAC,GACD,CAAC,CAAA;AAEhB,CAAC,CAAA;AAED,IAAMC,SAAS,gBAAG1H,MAAM,CAAC2H,GAAG,CAAC,CAAAzH,UAAA,CAAA;EAAAC,WAAA,EAAA,yBAAA;EAAAC,WAAA,EAAA,cAAA;AAAA,CAM1B,CAAA,CAAA,UAAAwH,KAAA,EAA4F;AAAA,EAAA,IAAzFtH,KAAK,GAAAsH,KAAA,CAALtH,KAAK;IAAEE,aAAa,GAAAoH,KAAA,CAAbpH,aAAa;IAAEqH,YAAY,GAAAD,KAAA,CAAZC,YAAY;IAAE/F,kBAAkB,GAAA8F,KAAA,CAAlB9F,kBAAkB;IAAEgG,UAAU,GAAAF,KAAA,CAAVE,UAAU;IAAEC,cAAc,GAAAH,KAAA,CAAdG,cAAc,CAAA;AACtF,EAAA,IAAAC,iBAAA,GAA4BrG,eAAe,EAAE;IAArCsG,eAAe,GAAAD,iBAAA,CAAfC,eAAe,CAAA;AAEvB,EAAA,IAAMxH,uBAAuB,GAAA,mBAAA,CAAAgD,MAAA,CAAuBC,cAAc,CAChEb,KAAK,CAACvC,KAAK,CAACqD,MAAM,EAAEC,QAAQ,CAACC,6BAA6B,CAC5D,CAAC,EAAAJ,GAAAA,CAAAA,CAAAA,MAAA,CAAIZ,KAAK,CAACvC,KAAK,CAACqD,MAAM,EAAEC,QAAQ,CAACE,2BAA2B,CAAC,CAAE,CAAA;EAEhE,OAAO;IACL,KAAK,EAAAnD,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAA;AACHiC,MAAAA,eAAe,EAAE,aAAa;MAC9B,iBAAiB,EAAEd,kBAAkB,GACjC;AACEoG,QAAAA,gBAAgB,EAAEjE,SAAS,CAACpB,KAAK,CAACvC,KAAK,CAACM,MAAM,CAAC0D,KAAK,EAAEV,QAAQ,CAACY,iBAAiB,CAAC,CAAC;AAClF2D,QAAAA,gBAAgB,EAAE,OAAO;QACzBC,gBAAgB,EAAEvF,KAAK,CAACvC,KAAK,CAACwC,MAAM,EAAEc,QAAQ,CAACc,WAAW,CAAA;AAC5D,OAAC,GACDgB,SAAS;AACb,MAAA,+BAA+B,EAAE;AAC/B2C,QAAAA,WAAW,EAAE,MAAA;AACf,OAAA;AAAC,KAAA,EACGJ,eAAe,GAAAK,eAAA,eAAA7E,MAAA,CAEF8E,aAAa,CAAC;AAAEC,MAAAA,GAAG,EAAElI,KAAK,CAACmI,WAAW,CAACC,CAAAA;AAAE,KAAC,CAAC,CAAK,EAAA;AACzD,MAAA,iBAAiB,EAAE;AACjBC,QAAAA,OAAO,EAAE,CAAC;AACVrC,QAAAA,QAAQ,EAAE,QAAQ;AAClBsC,QAAAA,MAAM,EAAE,CAAC;AACTC,QAAAA,KAAK,EAAE,CAAC;AACRvE,QAAAA,KAAK,EAAE,KAAK;AACZ,QAAA,qBAAqB,EAAE;AACrBwE,UAAAA,QAAQ,EAAE,SAAA;AACZ,SAAA;OACD;AACD,MAAA,8BAA8B,EAAAnI,aAAA,CAAA;AAC5BgI,QAAAA,OAAO,EAAE,CAAA;AAAC,OAAA,EACPI,0BAA0B,CAAC;AAC5BzI,QAAAA,KAAK,EAALA,KAAK;AACL0I,QAAAA,UAAU,EAAEpF,QAAQ,CAACqF,SAAS,CAACrG,eAAAA;AACjC,OAAC,CAAC,CACH;AACD,MAAA,uBAAuB,EAAE;AACvB+F,QAAAA,OAAO,EAAE,CAAA;AACX,OAAA;KACD,CAAA,GAEH,EAAE,CAAA,EACF,CAACd,YAAY,IAAIrH,aAAa,KAAK;AACrC,MAAA,+CAA+C,EAAAG,aAAA,CAAA;AAC7CE,QAAAA,UAAU,EAAEJ,uBAAuB;AACnCyI,QAAAA,MAAM,EAAE,SAAS;QACjBtG,eAAe,EAAEC,KAAK,CAACvC,KAAK,CAACwC,MAAM,EAAEc,QAAQ,CAACqF,SAAS,CAACE,oBAAoB,CAAA;AAAC,OAAA,EAC1EJ,0BAA0B,CAAC;AAC5BC,QAAAA,UAAU,EAAEpF,QAAQ,CAACqF,SAAS,CAACE,oBAAoB;AACnD7I,QAAAA,KAAK,EAALA,KAAAA;AACF,OAAC,CAAC,CAAA;KAEL,CAAA,EACGE,aAAa,IAAI;AACnB,MAAA,+CAA+C,EAAAG,aAAA,CAAA;AAC7CE,QAAAA,UAAU,EAAEJ,uBAAuB;AACnCmC,QAAAA,eAAe,EAAEC,KAAK,CAACvC,KAAK,CAACwC,MAAM,EAAEc,QAAQ,CAACqF,SAAS,CAACG,oBAAoB,CAAC;AAC7EF,QAAAA,MAAM,EAAE,SAAA;AAAS,OAAA,EACdH,0BAA0B,CAAC;AAC5BC,QAAAA,UAAU,EAAEpF,QAAQ,CAACqF,SAAS,CAACG,oBAAoB;AACnDC,QAAAA,uBAAuB,EAAEzF,QAAQ,CAACqF,SAAS,CAACE,oBAAoB;AAChE7I,QAAAA,KAAK,EAALA,KAAAA;AACF,OAAC,CAAC,CACH;AACD,MAAA,gDAAgD,EAAE;AAChDO,QAAAA,UAAU,EAAEJ,uBAAuB;AACnCmC,QAAAA,eAAe,EAAEC,KAAK,CAACvC,KAAK,CAACwC,MAAM,EAAEc,QAAQ,CAACqF,SAAS,CAACK,qBAAqB,CAAC;AAC9EJ,QAAAA,MAAM,EAAE,SAAA;AACV,OAAA;KACD,CAAA,EAAA,EAAA,EAAA;MACD,SAAS,EAAElG,kBAAkB,CAAC;AAAE1C,QAAAA,KAAK,EAALA,KAAK;AAAE2C,QAAAA,cAAc,EAAE,IAAA;OAAM,CAAA;AAAC,KAAA,EAC1D8E,cAAc,IAAI;AACpB,MAAA,MAAM,EAAE;QACNnF,eAAe,EAAEC,KAAK,CAACvC,KAAK,CAACwC,MAAM,EAAEc,QAAQ,CAAC2F,0BAA0B,CAAA;AAC1E,OAAA;KACD,CAAA,EACGzB,UAAU,IAAI;AAChB,MAAA,iBAAiB,EAAE;AACjBlH,QAAAA,MAAM,EAAE,MAAA;AACV,OAAA;KACD,CAAA;GAEJ,CAAA;AACH,CAAC,CAAC,CAAA;AAEF,IAAM4I,SAAS,GAAG,SAAZA,SAASA,CAAAC,KAAA,EASgC;EAAA,IAAAC,aAAA,EAAAC,MAAA,CAAA;AAAA,EAAA,IAR7CrI,QAAQ,GAAAmI,KAAA,CAARnI,QAAQ;IACRsI,IAAI,GAAAH,KAAA,CAAJG,IAAI;IACJ7C,UAAU,GAAA0C,KAAA,CAAV1C,UAAU;IACV8C,OAAO,GAAAJ,KAAA,CAAPI,OAAO;IACP3C,QAAO,GAAAuC,KAAA,CAAPvC,OAAO;IACP4C,YAAY,GAAAL,KAAA,CAAZK,YAAY;IACZC,MAAM,GAAAN,KAAA,CAANM,MAAM;AACHxI,IAAAA,IAAI,GAAAC,wBAAA,CAAAiI,KAAA,EAAAO,UAAA,CAAA,CAAA;AAEP,EAAA,IAAAC,iBAAA,GASItI,eAAe,EAAE;IARnBC,aAAa,GAAAqI,iBAAA,CAAbrI,aAAa;IACbsI,YAAY,GAAAD,iBAAA,CAAZC,YAAY;IACZC,sBAAsB,GAAAF,iBAAA,CAAtBE,sBAAsB;IACtBC,eAAe,GAAAH,iBAAA,CAAfG,eAAe;IACfC,iBAAiB,GAAAJ,iBAAA,CAAjBI,iBAAiB;IACjBC,kBAAkB,GAAAL,iBAAA,CAAlBK,kBAAkB;IAClBnJ,aAAa,GAAA8I,iBAAA,CAAb9I,aAAa;IACboJ,SAAS,GAAAN,iBAAA,CAATM,SAAS,CAAA;AAEX,EAAA,IAAMtJ,YAAY,GAAGW,aAAa,KAAK,MAAM,CAAA;AAC7C,EAAA,IAAM4I,aAAa,GAAG5I,aAAa,KAAK,UAAU,CAAA;AAClD,EAAA,IAAM6I,UAAU,GAAGP,YAAY,KAAA,IAAA,IAAZA,YAAY,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAZA,YAAY,CAAEQ,QAAQ,CAACd,IAAI,CAACe,EAAE,CAAC,CAAA;AAClD,EAAA,IAAM1C,eAAe,GAAGzC,OAAO,CAACsE,YAAY,CAAC,CAAA;AAC7C,EAAA,IAAMc,aAAa,GACjBL,SAAS,IACRX,IAAI,CAA6BiB,UAAU,KAAK,CAAC,IAClD,CAAAnB,CAAAA,aAAA,IAAAC,MAAA,GAAEC,IAAI,CAA2BkB,KAAK,MAAA,IAAA,IAAAnB,MAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAArCA,MAAA,CAAuCoB,MAAM,MAAArB,IAAAA,IAAAA,aAAA,KAAAA,KAAAA,CAAAA,GAAAA,aAAA,GAAI,CAAC,IAAI,CAAC,CAAA;AAE1D,EAAA,IAAMsB,sBAAsB,GAAGC,OAAO,CAAC,YAAM;AAAA,IAAA,IAAAC,OAAA,EAAAC,qBAAA,EAAAC,kBAAA,CAAA;IAC3C,IAAI,CAACR,aAAa,IAAI,CAACJ,aAAa,IAAI,CAACN,YAAY,EAAE;MACrD,OAAO;AAAEmB,QAAAA,aAAa,EAAE,KAAK;AAAErE,QAAAA,eAAe,EAAE,KAAA;OAAO,CAAA;AACzD,KAAA;AAEA,IAAA,IAAMsE,UAAU,GAAA,CAAAJ,OAAA,GAAItB,IAAI,CAA0BkB,KAAK,MAAA,IAAA,IAAAI,OAAA,KAAA,KAAA,CAAA,GAAAA,OAAA,GAAI,EAAE,CAAA;AAC7D,IAAA,IAAII,UAAU,CAACP,MAAM,KAAK,CAAC,EAAE;MAC3B,OAAO;AAAEM,QAAAA,aAAa,EAAE,KAAK;AAAErE,QAAAA,eAAe,EAAE,KAAA;OAAO,CAAA;AACzD,KAAA;AAEA,IAAA,IAAMuE,gBAAgB,GAAGD,UAAU,CAACE,MAAM,CAAC,UAACC,KAAK,EAAA;AAAA,MAAA,OAAKvB,YAAY,CAACQ,QAAQ,CAACe,KAAK,CAAC,CAAA;KAAC,CAAA,CAAA;AACnF,IAAA,IAAMC,aAAa,GAAAP,CAAAA,qBAAA,GAAGI,gBAAgB,aAAhBA,gBAAgB,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAhBA,gBAAgB,CAAER,MAAM,MAAAI,IAAAA,IAAAA,qBAAA,KAAAA,KAAAA,CAAAA,GAAAA,qBAAA,GAAI,CAAC,CAAA;AACnD,IAAA,IAAMQ,UAAU,GAAAP,CAAAA,kBAAA,GAAGE,UAAU,aAAVA,UAAU,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAVA,UAAU,CAAEP,MAAM,MAAAK,IAAAA,IAAAA,kBAAA,KAAAA,KAAAA,CAAAA,GAAAA,kBAAA,GAAI,CAAC,CAAA;AAE1C,IAAA,IAAMC,aAAa,GAAGK,aAAa,KAAKC,UAAU,CAAA;IAClD,IAAM3E,eAAe,GAAG0E,aAAa,GAAG,CAAC,IAAIA,aAAa,GAAGC,UAAU,IAAI,CAAClB,UAAU,CAAA;IAEtF,OAAO;AAAEY,MAAAA,aAAa,EAAbA,aAAa;AAAErE,MAAAA,eAAe,EAAfA,eAAAA;KAAiB,CAAA;AAC3C,GAAC,EAAE,CAAC4D,aAAa,EAAEJ,aAAa,EAAEN,YAAY,EAAEN,IAAI,EAAEa,UAAU,CAAC,CAAC,CAAA;AAElE,EAAA,IAAQY,aAAa,GAAsBL,sBAAsB,CAAzDK,aAAa;IAAErE,eAAe,GAAKgE,sBAAsB,CAA1ChE,eAAe,CAAA;AAEtC4E,EAAAA,SAAS,CAAC,YAAM;AACd,IAAA,IAAI7E,UAAU,EAAE;MACdqD,eAAe,CAAC,UAACyB,IAAI,EAAA;QAAA,OAAApI,EAAAA,CAAAA,MAAA,CAAAqI,kBAAA,CAASD,IAAI,CAAEjC,EAAAA,CAAAA,IAAI,CAACe,EAAE,CAAA,CAAA,CAAA;AAAA,OAAC,CAAC,CAAA;AAC/C,KAAA;GACD,EAAE,CAAC5D,UAAU,EAAE6C,IAAI,CAACe,EAAE,EAAEP,eAAe,CAAC,CAAC,CAAA;AAE1C2B,EAAAA,yBAAyB,CAAC,YAAM;AAC9B,IAAA,IAAI9D,eAAe,EAAE;MACnBqC,kBAAkB,CAAC,IAAI,CAAC,CAAA;AAC1B,KAAA;AACF,GAAC,EAAE,CAACrC,eAAe,CAAC,CAAC,CAAA;EAErB,oBACE+D,IAAA,CAACtE,SAAS,EAAA/G,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAAA,aAAA,CAAA;AACRsL,IAAAA,QAAQ,EAAElF,UAAW;AACrBvG,IAAAA,aAAa,EAAEuG,UAAU,GAAG,KAAK,GAAG9F,YAAa;AACjD4G,IAAAA,YAAY,EAAEd,UAAU,GAAG,KAAK,GAAGvB,OAAO,CAACqE,OAAO,CAAC,IAAIrE,OAAO,CAAC0B,QAAO,CAAE;AACxEpF,IAAAA,kBAAkB,EAAEuI,iBAAkB;AACtCT,IAAAA,IAAI,EAAEA,IAAK;AACX/D,IAAAA,SAAS,EAAEkB,UAAU,GAAG,cAAc,GAAG,EAAG;IAC5CmF,YAAY,EAAE,SAAdA,YAAYA,GAAA;AAAA,MAAA,OAAQrC,OAAO,KAAA,IAAA,IAAPA,OAAO,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAPA,OAAO,CAAG;AAAED,QAAAA,IAAI,EAAJA,IAAAA;AAAK,OAAC,CAAC,CAAA;KAAC;AACxC1C,IAAAA,OAAO,EAAE,SAATA,OAAOA,GAAQ;AACbA,MAAAA,QAAO,KAAPA,IAAAA,IAAAA,QAAO,KAAPA,KAAAA,CAAAA,IAAAA,QAAO,CAAG;AAAE0C,QAAAA,IAAI,EAAJA,IAAAA;AAAK,OAAC,CAAC,CAAA;AACnB,MAAA,IAAIhI,aAAa,KAAK,MAAM,IAAI,CAACmF,UAAU,EAAE;AAC3CoD,QAAAA,sBAAsB,CAACP,IAAI,CAACe,EAAE,CAAC,CAAA;AACjC,OAAA;AACF,KAAA;AAAE,GAAA,EACEnD,cAAc,CAAC;AAAE2E,IAAAA,QAAQ,EAAE1B,UAAAA;GAAY,CAAC,CACxC1I,EAAAA,aAAa,CAAC;IAAEC,IAAI,EAAEC,aAAa,CAACmK,QAAQ;AAAErC,IAAAA,MAAM,EAANA,MAAAA;AAAO,GAAC,CAAC,CAAA,EACvD5H,sBAAsB,CAACZ,IAAI,CAAC,CAAA,EAAA,EAAA,EAAA;AAChC8K,IAAAA,cAAc,EAAElL,aAAc;AAC9B2G,IAAAA,UAAU,EAAEyC,SAAU;AACtBxC,IAAAA,cAAc,EAAE6C,aAAc;AAAAtJ,IAAAA,QAAA,EAE7BkJ,CAAAA,aAAa,iBACZ3I,GAAA,CAAC8E,iBAAiB,EAAA;MAChBE,SAAS,EAAErB,OAAO,CAACiF,UAAU,CAAC,IAAIjF,OAAO,CAAC6F,aAAa,CAAE;MACzDvE,QAAQ,EAAE,SAAVA,QAAQA,GAAA;QAAA,OAAQ,CAACC,UAAU,IAAIoD,sBAAsB,CAACP,IAAI,CAACe,EAAE,CAAC,CAAA;OAAC;AAC/D5D,MAAAA,UAAU,EAAEA,UAAW;AACvBC,MAAAA,eAAe,EAAEA,eAAAA;KAClB,CACF,EACA1F,QAAQ,EACRwI,YAAY,gBACXjI,GAAA,CAACmE,SAAS,EAAA;AAAClB,MAAAA,WAAW,EAAE,KAAM;MAAAxD,QAAA,eAC5BO,GAAA,CAACsB,OAAO,EAAA;QACN0C,SAAS,EAAEC,OAAO,CAACwG,aAAc;AACjChG,QAAAA,QAAQ,EAAE;AAAEiG,UAAAA,IAAI,EAAE,UAAU;AAAE7D,UAAAA,CAAC,EAAE,UAAA;SAAa;AAC9C8D,QAAAA,GAAG,EAAC,WAAW;AACf3D,QAAAA,KAAK,EAAC,WAAW;AACjBlG,QAAAA,MAAM,EAAC,MAAM;AACb8J,QAAAA,UAAU,EAAE,CAAE;AACdC,QAAAA,QAAQ,EAAE,CAAE;AACZpI,QAAAA,KAAK,EAAC,aAAa;QAAAhD,QAAA,eAEnBO,GAAA,CAACsB,OAAO,EAAA;UACN0C,SAAS,EAAEC,OAAO,CAAC6G,oBAAqB;AACxChK,UAAAA,MAAM,EAAC,MAAM;AACb2B,UAAAA,KAAK,EAAC,aAAa;AACnB2B,UAAAA,OAAO,EAAC,MAAM;AACdC,UAAAA,UAAU,EAAC,QAAQ;UAAA5E,QAAA,eAEnBO,GAAA,CAACsB,OAAO,EAAA;AACNR,YAAAA,MAAM,EAAC,MAAM;AACb2B,YAAAA,KAAK,EAAC,aAAa;YACnBuB,SAAS,EAAEC,OAAO,CAAC8G,oBAAqB;AACxC3G,YAAAA,OAAO,EAAC,MAAM;AACdC,YAAAA,UAAU,EAAC,QAAQ;AACnBlC,YAAAA,WAAW,EAAE;AAAEuI,cAAAA,IAAI,EAAE,WAAW;AAAE7D,cAAAA,CAAC,EAAE,WAAA;aAAc;AACnDxE,YAAAA,YAAY,EAAC,WAAW;AACxB2I,YAAAA,GAAG,EAAC,WAAW;AAAAvL,YAAAA,QAAA,EAEdwI,YAAAA;WACM,CAAA;SACF,CAAA;OACF,CAAA;KACA,CAAC,GACV,IAAI,CAAA;AAAA,GAAA,CACC,CAAC,CAAA;AAEhB,CAAC,CAAA;AAED,IAAMgD,WAAW,GAAG,SAAdA,WAAWA,CAAAC,KAAA,EAIkC;AAAA,EAAA,IAHjDC,YAAY,GAAAD,KAAA,CAAZC,YAAY;IACZC,SAAS,GAAAF,KAAA,CAATE,SAAS;IACT3L,QAAQ,GAAAyL,KAAA,CAARzL,QAAQ,CAAA;EAER,IAAA4L,qBAAA,GAAiDC,cAAK,CAACC,QAAQ,CAACC,OAAO,CAAC/L,QAAQ,CAAC;IAAAgM,sBAAA,GAAAC,cAAA,CAAAL,qBAAA,EAAA,CAAA,CAAA;AAAAM,IAAAA,sBAAA,GAAAF,sBAAA,CAAA,CAAA,CAAA;AAA1EG,IAAAA,YAAY,GAAAD,sBAAA,KAAG,KAAA,CAAA,GAAA,IAAI,GAAAA,sBAAA;AAAAE,IAAAA,sBAAA,GAAAJ,sBAAA,CAAA,CAAA,CAAA;AAAEK,IAAAA,UAAU,GAAAD,sBAAA,KAAG,KAAA,CAAA,GAAA,IAAI,GAAAA,sBAAA,CAAA;AAC7C,EAAA,IAAAE,iBAAA,GAAkCjM,eAAe,EAAQ;IAAjD2D,UAAU,GAAAsI,iBAAA,CAAVtI,UAAU;IAAEuI,SAAS,GAAAD,iBAAA,CAATC,SAAS,CAAA;EAC7B,IAAMC,SAAS,GAAGC,MAAM,CAACnK,QAAQ,CAACO,SAAS,CAACmB,UAAU,CAAC,CAAC,CAAA;EAExD,IAAM0I,UAAU,GAAG,SAAbA,UAAUA,CAAIpE,IAAqB,EAAEqE,KAAa,EAAa;IACnE,IAAIA,KAAK,KAAK,CAAC,EAAE;AACf,MAAA,OAAOjB,YAAY,KAAZA,IAAAA,IAAAA,YAAY,KAAZA,KAAAA,CAAAA,GAAAA,YAAY,GAAIc,SAAS,CAAA;AAClC,KAAA;IACA,OAAOb,SAAS,GAAGA,SAAS,CAACrD,IAAI,EAAEqE,KAAK,GAAG,CAAC,CAAC,GAAGH,SAAS,CAAA;GAC1D,CAAA;AAED,EAAA,IAAMI,YAAY,gBAChBf,cAAK,CAACgB,cAAc,CAACR,UAAU,CAAC,IAChCA,UAAU,CAACS,KAAK,IAChBC,OAAA,CAAOV,UAAU,CAACS,KAAK,CAAK,KAAA,QAAQ,IACpC,UAAU,IAAIT,UAAU,CAACS,KAAK,GAC1BT,UAAU,CAACS,KAAK,CAAC9M,QAAQ,GACzB,IAAI,CAAA;EAEV,oBACEO,GAAA,CAACyM,WAAW,EAAA;AACVC,IAAAA,SAAS,EAAEV,SAAU;AACrBZ,IAAAA,SAAS,EAAEe,UAA4B;IACvCQ,MAAM,EAAE,SAARA,MAAMA,GAAA;AAAA,MAAA,OAAQf,YAAY,CAAA;KAAC;AAC3BgB,IAAAA,IAAI,EAAEP,YAAAA;AAA0E,GACjF,CAAC,CAAA;AAEN,CAAC,CAAA;AAED,IAAM9B,QAAQ,gBAAGhK,wBAAwB,CAACoH,SAAS,EAAE;EACnDpJ,WAAW,EAAEiC,YAAY,CAAC+J,QAAAA;AAC5B,CAAC,EAAC;AAEF,IAAMsC,uBAAuB,gBAAGtM,wBAAwB,CAAC0K,WAAW,EAAE;EACpE1M,WAAW,EAAEiC,YAAY,CAACsM,gBAAAA;AAC5B,CAAC;;;;"}