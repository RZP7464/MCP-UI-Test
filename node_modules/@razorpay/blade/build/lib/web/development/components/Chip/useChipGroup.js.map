{"version":3,"file":"useChipGroup.js","sources":["../../../../../../src/components/Chip/useChipGroup.ts"],"sourcesContent":["import React from 'react';\nimport type { ChipGroupProps, ChipGroupContextType, State } from './types';\nimport isUndefined from '~utils/lodashButBetter/isUndefined';\nimport { useControllableState } from '~utils/useControllable';\nimport { useId } from '~utils/useId';\n\ntype UseChipGroupProps = Pick<\n  ChipGroupProps,\n  | 'isDisabled'\n  | 'isRequired'\n  | 'necessityIndicator'\n  | 'validationState'\n  | 'name'\n  | 'value'\n  | 'defaultValue'\n  | 'onChange'\n  | 'size'\n  | 'color'\n  | 'selectionType'\n>;\ntype UseChipGroupReturn = {\n  state: State;\n  contextValue: ChipGroupContextType;\n  ids: { labelId: string };\n};\n\nconst useChipGroup = ({\n  value,\n  defaultValue,\n  isDisabled,\n  isRequired,\n  onChange,\n  name,\n  size,\n  color,\n  selectionType,\n  necessityIndicator,\n  validationState,\n}: UseChipGroupProps): UseChipGroupReturn => {\n  const idBase = useId('chip-group');\n  const labelId = `${idBase}-label`;\n  const fallbackName = name ?? idBase;\n  const [checkedValues, setValues] = useControllableState({\n    value: (value && selectionType === 'single' ? [value] : value) as string[] | undefined,\n    // If selectionType is single, we need to convert the value to an array\n    defaultValue: (defaultValue && selectionType === 'single'\n      ? [defaultValue]\n      : defaultValue || []) as string[] | undefined,\n    onChange: (values: string[]) => onChange?.({ values, name: fallbackName }),\n  });\n\n  const state = React.useMemo<State>(() => {\n    return {\n      value: checkedValues,\n      isChecked(value: string): boolean {\n        if (selectionType === 'single') {\n          if (isUndefined(value) || isUndefined(checkedValues)) return false;\n          return checkedValues[0] === value;\n        }\n        return checkedValues.includes(value);\n      },\n      addValue(value: string) {\n        if (isDisabled) {\n          return;\n        }\n        if (selectionType === 'single') {\n          setValues(() => [value]);\n        }\n        if (selectionType === 'multiple' && !checkedValues.includes(value)) {\n          setValues(() => checkedValues.concat(value));\n        }\n      },\n      removeValue(value: string) {\n        if (isDisabled) {\n          return;\n        }\n        if (selectionType === 'single') {\n          setValues(undefined!);\n        }\n        if (\n          selectionType === 'multiple' &&\n          Array.isArray(checkedValues) &&\n          checkedValues.includes(value)\n        ) {\n          setValues(() => checkedValues.filter((existingValue) => existingValue !== value));\n        }\n      },\n    };\n  }, [checkedValues, isDisabled, setValues, selectionType]);\n\n  const contextValue = React.useMemo<ChipGroupContextType>(() => {\n    return {\n      isDisabled,\n      isRequired,\n      necessityIndicator,\n      validationState,\n      name,\n      state,\n      size,\n      color,\n      selectionType,\n    };\n  }, [\n    isDisabled,\n    isRequired,\n    necessityIndicator,\n    validationState,\n    name,\n    state,\n    size,\n    color,\n    selectionType,\n  ]);\n\n  return { state, contextValue, ids: { labelId } };\n};\n\nexport { useChipGroup };\n"],"names":["useChipGroup","_ref","value","defaultValue","isDisabled","isRequired","onChange","name","size","color","selectionType","necessityIndicator","validationState","idBase","useId","labelId","concat","fallbackName","_useControllableState","useControllableState","values","_useControllableState2","_slicedToArray","checkedValues","setValues","state","React","useMemo","isChecked","isUndefined","includes","addValue","removeValue","undefined","Array","isArray","filter","existingValue","contextValue","ids"],"mappings":"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"}