{"version":3,"file":"Calendar.web.js","sources":["../../../../../../src/components/DatePicker/Calendar.web.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport dayjs from 'dayjs';\nimport React from 'react';\nimport type { CalendarLevel, DatesRangeValue } from '@mantine/dates';\nimport { useDatesContext, DatePicker } from '@mantine/dates';\nimport type { CalendarProps, DateSelectionType, PickerType, DateValue } from './types';\nimport { CalendarHeader } from './CalendarHeader';\nimport { CalendarGradientStyles, CalendarStyles } from './CalendarStyles';\nimport { useUncontrolledDates } from './useControlledDates';\nimport { levelToPicker, pickerToLevel, classes } from './constants';\nimport { shiftTimezone } from './shiftTimezone';\nimport { useControllableState } from '~utils/useControllable';\nimport { useIsMobile } from '~utils/useIsMobile';\nimport { throwBladeError } from '~utils/logger';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\nconst Calendar = <Type extends DateSelectionType>({\n  firstDayOfWeek = 0,\n  selectionType,\n  allowSingleDateInRange,\n  defaultPicker = 'day',\n  picker,\n  onPickerChange,\n  date,\n  defaultDate,\n  onDateChange,\n  onNext,\n  onPrevious,\n  presets,\n  showLevelChangeLink,\n  selectedValue,\n  ...props\n}: CalendarProps<Type> & {\n  date?: Date;\n  defaultDate?: Date;\n  onDateChange?: (date: DateValue) => void;\n  showLevelChangeLink?: boolean;\n  selectedValue: DatesRangeValue | null;\n}): React.ReactElement => {\n  const isRange = selectionType === 'range';\n\n  const [level, setLevel] = useControllableState<CalendarLevel>({\n    defaultValue: pickerToLevel[defaultPicker],\n    value: pickerToLevel[picker!],\n    onChange: (level) => {\n      onPickerChange?.(levelToPicker[level]);\n    },\n  });\n\n  if (__DEV__) {\n    if (isRange && level !== 'month') {\n      throwBladeError({\n        message: `Cannot use range DatePicker with pickerType: ${levelToPicker[level]}, Only \"day\" is supported`,\n        moduleName: 'DatePicker',\n      });\n    }\n  }\n\n  const [_date, setDate] = useUncontrolledDates({\n    type: 'default',\n    value: date,\n    defaultValue: defaultDate,\n    onChange: onDateChange,\n  });\n\n  const dateContext = useDatesContext();\n  const isMobile = useIsMobile();\n  const currentDate = React.useMemo(() => {\n    if (_date) {\n      return _date;\n    }\n    const isRangeSelection = Array.isArray(selectedValue);\n    if (isRangeSelection && selectedValue[0]) {\n      return selectedValue[0];\n    }\n    if (!isRangeSelection && selectedValue) {\n      return selectedValue;\n    }\n    return shiftTimezone('add', new Date());\n  }, [_date, selectedValue]);\n  const numberOfColumns = isMobile || !isRange ? 1 : 2;\n  const columnsToScroll = numberOfColumns;\n\n  const handleNextMonth = () => {\n    const nextDate = dayjs(currentDate).add(columnsToScroll, 'month').toDate();\n    onNext?.({ date: nextDate, type: 'month' });\n    setDate(nextDate);\n  };\n\n  const handlePreviousMonth = () => {\n    const nextDate = dayjs(currentDate).subtract(columnsToScroll, 'month').toDate();\n    onPrevious?.({ date: nextDate, type: 'month' });\n    setDate(nextDate);\n  };\n\n  const handleNextYear = () => {\n    const nextDate = dayjs(currentDate).add(columnsToScroll, 'year').toDate();\n    onNext?.({ date: nextDate, type: 'year' });\n    setDate(nextDate);\n  };\n\n  const handlePreviousYear = () => {\n    const nextDate = dayjs(currentDate).subtract(columnsToScroll, 'year').toDate();\n    onPrevious?.({ date: nextDate, type: 'year' });\n    setDate(nextDate);\n  };\n\n  const handleNextDecade = () => {\n    const nextDate = dayjs(currentDate)\n      .add(10 * columnsToScroll, 'year')\n      .toDate();\n    onNext?.({ date: nextDate, type: 'decade' });\n    setDate(nextDate);\n  };\n\n  const handlePreviousDecade = () => {\n    const nextDate = dayjs(currentDate)\n      .subtract(10 * columnsToScroll, 'year')\n      .toDate();\n    onPrevious?.({ date: nextDate, type: 'decade' });\n    setDate(nextDate);\n  };\n\n  return (\n    <CalendarStyles\n      display=\"flex\"\n      flexDirection=\"column\"\n      gap=\"spacing.7\"\n      pickerType={levelToPicker[level]}\n      {...metaAttribute({ name: MetaConstants.Calendar })}\n      {...makeAnalyticsAttribute(props)}\n    >\n      <CalendarHeader\n        isRange={isRange}\n        date={currentDate}\n        onLevelChange={(level) => setLevel(() => level)}\n        pickerType={levelToPicker[level] as PickerType}\n        onNextMonth={handleNextMonth}\n        onPreviousMonth={handlePreviousMonth}\n        onNextDecade={handleNextDecade}\n        onPreviousDecade={handlePreviousDecade}\n        onNextYear={handleNextYear}\n        onPreviousYear={handlePreviousYear}\n        showLevelChangeLink={showLevelChangeLink}\n      />\n      <CalendarGradientStyles isRange={isRange} date={currentDate}>\n        <DatePicker\n          withCellSpacing={false}\n          type={isRange ? 'range' : 'default'}\n          date={currentDate}\n          locale={dateContext.locale}\n          level={level}\n          onDateChange={setDate}\n          onLevelChange={(level) => setLevel(() => level)}\n          numberOfColumns={numberOfColumns}\n          weekdayFormat=\"ddd\"\n          firstDayOfWeek={firstDayOfWeek}\n          // @ts-expect-error unable to narrow props based on `type`\n          allowSingleDateInRange={allowSingleDateInRange}\n          classNames={{\n            monthLevelGroup: classes.levelsGroup,\n            yearLevelGroup: classes.levelsGroup,\n            decadeLevelGroup: classes.levelsGroup,\n            day: classes.dayCell,\n            monthsListCell: classes.yearsListControl,\n            yearsListCell: classes.monthsListControl,\n            monthCell: classes.dayCell,\n            calendarHeader: classes.calendarHeader,\n            monthRow: classes.row,\n            yearsListRow: classes.row,\n            monthsListRow: classes.row,\n            weekdaysRow: classes.row,\n            weekday: classes.weekday,\n          }}\n          {...props}\n        />\n      </CalendarGradientStyles>\n    </CalendarStyles>\n  );\n};\n\nexport { Calendar };\n"],"names":["Calendar","_ref","_ref$firstDayOfWeek","firstDayOfWeek","selectionType","allowSingleDateInRange","_ref$defaultPicker","defaultPicker","picker","onPickerChange","date","defaultDate","onDateChange","onNext","onPrevious","presets","showLevelChangeLink","selectedValue","props","_objectWithoutProperties","_excluded","isRange","_useControllableState","useControllableState","defaultValue","pickerToLevel","value","onChange","level","levelToPicker","_useControllableState2","_slicedToArray","setLevel","throwBladeError","message","concat","moduleName","_useUncontrolledDates","useUncontrolledDates","type","_useUncontrolledDates2","_date","setDate","dateContext","useDatesContext","isMobile","useIsMobile","currentDate","React","useMemo","isRangeSelection","Array","isArray","shiftTimezone","Date","numberOfColumns","columnsToScroll","handleNextMonth","nextDate","dayjs","add","toDate","handlePreviousMonth","subtract","handleNextYear","handlePreviousYear","handleNextDecade","handlePreviousDecade","_jsxs","CalendarStyles","_objectSpread","display","flexDirection","gap","pickerType","metaAttribute","name","MetaConstants","makeAnalyticsAttribute","children","_jsx","CalendarHeader","onLevelChange","onNextMonth","onPreviousMonth","onNextDecade","onPreviousDecade","onNextYear","onPreviousYear","CalendarGradientStyles","DatePicker","withCellSpacing","locale","weekdayFormat","classNames","monthLevelGroup","classes","levelsGroup","yearLevelGroup","decadeLevelGroup","day","dayCell","monthsListCell","yearsListControl","yearsListCell","monthsListControl","monthCell","calendarHeader","monthRow","row","yearsListRow","monthsListRow","weekdaysRow","weekday"],"mappings":"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"}