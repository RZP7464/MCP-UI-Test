{"version":3,"file":"LineChart.web.js","sources":["../../../../../../../src/components/Charts/LineChart/LineChart.web.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  LineChart as RechartsLineChart,\n  Line as RechartsLine,\n  ResponsiveContainer as RechartsResponsiveContainer,\n} from 'recharts';\nimport { useChartsColorTheme, assignDataColorMapping } from '../utils';\nimport { CommonChartComponentsContext } from '../CommonChartComponents';\nimport type { DataColorMapping } from '../CommonChartComponents/types';\nimport type { ChartLineProps, ChartLineWrapperProps } from './types';\nimport { componentIds } from './componentIds';\nimport { metaAttribute } from '~utils/metaAttribute';\nimport { useTheme } from '~components/BladeProvider';\nimport BaseBox from '~components/Box/BaseBox';\nimport getIn from '~utils/lodashButBetter/get';\nimport type { DataAnalyticsAttribute, TestID } from '~utils/types';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\nimport { getComponentId } from '~utils/isValidAllowedChildren';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\n\nconst Line: React.FC<ChartLineProps> = ({\n  color,\n  strokeStyle = 'solid',\n  type = 'monotone',\n  dot = false,\n  activeDot = true,\n  showLegend = true,\n  _index,\n  _colorTheme,\n  _totalLines,\n  ...props\n}) => {\n  const { theme } = useTheme();\n  const themeColors = useChartsColorTheme({\n    colorTheme: _colorTheme,\n    chartName: 'line',\n    chartDataIndicators: _totalLines,\n  });\n  const colorToken = getIn(theme.colors, color ?? themeColors[_index ?? 0]);\n\n  const strokeDasharray =\n    strokeStyle === 'dashed' ? '5 5' : strokeStyle === 'dotted' ? '2 2' : undefined;\n\n  const isLineDotted = strokeStyle === 'dashed';\n  const animationBegin = isLineDotted\n    ? theme.motion.delay.gentle + theme.motion.duration.xgentle\n    : theme.motion.delay.gentle;\n  const animationDuration = theme.motion.duration.xgentle;\n\n  return (\n    <RechartsLine\n      stroke={colorToken}\n      strokeWidth={1.5}\n      strokeDasharray={strokeDasharray}\n      type={type}\n      activeDot={activeDot}\n      dot={dot}\n      legendType={showLegend ? 'line' : 'none'}\n      animationBegin={animationBegin}\n      animationDuration={animationDuration}\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      {...props}\n    />\n  );\n};\n\nconst ChartLine = assignWithoutSideEffects(Line, {\n  componentId: componentIds.ChartLine,\n});\n\n// Main components\nconst ChartLineWrapper: React.FC<ChartLineWrapperProps & TestID & DataAnalyticsAttribute> = ({\n  children,\n  colorTheme = 'categorical',\n  testID,\n  data,\n  ...restProps\n}) => {\n  const themeColors = useChartsColorTheme({\n    colorTheme,\n    chartName: 'line',\n  });\n  /**\n   * We need to check child of CharLineWrapper. if they have any custom color we store that.\n   * We need these mapping because colors of tooltip & legend is determine based on this\n   *  recharts do provide a color but it is hex code and we need blade color token .\n   */\n\n  const { dataColorMapping, lineChartModifiedChildrens } = React.useMemo(() => {\n    const childrenArray = React.Children.toArray(children);\n    const dataColorMapping: DataColorMapping = {};\n    // Count ChartLine components\n    const totalLines = childrenArray.filter(\n      (child): child is React.ReactElement =>\n        React.isValidElement(child) && getComponentId(child) === componentIds.ChartLine,\n    ).length;\n\n    let LineChartIndex = 0;\n    const lineChartModifiedChildrens = React.Children.map(children, (child) => {\n      if (React.isValidElement(child) && getComponentId(child) === componentIds.ChartLine) {\n        const childColor = child?.props?.color;\n        const dataKey = (child?.props as ChartLineProps)?.dataKey as string;\n        if (dataKey) {\n          /**\n           *  if we have custom color given by user we use that other wise we just\n           *  assign theme colors to the dataColorMapping, in `assignDataColorMapping`\n           */\n          dataColorMapping[dataKey] = {\n            colorToken: childColor,\n            isCustomColor: Boolean(childColor),\n          };\n        }\n        return React.cloneElement(child, {\n          _index: LineChartIndex++,\n          _colorTheme: colorTheme,\n          _totaLine: totalLines,\n        } as Partial<ChartLineProps>);\n      }\n      return child;\n    });\n    assignDataColorMapping(dataColorMapping, themeColors);\n\n    return { dataColorMapping, lineChartModifiedChildrens, totalLines };\n  }, [children, colorTheme, themeColors]);\n\n  return (\n    <CommonChartComponentsContext.Provider value={{ chartName: 'line', dataColorMapping }}>\n      <BaseBox\n        {...metaAttribute({ name: 'line-chart', testID })}\n        {...makeAnalyticsAttribute(restProps)}\n        width=\"100%\"\n        height=\"100%\"\n        {...restProps}\n      >\n        <RechartsResponsiveContainer width=\"100%\" height=\"100%\">\n          <RechartsLineChart data={data}>{lineChartModifiedChildrens}</RechartsLineChart>\n        </RechartsResponsiveContainer>\n      </BaseBox>\n    </CommonChartComponentsContext.Provider>\n  );\n};\n\nexport { ChartLine, ChartLineWrapper };\n"],"names":["Line","_ref","color","_ref$strokeStyle","strokeStyle","_ref$type","type","_ref$dot","dot","_ref$activeDot","activeDot","_ref$showLegend","showLegend","_index","_colorTheme","_totalLines","props","_objectWithoutProperties","_excluded","_useTheme","useTheme","theme","themeColors","useChartsColorTheme","colorTheme","chartName","chartDataIndicators","colorToken","getIn","colors","strokeDasharray","undefined","isLineDotted","animationBegin","motion","delay","gentle","duration","xgentle","animationDuration","_jsx","RechartsLine","_objectSpread","stroke","strokeWidth","legendType","strokeLinecap","strokeLinejoin","ChartLine","assignWithoutSideEffects","componentId","componentIds","ChartLineWrapper","_ref2","children","_ref2$colorTheme","testID","data","restProps","_excluded2","_React$useMemo","React","useMemo","childrenArray","Children","toArray","dataColorMapping","totalLines","filter","child","isValidElement","getComponentId","length","LineChartIndex","lineChartModifiedChildrens","map","_child$props","_child$props2","childColor","dataKey","isCustomColor","Boolean","cloneElement","_totaLine","assignDataColorMapping","CommonChartComponentsContext","Provider","value","BaseBox","metaAttribute","name","makeAnalyticsAttribute","width","height","RechartsResponsiveContainer","RechartsLineChart"],"mappings":"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"}