{"version":3,"file":"List.js","sources":["../../../../../../src/components/List/List.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport styled from 'styled-components';\nimport { ListProvider, useListContext } from './ListContext';\nimport { UnorderedList } from './UnorderedList';\nimport { OrderedList } from './OrderedList';\nimport type { ListItemProps } from './ListItem';\nimport getIn from '~utils/lodashButBetter/get';\nimport type { IconComponent, IconProps } from '~components/Icons';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { BladeElementRef, DotNotationSpacingStringToken, TestID } from '~utils/types';\nimport BaseBox from '~components/Box/BaseBox';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { makeSpace } from '~utils/makeSpace';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { isValidAllowedChildren } from '~utils/isValidAllowedChildren';\nimport { throwBladeError } from '~utils/logger';\n\ntype ListCommonProps = {\n  /**\n   * ListItem to be rendered for the List.\n   *\n   */\n  children: React.ReactElement<ListItemProps> | React.ReactElement<ListItemProps>[];\n  /**\n   * Sets the variant to be rendered for the List.\n   *\n   * @default 'unordered'\n   */\n  variant?: 'unordered' | 'ordered' | 'ordered-filled';\n  /**\n   * Sets the size for the List.\n   *\n   * @default 'medium'\n   */\n  size?: 'small' | 'medium' | 'large';\n} & TestID &\n  StyledPropsBlade;\n\ntype ListWithIconProps = ListCommonProps & {\n  variant?: 'unordered';\n  icon?: IconComponent;\n  iconColor?: IconProps['color'];\n};\ntype ListWithoutIconProps = ListCommonProps & {\n  variant?: 'ordered' | 'ordered-filled';\n  icon?: undefined;\n  iconColor?: undefined;\n};\ntype ListProps = ListWithIconProps | ListWithoutIconProps;\n\nconst StyledOrderedList = styled(OrderedList)<{ marginTop?: DotNotationSpacingStringToken }>(\n  ({ marginTop, theme }) => ({\n    marginTop: marginTop ? makeSpace(getIn(theme, marginTop)) : undefined,\n  }),\n);\n\nconst StyledUnorderedList = styled(UnorderedList)<{ marginTop?: DotNotationSpacingStringToken }>(\n  ({ marginTop, theme }) => ({\n    marginTop: marginTop ? makeSpace(getIn(theme, marginTop)) : undefined,\n  }),\n);\n\n/**\n * List Component is used to display a set of related items that are composed of text/links. Each list item begins with a bullet or a number.\n *\n * ## Usage\n *\n * ```tsx\n *   <List\n *     variant='unordered'\n *     size='medium'\n *   >\n *    <ListItem>\n *      Item 1\n *      <List>\n *        <ListItem>Item 1.1</ListItem>\n *      </List>\n *    </ListItem>\n *    <ListItem>Item 2</ListItem>\n *  <List />\n * ```\n */\nconst _List = (\n  { variant = 'unordered', size, children, icon, testID, iconColor, ...styledProps }: ListProps,\n  ref: React.Ref<BladeElementRef>,\n): React.ReactElement => {\n  const ListElement = variant === 'unordered' ? StyledUnorderedList : StyledOrderedList;\n  const { level, size: listContextSize } = useListContext();\n  const listContextValue = useMemo(\n    () => ({\n      level: level ? level + 1 : 1,\n      size: size ?? listContextSize,\n      icon,\n      iconColor,\n      variant,\n    }),\n    [icon, iconColor, level, listContextSize, size, variant],\n  );\n\n  const childrenArray = React.Children.toArray(children);\n  const childListItems = childrenArray.filter((child) => {\n    if (isValidAllowedChildren(child, MetaConstants.ListItem)) {\n      return child;\n    }\n    if (__DEV__) {\n      throwBladeError({\n        message: 'You can only pass a ListItem as a child to List.',\n        moduleName: 'List',\n      });\n    }\n    return null;\n  });\n\n  return (\n    <ListProvider value={listContextValue}>\n      <BaseBox ref={ref as never} {...getStyledProps(styledProps)}>\n        <ListElement\n          {...metaAttribute({ name: MetaConstants.List, testID })}\n          {...makeAccessible({ role: 'list' })} // Role needed for react-native\n        >\n          {variant === 'unordered'\n            ? childListItems\n            : childListItems.map(\n                (child, index) =>\n                  React.cloneElement(child as React.ReactElement, { _itemNumber: index + 1 }), // adds _itemNumber for rendering ordered list bullets\n              )}\n        </ListElement>\n      </BaseBox>\n    </ListProvider>\n  );\n};\n\nconst List = assignWithoutSideEffects(React.forwardRef(_List), { componentId: MetaConstants.List });\n\nexport { List };\nexport type { ListProps };\n"],"names":["StyledOrderedList","styled","OrderedList","withConfig","displayName","componentId","_ref","marginTop","theme","makeSpace","getIn","undefined","StyledUnorderedList","UnorderedList","_ref2","_List","_ref3","ref","_ref3$variant","variant","size","children","icon","testID","iconColor","styledProps","_objectWithoutProperties","_excluded","ListElement","_useListContext","useListContext","level","listContextSize","listContextValue","useMemo","childrenArray","React","Children","toArray","childListItems","filter","child","isValidAllowedChildren","MetaConstants","ListItem","throwBladeError","message","moduleName","_jsx","ListProvider","value","BaseBox","_objectSpread","getStyledProps","metaAttribute","name","List","makeAccessible","role","map","index","cloneElement","_itemNumber","assignWithoutSideEffects","forwardRef"],"mappings":"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"}