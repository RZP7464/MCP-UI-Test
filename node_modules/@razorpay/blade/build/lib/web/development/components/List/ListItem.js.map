{"version":3,"file":"ListItem.js","sources":["../../../../../../src/components/List/ListItem.tsx"],"sourcesContent":["import styled from 'styled-components';\nimport React from 'react';\nimport { useListContext } from './ListContext';\nimport { UnorderedItemIcon } from './ListItemIcons';\nimport { ListItemElement } from './ListItemElement';\nimport {\n  listItemBulletMarginRight,\n  listItemBulletMarginTop,\n  listItemOrderedBulletBoxSize,\n  listItemMarginBottom,\n  listItemMarginLeft,\n} from './listTokens';\nimport type { ListProps } from './List';\nimport { getOrderedListItemBullet } from './getOrderedListItemBullet';\nimport getIn from '~utils/lodashButBetter/get';\nimport { Text } from '~components/Typography';\nimport type { IconComponent } from '~components/Icons';\nimport { useTheme } from '~components/BladeProvider';\nimport BaseBox from '~components/Box/BaseBox';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { TestID } from '~utils/types';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { getComponentId, isValidAllowedChildren } from '~utils/isValidAllowedChildren';\nimport { getPlatformType } from '~utils/getPlatformType';\nimport { throwBladeError } from '~utils/logger';\n\ntype ListItemProps = {\n  /**\n   * Children to be rendered for ListItem. This can be a text, ListItemLink or another List.\n   *\n   */\n  children: React.ReactNode;\n  /**\n   * Icon to be rendered for a ListItem's bullet.\n   *\n   */\n  icon?: IconComponent;\n  /**\n   * Icon color of the ListItem's bullet.\n   *\n   */\n  iconColor?: ListProps['iconColor'];\n  /**\n   * This is a private prop to be used only for internal logic purposes.\n   *\n   */\n  _itemNumber?: undefined;\n} & TestID;\n\nconst StyledListItem = styled(ListItemElement)<{\n  level?: number;\n  variant: NonNullable<ListProps['variant']>;\n  hasIcon: boolean;\n}>(({ level, theme, variant, hasIcon }) => ({\n  marginLeft: level\n    ? getIn(\n        theme,\n        listItemMarginLeft[\n          `${variant}${variant === 'unordered' && hasIcon ? 'WithIcon' : ''}` as NonNullable<\n            ListProps['variant'] | 'unorderedWithIcon'\n          >\n        ][level],\n      )\n    : 0,\n}));\n\nconst ListItemContentChildren = ({\n  children,\n  size,\n}: {\n  children: React.ReactNode[];\n  size: NonNullable<ListProps['size']>;\n}): React.ReactElement => {\n  /* Having a <View><Text>...</Text><View/> inside <Text /> breaks vertical alignment. Issue: https://github.com/facebook/react-native/issues/31955\n    As a workaround, we wrap individual strings in their own <Text /> and handle alignment with a parent <View> (BaseBox).\n   */\n  return getPlatformType() === 'react-native' ? (\n    <BaseBox display=\"flex\" flexDirection=\"row\" flexWrap=\"wrap\">\n      {children.map((child, index) => {\n        if (typeof child === 'string') {\n          return (\n            <Text key={index} variant=\"body\" size={size}>\n              {child}\n            </Text>\n          );\n        }\n        return child;\n      })}\n    </BaseBox>\n  ) : (\n    <Text variant=\"body\" size={size}>\n      {children}\n    </Text>\n  );\n};\n\nconst _ListItem = ({\n  children,\n  icon: Icon,\n  iconColor: listItemIconColor,\n  _itemNumber,\n  testID,\n}: ListItemProps): React.ReactElement => {\n  const { level, size, icon: ListContextIcon, variant, iconColor } = useListContext();\n  const { theme, platform } = useTheme();\n  const ItemIcon = Icon ?? ListContextIcon;\n  const iconColorToken = listItemIconColor ?? iconColor ?? 'surface.icon.gray.muted';\n\n  if (__DEV__) {\n    if (level && level > 3) {\n      throwBladeError({\n        message: 'List Nesting is allowed only upto 3 levels.',\n        moduleName: 'List',\n      });\n    }\n  }\n\n  const childrenArray = React.Children.toArray(children);\n\n  // Get children that are not a List component and are valid allowed children\n  const validChildItem = childrenArray.filter((child) => {\n    if (getComponentId(child) === MetaConstants.List) return null;\n\n    if (\n      typeof child === 'string' ||\n      typeof child === 'number' ||\n      isValidAllowedChildren(child, MetaConstants.ListItemLink) ||\n      isValidAllowedChildren(child, MetaConstants.ListItemText) ||\n      isValidAllowedChildren(child, MetaConstants.ListItemCode)\n    ) {\n      return child;\n    } else if (__DEV__) {\n      throwBladeError({\n        message: `You can only pass a List, ListItemLink, ListItemCode, ListItemText or a string as a child to ListItem.`,\n        moduleName: 'ListItem',\n      });\n    }\n    return null;\n  });\n  // Get child that is a List component\n  const childList = childrenArray.filter((child) =>\n    getComponentId(child) === MetaConstants.List ? child : null,\n  );\n  const hasIcon = Boolean(ItemIcon);\n\n  return (\n    <StyledListItem\n      level={level}\n      variant={variant}\n      hasIcon={hasIcon}\n      {...metaAttribute({ name: MetaConstants.ListItem, testID })}\n    >\n      <BaseBox\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        marginBottom={listItemMarginBottom}\n      >\n        {variant === 'unordered' ? (\n          <BaseBox\n            marginRight={listItemBulletMarginRight[variant]}\n            marginTop={\n              listItemBulletMarginTop[`${variant}${hasIcon ? 'WithIcon' : ''}`][platform][size]\n            }\n            display=\"flex\"\n            alignSelf=\"flex-start\"\n          >\n            {ItemIcon ? (\n              <ItemIcon size={size} color={iconColorToken} />\n            ) : (\n              <UnorderedItemIcon level={level} />\n            )}\n          </BaseBox>\n        ) : (\n          <BaseBox\n            width={listItemOrderedBulletBoxSize[variant][platform][size]}\n            height={listItemOrderedBulletBoxSize[variant][platform][size]}\n            marginRight={listItemBulletMarginRight[variant]}\n            marginTop={listItemBulletMarginTop[variant][platform][size]}\n            display=\"flex\"\n            flexShrink={0}\n            justifyContent=\"center\"\n            alignSelf=\"flex-start\"\n            alignItems=\"center\"\n            borderRadius={variant === 'ordered-filled' ? 'max' : undefined}\n            backgroundColor={\n              variant === 'ordered-filled'\n                ? getIn(theme.colors, 'feedback.background.neutral.subtle')\n                : undefined\n            }\n          >\n            <Text\n              variant=\"body\"\n              color=\"surface.text.gray.muted\"\n              size={variant === 'ordered' ? size : 'xsmall'}\n            >\n              {`${getOrderedListItemBullet({\n                itemNumber: _itemNumber ?? 1,\n                level: level ?? 1,\n              })}${variant === 'ordered' ? '.' : ''}`}\n            </Text>\n          </BaseBox>\n        )}\n        <ListItemContentChildren size={size}>{validChildItem}</ListItemContentChildren>\n      </BaseBox>\n      {childList}\n    </StyledListItem>\n  );\n};\n\nconst ListItem = assignWithoutSideEffects(_ListItem, { componentId: MetaConstants.ListItem });\n\nexport { ListItem };\nexport type { ListItemProps };\n"],"names":["StyledListItem","styled","ListItemElement","withConfig","displayName","componentId","_ref","level","theme","variant","hasIcon","marginLeft","getIn","listItemMarginLeft","concat","ListItemContentChildren","_ref2","children","size","getPlatformType","_jsx","BaseBox","display","flexDirection","flexWrap","map","child","index","Text","_ListItem","_ref3","_ref4","Icon","icon","listItemIconColor","iconColor","_itemNumber","testID","_useListContext","useListContext","ListContextIcon","_useTheme","useTheme","platform","ItemIcon","iconColorToken","throwBladeError","message","moduleName","childrenArray","React","Children","toArray","validChildItem","filter","getComponentId","MetaConstants","List","isValidAllowedChildren","ListItemLink","ListItemText","ListItemCode","childList","Boolean","_jsxs","_objectSpread","metaAttribute","name","ListItem","alignItems","marginBottom","listItemMarginBottom","marginRight","listItemBulletMarginRight","marginTop","listItemBulletMarginTop","alignSelf","color","UnorderedItemIcon","width","listItemOrderedBulletBoxSize","height","flexShrink","justifyContent","borderRadius","undefined","backgroundColor","colors","getOrderedListItemBullet","itemNumber","assignWithoutSideEffects"],"mappings":"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"}