{"version":3,"file":"isFileAccepted.js","sources":["../../../../../../src/components/FileUpload/isFileAccepted.tsx"],"sourcesContent":["import type { BladeFile } from './types';\n\n/**\n * Check if the provided file type should be accepted by the input with accept attribute.\n * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input#attr-accept\n *\n * Inspired by https://github.com/enyo/dropzone\n */\nconst isFileAccepted = (file: BladeFile, acceptedFiles: string): boolean => {\n  if (file && acceptedFiles) {\n    const acceptedFilesArray = acceptedFiles.split(',');\n    const fileName = file.name || '';\n    const mimeType = (file.type || '').toLowerCase();\n    const baseMimeType = mimeType.replace(/\\/.*$/, '');\n\n    return acceptedFilesArray.some((type) => {\n      const validType = type.trim().toLowerCase();\n      if (validType.startsWith('.')) {\n        return fileName.toLowerCase().endsWith(validType);\n      } else if (validType.endsWith('/*')) {\n        // This is something like a image/* mime type\n        return baseMimeType === validType.replace(/\\/.*$/, '');\n      }\n      return mimeType === validType;\n    });\n  }\n  return true;\n};\n\nexport { isFileAccepted };\n"],"names":["isFileAccepted","file","acceptedFiles","acceptedFilesArray","split","fileName","name","mimeType","type","toLowerCase","baseMimeType","replace","some","validType","trim","startsWith","endsWith"],"mappings":"AAEA;AACA;AACA;AACA;AACA;AACA;AACMA,IAAAA,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,IAAe,EAAEC,aAAqB,EAAc;EAC1E,IAAID,IAAI,IAAIC,aAAa,EAAE;AACzB,IAAA,IAAMC,kBAAkB,GAAGD,aAAa,CAACE,KAAK,CAAC,GAAG,CAAC,CAAA;AACnD,IAAA,IAAMC,QAAQ,GAAGJ,IAAI,CAACK,IAAI,IAAI,EAAE,CAAA;IAChC,IAAMC,QAAQ,GAAG,CAACN,IAAI,CAACO,IAAI,IAAI,EAAE,EAAEC,WAAW,EAAE,CAAA;IAChD,IAAMC,YAAY,GAAGH,QAAQ,CAACI,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAA;AAElD,IAAA,OAAOR,kBAAkB,CAACS,IAAI,CAAC,UAACJ,IAAI,EAAK;MACvC,IAAMK,SAAS,GAAGL,IAAI,CAACM,IAAI,EAAE,CAACL,WAAW,EAAE,CAAA;AAC3C,MAAA,IAAII,SAAS,CAACE,UAAU,CAAC,GAAG,CAAC,EAAE;QAC7B,OAAOV,QAAQ,CAACI,WAAW,EAAE,CAACO,QAAQ,CAACH,SAAS,CAAC,CAAA;OAClD,MAAM,IAAIA,SAAS,CAACG,QAAQ,CAAC,IAAI,CAAC,EAAE;AACnC;QACA,OAAON,YAAY,KAAKG,SAAS,CAACF,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAA;AACxD,OAAA;MACA,OAAOJ,QAAQ,KAAKM,SAAS,CAAA;AAC/B,KAAC,CAAC,CAAA;AACJ,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACb;;;;"}