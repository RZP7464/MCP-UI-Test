{"version":3,"file":"BaseDropdownInputTrigger.js","sources":["../../../../../../../src/components/Input/DropdownInputTriggers/BaseDropdownInputTrigger.tsx"],"sourcesContent":["import React from 'react';\nimport { BaseInput } from '../BaseInput';\nimport type { BaseInputProps } from '../BaseInput';\nimport { InputChevronIcon } from './InputChevronIcon';\nimport type { BaseDropdownInputTriggerProps } from './types';\nimport { useDropdown } from '~components/Dropdown/useDropdown';\nimport { isReactNative } from '~utils';\nimport { getActionListContainerRole } from '~components/ActionList/getA11yRoles';\nimport { MetaConstants } from '~utils/metaAttribute';\nimport { getTagsGroup } from '~components/Tag/getTagsGroup';\nimport type { BladeElementRef } from '~utils/types';\nimport { useTableContext } from '~components/Table/TableContext';\nimport {\n  rowDensityToIsTableInputCellMapping,\n  tableEditableCellRowDensityToInputSizeMap,\n  validationStateToInputTrailingIconMap,\n} from '~components/Table/tokens';\nimport { useTableEditableCell } from '~components/Table/TableEditableCellContext';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\nimport { dropdownComponentIds } from '~components/Dropdown/dropdownComponentIds';\nimport { useControlledDropdownInput } from '~utils/useControlledDropdownInput';\n\nconst _BaseDropdownInputTrigger = (\n  props: BaseDropdownInputTriggerProps,\n  ref: React.ForwardedRef<BladeElementRef>,\n): React.ReactElement => {\n  const {\n    isOpen,\n    activeTagIndex,\n    setActiveTagIndex,\n    displayValue,\n    selectionType,\n    dropdownTriggerer,\n    dropdownBaseId,\n    selectedIndices,\n    triggererRef,\n    headerAutoCompleteRef,\n    triggererWrapperRef,\n    isTagDismissedRef,\n    onTriggerClick,\n    value,\n    shouldIgnoreBlurAnimation,\n    setShouldIgnoreBlurAnimation,\n    activeIndex,\n    hasFooterAction,\n    options,\n    removeOption,\n    setChangeCallbackTriggerer,\n    changeCallbackTriggerer,\n  } = useDropdown();\n  const { rowDensity } = useTableContext();\n  const { isInsideTableEditableCell } = useTableEditableCell();\n\n  const dropdownTriggerPlaceholder = props.placeholder ?? 'Select Option';\n  const isAutoCompleteInHeader =\n    !props.isSelectInput && dropdownTriggerer !== dropdownComponentIds.triggers.AutoComplete;\n\n  const getShowAllTags = React.useCallback((): boolean => {\n    if (isAutoCompleteInHeader) {\n      // When AutoComplete is in bottomsheet header, we never want to show all tags in outer select input\n      if (props.isSelectInput) {\n        return false;\n      }\n\n      // ... And we always want to show all tags in inner AutoComplete\n      return true;\n    }\n\n    return isOpen;\n  }, [isAutoCompleteInHeader, props.isSelectInput, isOpen]);\n\n  useControlledDropdownInput({\n    onChange: props.onChange,\n    name: props.name,\n    value: props.value,\n    defaultValue: props.defaultValue,\n    syncInputValueWithSelection: props.syncInputValueWithSelection,\n    isSelectInput: props.isSelectInput,\n    triggererRef,\n  });\n\n  const getValue = (): string | undefined => {\n    let prefix = '';\n    if (props.labelPosition === 'inside-input' && props.label) {\n      prefix = `${props.label}: `;\n    }\n\n    if (props.isSelectInput) {\n      if (selectionType === 'single') {\n        return `${prefix}${displayValue}`;\n      }\n\n      // In multiselect, we return tags so no display value is required\n      return undefined;\n    }\n\n    // In AutoComplete, input has a special value too\n    return props.inputValue;\n  };\n\n  const getTags = React.useMemo(\n    () => ({ size }: { size: NonNullable<BaseInputProps['size']> }) => {\n      if (selectionType === 'single') {\n        return undefined;\n      }\n\n      return getTagsGroup({\n        size,\n        tags: selectedIndices.map((selectedIndex) => options[selectedIndex]?.title),\n        activeTagIndex,\n        isDisabled: props.isDisabled,\n        onDismiss: ({ tagIndex }) => {\n          if (isTagDismissedRef.current) {\n            isTagDismissedRef.current.value = true;\n          }\n\n          if (!isReactNative()) {\n            triggererRef.current?.focus();\n          }\n\n          removeOption(selectedIndices[tagIndex]);\n          setChangeCallbackTriggerer(Number(changeCallbackTriggerer) + 1);\n        },\n      });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [selectedIndices, selectionType, activeTagIndex, changeCallbackTriggerer, options],\n  );\n\n  const tableInputProps: Partial<BaseInputProps> = {\n    isTableInputCell: rowDensityToIsTableInputCellMapping[rowDensity],\n    id: 'table-editable-cell-input',\n    size: tableEditableCellRowDensityToInputSizeMap[rowDensity],\n    trailingIcon: validationStateToInputTrailingIconMap[props.validationState ?? 'none'],\n    showHintsAsTooltip: true,\n  };\n\n  const isValidationStateNone =\n    props.validationState === 'none' || props.validationState === undefined;\n\n  return (\n    <BaseInput\n      as={props.isSelectInput ? 'button' : 'input'}\n      ref={\n        (isReactNative()\n          ? null\n          : // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (node: any) => {\n              if (isAutoCompleteInHeader) {\n                headerAutoCompleteRef.current = node;\n              } else {\n                triggererRef.current = node;\n              }\n\n              if (ref) {\n                if (typeof ref === 'function') {\n                  ref(node);\n                } else {\n                  ref.current = node;\n                }\n              }\n            }) as never\n      }\n      isDropdownTrigger={true}\n      setInputWrapperRef={(wrapperNode) => {\n        // when autocomplete is in header, its not a trigger but a component inside of DropdownOverlay\n        if (!isAutoCompleteInHeader) {\n          triggererWrapperRef.current = wrapperNode;\n        }\n      }}\n      maxTagRows={props.maxRows ?? 'single'}\n      tags={getTags({ size: props.size || 'medium' })}\n      showAllTags={getShowAllTags()}\n      activeTagIndex={activeTagIndex}\n      setActiveTagIndex={setActiveTagIndex}\n      shouldIgnoreBlurAnimation={shouldIgnoreBlurAnimation}\n      setShouldIgnoreBlurAnimation={setShouldIgnoreBlurAnimation}\n      textAlign=\"left\"\n      // Form Props\n      label={props.label as string}\n      placeholder={\n        selectionType === 'multiple' && selectedIndices.length > 0\n          ? undefined\n          : dropdownTriggerPlaceholder\n      }\n      hideLabelText={props.label?.length === 0}\n      accessibilityLabel={props.accessibilityLabel}\n      labelPosition={props.labelPosition === 'inside-input' ? undefined : props.labelPosition}\n      isLabelInsideInput={props.labelPosition === 'inside-input'}\n      necessityIndicator={props.necessityIndicator}\n      autoCompleteSuggestionType=\"none\"\n      validationState={props.validationState}\n      helpText={props.helpText}\n      errorText={props.errorText}\n      successText={props.successText}\n      name={props.name}\n      isDisabled={props.isDisabled}\n      isRequired={props.isRequired}\n      prefix={props.prefix}\n      suffix={props.suffix}\n      valueSuffix={\n        typeof props.valueSuffix === 'function'\n          ? props.valueSuffix({\n              values: options\n                .filter((option, index) => selectedIndices.includes(index))\n                .map((option) => option.value),\n            })\n          : undefined\n      }\n      autoFocus={props.autoFocus} // eslint-disable-line jsx-a11y/no-autofocus\n      value={getValue()}\n      onClick={(e) => {\n        if (props.isDisabled) {\n          return;\n        }\n        props.onTriggerClick?.(e);\n      }}\n      onFocus={props.onFocus}\n      onBlur={({ name }) => {\n        props.onBlur?.({ name, value });\n      }}\n      leadingIcon={props.icon}\n      // Meta Props\n      componentName={props.isSelectInput ? MetaConstants.SelectInput : MetaConstants.AutoComplete}\n      testID={props.testID}\n      // a11y Props\n      id={`${dropdownBaseId}-trigger`}\n      labelId={`${dropdownBaseId}-label`}\n      role={isAutoCompleteInHeader ? 'searchbox' : 'combobox'}\n      hasPopup={\n        isAutoCompleteInHeader\n          ? false\n          : getActionListContainerRole(hasFooterAction, dropdownTriggerer)\n      }\n      isPopupExpanded={isOpen}\n      activeDescendant={activeIndex >= 0 ? `${dropdownBaseId}-${activeIndex}` : undefined}\n      popupId={isAutoCompleteInHeader ? undefined : `${dropdownBaseId}-actionlist`}\n      // Special Props for Unique behaviour between Select and AutoComplete\n      onChange={props.isSelectInput ? undefined : props.onInputValueChange}\n      onKeyDown={props.onTriggerKeydown}\n      size={props.size}\n      {...makeAnalyticsAttribute(props)}\n      onTrailingInteractionElementClick={() => {\n        if (!props.isDisabled) {\n          // Icon onClicks to the SelectInput itself\n          if (!isReactNative()) {\n            triggererRef.current?.focus();\n          }\n          onTriggerClick();\n        }\n      }}\n      trailingInteractionElement={\n        isAutoCompleteInHeader || (isInsideTableEditableCell && !isValidationStateNone) ? null : (\n          <InputChevronIcon isDisabled={props.isDisabled} isOpen={isOpen} />\n        )\n      }\n      {...(isInsideTableEditableCell ? tableInputProps : undefined)}\n      // When AutoComplete is present inside DropdownOverlay, the floating ui adds tabIndex -1 internally. We override it with tabIndex 0 here\n      tabIndex={isAutoCompleteInHeader ? 0 : undefined}\n    />\n  );\n};\n\nconst BaseDropdownInputTrigger = React.forwardRef(_BaseDropdownInputTrigger);\n\nexport { BaseDropdownInputTrigger };\n"],"names":["_BaseDropdownInputTrigger","props","ref","_props$placeholder","_props$validationStat","_props$maxRows","_props$label","_useDropdown","useDropdown","isOpen","activeTagIndex","setActiveTagIndex","displayValue","selectionType","dropdownTriggerer","dropdownBaseId","selectedIndices","triggererRef","headerAutoCompleteRef","triggererWrapperRef","isTagDismissedRef","onTriggerClick","value","shouldIgnoreBlurAnimation","setShouldIgnoreBlurAnimation","activeIndex","hasFooterAction","options","removeOption","setChangeCallbackTriggerer","changeCallbackTriggerer","_useTableContext","useTableContext","rowDensity","_useTableEditableCell","useTableEditableCell","isInsideTableEditableCell","dropdownTriggerPlaceholder","placeholder","isAutoCompleteInHeader","isSelectInput","dropdownComponentIds","triggers","AutoComplete","getShowAllTags","React","useCallback","useControlledDropdownInput","onChange","name","defaultValue","syncInputValueWithSelection","getValue","prefix","labelPosition","label","concat","undefined","inputValue","getTags","useMemo","_ref","size","getTagsGroup","tags","map","selectedIndex","_options$selectedInde","title","isDisabled","onDismiss","_ref2","tagIndex","current","isReactNative","_triggererRef$current","focus","Number","tableInputProps","isTableInputCell","rowDensityToIsTableInputCellMapping","id","tableEditableCellRowDensityToInputSizeMap","trailingIcon","validationStateToInputTrailingIconMap","validationState","showHintsAsTooltip","isValidationStateNone","_jsx","BaseInput","_objectSpread","as","node","isDropdownTrigger","setInputWrapperRef","wrapperNode","maxTagRows","maxRows","showAllTags","textAlign","length","hideLabelText","accessibilityLabel","isLabelInsideInput","necessityIndicator","autoCompleteSuggestionType","helpText","errorText","successText","isRequired","suffix","valueSuffix","values","filter","option","index","includes","autoFocus","onClick","e","_props$onTriggerClick","call","onFocus","onBlur","_ref3","_props$onBlur","leadingIcon","icon","componentName","MetaConstants","SelectInput","testID","labelId","role","hasPopup","getActionListContainerRole","isPopupExpanded","activeDescendant","popupId","onInputValueChange","onKeyDown","onTriggerKeydown","makeAnalyticsAttribute","onTrailingInteractionElementClick","_triggererRef$current2","trailingInteractionElement","InputChevronIcon","tabIndex","BaseDropdownInputTrigger","forwardRef"],"mappings":"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"}