{"version":3,"file":"DateInput.web.js","sources":["../../../../../../src/components/DatePicker/DateInput.web.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/no-autofocus */\n/* eslint-disable @typescript-eslint/no-unnecessary-type-assertion */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport { useDatesContext } from '@mantine/dates';\nimport type { DatePickerInputProps, DateInputProps } from './types';\nimport {\n  getFormattedDate,\n  rangeFormattedValue,\n  rangeInputPlaceHolder,\n  finalInputFormat,\n  getTextInputFormat,\n  validateAndParseDateInput,\n  stripDelimiters,\n} from './utils';\nimport BaseBox from '~components/Box/BaseBox';\nimport { TextInput } from '~components/Input/TextInput';\nimport { isReactNative } from '~utils';\nimport type { BladeElementRef, DataAnalyticsAttribute } from '~utils/types';\nimport { CalendarIcon } from '~components/Icons';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\n/**\n * CRITICAL BEHAVIOR CASES - Verify when making changes:\n *\n * 1. VALUE PROP: Already formatted by getFormattedDate() - avoid double formatting\n * 2. USER TYPING: Should format input AND sync with calendar selection\n * 3. CALENDAR SELECTION: Should apply formatted value to input without re-formatting\n * 4. SUBMIT (no footer): Blur/Enter should select current value\n */\nconst _DateInput = (\n  props: DateInputProps,\n  ref: React.ForwardedRef<BladeElementRef>,\n): React.ReactElement => {\n  const {\n    format,\n    date,\n    setControlledValue,\n    effectiveSelectionType,\n    leadingDropdown,\n    tags,\n    id,\n    ...textInputProps\n  } = props;\n  const [inputValue, setInputValue] = React.useState(['']);\n  const [validationError, setValidationError] = React.useState<string | undefined>(undefined);\n  const shouldShowCalendarIcon = !Boolean(leadingDropdown);\n\n  // Determine selection type: prefer preset context calculation over props\n  // This handles \"Today\" presets that should display as single even though data is range\n  const isRange =\n    effectiveSelectionType === 'single'\n      ? false\n      : effectiveSelectionType === 'range' || props.selectionType === 'range';\n\n  // Sync internal input state with external formatted values from parent component\n  // textInputProps.value comes from DatePickerInput as formatted strings: [\"25/12/2024\", \"31/12/2024\"]\n  // We strip delimiters for internal processing: [\"25122024\", \"31122024\"]\n  // This prevents double formatting and helps to validate the input easier during user typing\n  React.useEffect(() => {\n    if (textInputProps.value) {\n      setInputValue(\n        isRange\n          ? [stripDelimiters(textInputProps.value[0]), stripDelimiters(textInputProps.value[1])]\n          : [stripDelimiters(textInputProps.value[0])],\n      );\n    }\n  }, [textInputProps.value, isRange, format]);\n\n  // Clear validation error only when the actual selected date changes\n  // (e.g., user selected a valid date from the calendar). This avoids\n  // clearing errors during typing/blur unless the value truly updated.\n  React.useEffect(() => {\n    setValidationError(undefined);\n  }, [date]);\n\n  const applyDateValue = React.useCallback(\n    (inputValue: string, shouldClearWhenEmpty = false): void => {\n      if (inputValue?.trim()) {\n        // Validate input and get parsed dates in one atomic operation (includes all constraints)\n        const validation = validateAndParseDateInput(inputValue, isRange, format, {\n          excludeDate: props.excludeDate,\n          minDate: props.minDate,\n          maxDate: props.maxDate,\n        });\n        if (validation.shouldBlock) {\n          return; // Block invalid input to prevent data corruption\n        }\n\n        // Apply the pre-parsed date values to controlled state (no redundant parsing)\n        if (validation.parsedValue !== undefined) {\n          let finalValue = validation.parsedValue;\n\n          // Special handling: if preset context shows single but props expect range\n          // (like \"Today\" preset), convert single date back to same-day range\n          if (\n            effectiveSelectionType === 'single' &&\n            props.selectionType === 'range' &&\n            validation.parsedValue instanceof Date\n          ) {\n            finalValue = [validation.parsedValue, validation.parsedValue] as [Date, Date];\n          }\n\n          setControlledValue?.(finalValue);\n        }\n      } else if (shouldClearWhenEmpty) {\n        // Clear controlled value when input is emptied (onChange only, not onBlur)\n        setControlledValue?.(isRange ? ([null, null] as [Date | null, Date | null]) : null);\n      }\n    },\n    [\n      isRange,\n      setControlledValue,\n      effectiveSelectionType,\n      props.selectionType,\n      format,\n      props.excludeDate,\n      props.minDate,\n      props.maxDate,\n    ],\n  );\n\n  const handleInputChange = ({ value }: { value?: string }): void => {\n    const inputValue = value ?? '';\n    setValidationError(undefined);\n\n    if (inputValue?.trim()) {\n      const validation = validateAndParseDateInput(inputValue, isRange, format, {\n        excludeDate: props.excludeDate,\n        minDate: props.minDate,\n        maxDate: props.maxDate,\n      });\n\n      if (validation.shouldBlock && validation.error) {\n        setValidationError(validation.error);\n      }\n    }\n\n    // Apply changes immediately during typing (with empty clearing enabled)\n    applyDateValue(inputValue, true);\n  };\n\n  const handleBlur = React.useCallback(\n    (params: { name?: string; value?: string; event?: React.FocusEvent<HTMLInputElement> }) => {\n      const currentInputValue = params.event?.target.value ?? params.value ?? '';\n      setValidationError(undefined);\n\n      if (currentInputValue?.trim()) {\n        // Validate complete input and show errors to user on blur (includes all constraints)\n        const validation = validateAndParseDateInput(currentInputValue, isRange, format, {\n          excludeDate: props.excludeDate,\n          minDate: props.minDate,\n          maxDate: props.maxDate,\n        });\n\n        if (validation.shouldBlock && validation.error) {\n          setValidationError(validation.error);\n          return; // Don't apply invalid values\n        }\n      }\n\n      // Apply final value on blur (without empty clearing to preserve existing dates)\n      applyDateValue(currentInputValue, false);\n    },\n    [applyDateValue, isRange],\n  );\n\n  return (\n    <TextInput\n      {...textInputProps}\n      ref={ref}\n      type=\"number\"\n      value={isRange ? rangeFormattedValue(inputValue[0], inputValue[1]) : inputValue[0]}\n      leadingIcon={shouldShowCalendarIcon ? CalendarIcon : undefined}\n      leading={leadingDropdown}\n      format={\n        isRange\n          ? getTextInputFormat(finalInputFormat(inputValue[0], inputValue[1], format), true)\n          : getTextInputFormat(format, false)\n      }\n      validationState={validationError ? 'error' : textInputProps.validationState}\n      errorText={textInputProps.errorText ?? validationError}\n      onChange={handleInputChange}\n      onBlur={handleBlur}\n      onClick={(e) => {\n        if (textInputProps.isDisabled) {\n          return;\n        }\n        textInputProps.onClick?.(e);\n      }}\n      onKeyDown={({ event }) => {\n        // @ts-expect-error\n        textInputProps.onKeyDown?.(event);\n      }}\n    />\n  );\n};\n\nconst DateInput = React.forwardRef(_DateInput);\n\nconst HiddenInput = ({\n  value,\n  name,\n  isRequired,\n  isDisabled,\n  ...rest\n}: {\n  value: string;\n  name?: string;\n  isRequired?: boolean;\n  isDisabled?: boolean;\n} & DataAnalyticsAttribute): React.ReactElement => {\n  if (isReactNative()) return <></>;\n\n  return (\n    <input\n      hidden={true}\n      name={name}\n      value={value}\n      required={isRequired}\n      disabled={isDisabled}\n      readOnly\n      {...makeAnalyticsAttribute(rest)}\n    />\n  );\n};\n\nconst _DatePickerInput = (\n  {\n    selectionType,\n    referenceProps,\n    inputRef,\n    date,\n    label,\n    labelPosition,\n    labelSuffix,\n    labelTrailing,\n    autoFocus,\n    name,\n    size = 'medium',\n    necessityIndicator,\n    successText,\n    errorText,\n    helpText,\n    format,\n    placeholder,\n    setControlledValue,\n    leadingDropdown,\n    selectedPreset,\n    excludeDate,\n    minDate,\n    maxDate,\n    effectiveSelectionType,\n    ...props\n  }: DatePickerInputProps,\n  ref: React.ForwardedRef<any>,\n): React.ReactElement => {\n  const { locale } = useDatesContext();\n\n  if (selectionType == 'single') {\n    const dateValue = getFormattedDate({\n      date,\n      format,\n      labelSeparator: '-',\n      locale,\n      type: 'default',\n    });\n    return (\n      <BaseBox width=\"100%\">\n        <HiddenInput\n          value={dateValue}\n          name={name}\n          isRequired={props.isRequired}\n          isDisabled={props.isDisabled}\n        />\n        <DateInput\n          ref={ref as never}\n          id=\"start-date\"\n          labelPosition={labelPosition}\n          label={label}\n          placeholder={placeholder || format}\n          popupId={referenceProps['aria-controls']}\n          isPopupExpanded={referenceProps['aria-expanded']}\n          hasPopup={referenceProps['aria-haspopup']}\n          size={size}\n          autoFocus={autoFocus}\n          value={[dateValue]}\n          componentName=\"DatePickerInput\"\n          necessityIndicator={necessityIndicator}\n          successText={successText}\n          errorText={errorText}\n          helpText={helpText}\n          labelSuffix={labelSuffix}\n          labelTrailing={labelTrailing}\n          leadingDropdown={leadingDropdown}\n          date={date as Date | null}\n          setControlledValue={setControlledValue}\n          format={format}\n          selectionType={selectionType}\n          excludeDate={excludeDate}\n          minDate={minDate}\n          maxDate={maxDate}\n          effectiveSelectionType={effectiveSelectionType}\n          {...props}\n          {...referenceProps}\n        />\n      </BaseBox>\n    );\n  }\n\n  if (selectionType == 'range') {\n    const startValue = getFormattedDate({\n      type: 'default',\n      date: date[0],\n      format,\n      labelSeparator: '-',\n      locale,\n    });\n    const endValue = getFormattedDate({\n      type: 'default',\n      date: date[1],\n      format,\n      labelSeparator: '-',\n      locale,\n    });\n\n    return (\n      <BaseBox width=\"100%\">\n        <HiddenInput\n          value={`${startValue}`}\n          name={name?.start}\n          isRequired={props.isRequired}\n          isDisabled={props.isDisabled}\n        />\n\n        <HiddenInput\n          value={endValue}\n          name={name?.end}\n          isRequired={props.isRequired}\n          isDisabled={props.isDisabled}\n          {...makeAnalyticsAttribute(props)}\n        />\n\n        <DateInput\n          ref={ref as never}\n          id=\"range-date\"\n          labelPosition={labelPosition}\n          label={typeof label === 'object' ? label?.start : label}\n          placeholder={rangeInputPlaceHolder(placeholder, format)}\n          popupId={referenceProps['aria-controls']}\n          isPopupExpanded={referenceProps['aria-expanded']}\n          hasPopup={referenceProps['aria-haspopup']}\n          size={size}\n          autoFocus={autoFocus}\n          value={[startValue, endValue]}\n          componentName=\"DatePickerInputRange\"\n          necessityIndicator={necessityIndicator}\n          successText={\n            typeof successText === 'object'\n              ? (successText as { start: string })?.start\n              : successText\n          }\n          errorText={\n            typeof errorText === 'object' ? (errorText as { start: string })?.start : errorText\n          }\n          helpText={\n            typeof helpText === 'object' ? (helpText as { start: string })?.start : helpText\n          }\n          labelSuffix={labelSuffix}\n          labelTrailing={labelTrailing}\n          format={format}\n          leadingDropdown={leadingDropdown}\n          date={date as [Date | null, Date | null]}\n          setControlledValue={setControlledValue}\n          selectionType={selectionType}\n          excludeDate={excludeDate}\n          minDate={minDate}\n          maxDate={maxDate}\n          effectiveSelectionType={effectiveSelectionType}\n          {...props}\n          {...referenceProps}\n        />\n      </BaseBox>\n    );\n  }\n\n  return <></>;\n};\n\nconst DatePickerInput = React.forwardRef(_DatePickerInput);\nexport { DatePickerInput };\n"],"names":["_DateInput","props","ref","_textInputProps$error","format","date","setControlledValue","effectiveSelectionType","leadingDropdown","tags","id","textInputProps","_objectWithoutProperties","_excluded","_React$useState","React","useState","_React$useState2","_slicedToArray","inputValue","setInputValue","_React$useState3","undefined","_React$useState4","validationError","setValidationError","shouldShowCalendarIcon","Boolean","isRange","selectionType","useEffect","value","stripDelimiters","applyDateValue","useCallback","shouldClearWhenEmpty","arguments","length","trim","validation","validateAndParseDateInput","excludeDate","minDate","maxDate","shouldBlock","parsedValue","finalValue","Date","handleInputChange","_ref","error","handleBlur","params","_ref2","_params$event$target$","_params$event","currentInputValue","event","target","_jsx","TextInput","_objectSpread","type","rangeFormattedValue","leadingIcon","CalendarIcon","leading","getTextInputFormat","finalInputFormat","validationState","errorText","onChange","onBlur","onClick","e","_textInputProps$onCli","isDisabled","call","onKeyDown","_ref3","_textInputProps$onKey","DateInput","forwardRef","HiddenInput","_ref4","name","isRequired","rest","_excluded2","isReactNative","_Fragment","hidden","required","disabled","readOnly","makeAnalyticsAttribute","_DatePickerInput","_ref5","referenceProps","inputRef","label","labelPosition","labelSuffix","labelTrailing","autoFocus","_ref5$size","size","necessityIndicator","successText","helpText","placeholder","selectedPreset","_excluded3","_useDatesContext","useDatesContext","locale","dateValue","getFormattedDate","labelSeparator","_jsxs","BaseBox","width","children","popupId","isPopupExpanded","hasPopup","componentName","startValue","endValue","concat","start","end","_typeof","rangeInputPlaceHolder","DatePickerInput"],"mappings":"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"}