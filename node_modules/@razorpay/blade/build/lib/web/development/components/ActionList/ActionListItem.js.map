{"version":3,"file":"ActionListItem.js","sources":["../../../../../../src/components/ActionList/ActionListItem.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport React from 'react';\nimport styled from 'styled-components';\nimport type { TouchableOpacity } from 'react-native';\nimport { componentIds } from './componentIds';\nimport { validateActionListItemProps, getNormalTextColor } from './actionListUtils';\nimport { getActionListItemRole, getActionListSectionRole } from './getA11yRoles';\nimport { Divider } from '~components/Divider';\nimport BaseBox from '~components/Box/BaseBox';\nimport type { IconComponent } from '~components/Icons';\nimport { useDropdown } from '~components/Dropdown/useDropdown';\nimport type { FeedbackColors } from '~tokens/theme/theme';\nimport { Text } from '~components/Typography';\nimport type { Platform } from '~utils';\nimport { castWebType, isReactNative } from '~utils';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { DataAnalyticsAttribute, StringChildrenType, TestID } from '~utils/types';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { makeSize } from '~utils/makeSize';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { throwBladeError } from '~utils/logger';\nimport type { BadgeProps } from '~components/Badge';\nimport { Badge } from '~components/Badge';\nimport { Box } from '~components/Box';\nimport { dropdownComponentIds } from '~components/Dropdown/dropdownComponentIds';\nimport { BaseMenuItem, useBaseMenuItem } from '~components/BaseMenu';\nimport { Checkbox } from '~components/Checkbox';\nimport type { AvatarProps } from '~components/Avatar/types';\nimport { Avatar } from '~components/Avatar';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\ntype ActionListItemProps = {\n  title: string;\n  description?: string;\n  onClick?: (clickProps: {\n    name: string;\n    value?: boolean;\n    event: Platform.Select<{\n      web: React.MouseEvent;\n      native: React.TouchEvent<TouchableOpacity>;\n    }>;\n  }) => void;\n  /**\n   * value that you get from `onChange` event on SelectInput or in form submissions.\n   */\n  value: string;\n  /**\n   * Link to open when item is clicked.\n   */\n  href?: string;\n  /**\n   * HTML target of the link\n   */\n  target?: string;\n  /**\n   * Item that goes on left-side of item.\n   *\n   * Valid elements - `<ActionListItemIcon />`, `<ActionListItemAsset />`\n   *\n   * Will be overriden in multiselect\n   */\n  leading?: React.ReactNode;\n  /**\n   * Item that goes on right-side of item.\n   *\n   * Valid elements - `<ActionListItemText />`, `<ActionListItemIcon />`\n   */\n  trailing?: React.ReactNode;\n  /**\n   * Item that goes immediately next to the title.\n   *\n   * Valid elements - `<ActionListItemBadge />`, `<ActionListItemBadgeGroup />`\n   *\n   */\n  titleSuffix?: React.ReactElement;\n  isDisabled?: boolean;\n  intent?: Extract<FeedbackColors, 'negative'>;\n  /**\n   * Can be used in combination of `onClick` to highlight item as selected in Button Triggers.\n   *\n   * When trigger is SelectInput, Use `value` prop on SelectInput instead to make dropdown controlled.\n   */\n  isSelected?: boolean;\n  /**\n   * Internally passed from ActionList. No need to pass it explicitly\n   *\n   * @private\n   */\n  _index?: number;\n  /**\n   * Internally used to pass index for virtualized lists\n   *\n   * @private\n   */\n  _virtualizedIndex?: number;\n  /**\n   * Internally used to focus on virtualized list\n   *\n   * @private\n   */\n  _onVirtualizedFocus?: (_virtuazedIndex: number) => void;\n} & TestID &\n  DataAnalyticsAttribute;\n\nconst StyledActionListSectionTitle = styled(BaseBox)((props) => ({\n  // @TODO: replace this styled-component with new layout box when we have padding shorthand\n  padding: makeSize(props.theme.spacing[3]),\n}));\n\ntype ActionListSectionProps = {\n  title: string;\n  children: React.ReactNode[] | React.ReactNode;\n  /**\n   * Internally used to hide the divider on final item in React Native\n   *\n   * Should not be used by consumers (also won't work on web)\n   *\n   * @private\n   */\n  _hideDivider?: boolean;\n  /**\n   * Internally used to hide / show section in AutoComplete\n   *\n   * @private\n   */\n  _sectionChildValues?: string[];\n} & TestID &\n  DataAnalyticsAttribute;\n\nconst _ActionListSectionTitle = ({\n  title,\n  isInsideVirtualizedList = false,\n}: {\n  title: string;\n  isInsideVirtualizedList?: boolean;\n}): React.ReactElement => {\n  return (\n    <StyledActionListSectionTitle\n      {...makeAccessible({\n        hidden: !isInsideVirtualizedList,\n        role: isInsideVirtualizedList ? 'heading' : undefined,\n      })}\n    >\n      <Text color=\"surface.text.gray.muted\" size=\"small\" weight=\"semibold\">\n        {title}\n      </Text>\n    </StyledActionListSectionTitle>\n  );\n};\n\nconst ActionListSectionTitle = assignWithoutSideEffects(_ActionListSectionTitle, {\n  componentId: componentIds.ActionListSectionTitle,\n});\nconst _ActionListSection = ({\n  title,\n  children,\n  testID,\n  _hideDivider,\n  _sectionChildValues,\n  ...rest\n}: ActionListSectionProps): React.ReactElement => {\n  const { hasAutoCompleteInHeader, dropdownTriggerer, filteredValues } = useDropdown();\n  const hasAutoComplete =\n    hasAutoCompleteInHeader || dropdownTriggerer === dropdownComponentIds.triggers.AutoComplete;\n\n  const isSectionVisible = React.useMemo(() => {\n    if (hasAutoComplete) {\n      const visibleActionListItemInSection = _sectionChildValues?.find((actionItemValue) =>\n        filteredValues.includes(actionItemValue),\n      );\n\n      return Boolean(visibleActionListItemInSection);\n    }\n\n    return true;\n  }, [_sectionChildValues, hasAutoComplete, filteredValues]);\n\n  const showDividerInRN = !(_hideDivider && isReactNative());\n  const showDividerInAutoComplete = hasAutoComplete\n    ? isSectionVisible && filteredValues.length > 1\n    : true;\n\n  return (\n    <BaseBox\n      {...makeAccessible({\n        role: getActionListSectionRole(),\n        label: title,\n      })}\n      {...metaAttribute({ name: MetaConstants.ActionListSection, testID })}\n      {...makeAnalyticsAttribute(rest as Record<string, unknown>)}\n    >\n      {/* We're announcing title as group label so we can hide this */}\n      {isSectionVisible ? <ActionListSectionTitle title={title} /> : null}\n\n      <BaseBox\n        {...makeAccessible({\n          // On web, we just wrap it in another listbox to announce item count properly for particular group.\n          // On React Native, we ignore it since `menu` + `group` role will take care of accessibility\n          role: isReactNative() ? undefined : 'listbox',\n        })}\n      >\n        {children}\n      </BaseBox>\n      {showDividerInAutoComplete && showDividerInRN ? (\n        <Divider marginX=\"spacing.3\" marginY=\"spacing.1\" />\n      ) : null}\n    </BaseBox>\n  );\n};\n\nconst ActionListSection = assignWithoutSideEffects(React.memo(_ActionListSection), {\n  componentId: componentIds.ActionListSection,\n});\n\nconst _ActionListItemIcon = ({ icon }: { icon: IconComponent }): React.ReactElement => {\n  const Icon = icon;\n  const { color, isDisabled } = useBaseMenuItem();\n  const iconState = isDisabled ? 'disabled' : 'muted';\n  return (\n    <Icon\n      color={\n        color === 'negative'\n          ? 'feedback.icon.negative.intense'\n          : `interactive.icon.gray.${iconState}`\n      }\n      size=\"medium\"\n    />\n  );\n};\n\nconst ActionListItemIcon = assignWithoutSideEffects(_ActionListItemIcon, {\n  componentId: componentIds.ActionListItemIcon,\n});\n\nconst _ActionListItemBadgeGroup = ({\n  children,\n}: {\n  children: React.ReactElement[] | React.ReactElement;\n}): React.ReactElement => {\n  return (\n    <Box display=\"flex\" alignItems=\"center\" flexDirection=\"row\">\n      {children}\n    </Box>\n  );\n};\n\nconst ActionListItemBadgeGroup = assignWithoutSideEffects(_ActionListItemBadgeGroup, {\n  componentId: componentIds.ActionListItemBadgeGroup,\n});\n\nconst _ActionListItemAvatar = (avatarProps: Omit<AvatarProps, 'size' | ''>): React.ReactElement => {\n  return <Avatar size=\"xsmall\" {...avatarProps} />;\n};\n\nconst ActionListItemAvatar = assignWithoutSideEffects(_ActionListItemAvatar, {\n  componentId: componentIds.ActionListItemAvatar,\n});\n\nconst _ActionListItemBadge = (props: BadgeProps): React.ReactElement => {\n  return <Badge size=\"medium\" marginLeft=\"spacing.3\" {...props} />;\n};\n\nconst ActionListItemBadge = assignWithoutSideEffects(_ActionListItemBadge, {\n  componentId: componentIds.ActionListItemBadge,\n});\n\nconst _ActionListItemText = ({\n  children,\n}: {\n  children: StringChildrenType;\n}): React.ReactElement => {\n  const { isDisabled } = useBaseMenuItem();\n\n  return (\n    <Text variant=\"caption\" color={getNormalTextColor(isDisabled, { isMuted: true })}>\n      {children}\n    </Text>\n  );\n};\n\nconst ActionListItemText = assignWithoutSideEffects(_ActionListItemText, {\n  componentId: componentIds.ActionListItemText,\n});\n\nconst BaseMenuLeadingItem = ({\n  isSelected,\n  isDisabled,\n}: {\n  isSelected?: boolean;\n  isDisabled?: boolean;\n}): React.ReactElement => {\n  return (\n    <BaseBox\n      pointerEvents=\"none\"\n      // Adding aria-hidden because the listbox item in multiselect in itself explains the behaviour so announcing checkbox is unneccesary and just a nice UI tweak for us\n      {...makeAccessible({\n        hidden: true,\n      })}\n    >\n      <Checkbox isChecked={isSelected} tabIndex={-1} isDisabled={isDisabled}>\n        {/*\n        Checkbox requires children. Didn't want to make it optional because its helpful for consumers\n        But for this case in particular, we just want to use Text separately so that we can control spacing and color and keep it consistent with non-multiselect dropdowns\n      */}\n        {null}\n      </Checkbox>\n    </BaseBox>\n  );\n};\n\ntype ClickHandlerType = (e: React.MouseEvent<HTMLButtonElement>) => void;\n\nconst makeActionListItemClickable = (\n  clickHandler: ClickHandlerType,\n): { onPress?: (e: React.TouchEvent<TouchableOpacity>) => void; onClick?: ClickHandlerType } => {\n  if (isReactNative()) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment, @typescript-eslint/prefer-ts-expect-error\n    // @ts-ignore: ignoring ReactNative press type for the peace of mind\n    return { onPress: clickHandler };\n  }\n\n  return {\n    onClick: clickHandler,\n  };\n};\n\n/**\n * ### ActionListItem\n *\n * Creates option inside `ActionList`.\n *\n * #### Usage\n *\n * ```jsx\n * <ActionList>\n *  <ActionListItem\n *    title=\"Home\"\n *    value=\"home\"\n *    leading={<ActionListItemIcon icon={HomeIcon} />}\n *    trailing={<ActionListItemText>âŒ˜ + S</ActionListItemText>}\n *  />\n * </ActionList>\n * ```\n */\nconst _ActionListItem = (props: ActionListItemProps): React.ReactElement => {\n  const {\n    activeIndex,\n    dropdownBaseId,\n    onOptionClick,\n    selectedIndices,\n    setShouldIgnoreBlurAnimation,\n    selectionType,\n    dropdownTriggerer,\n    isKeydownPressed,\n    filteredValues,\n    hasAutoCompleteInHeader,\n  } = useDropdown();\n\n  React.useEffect(() => {\n    if (activeIndex === props._index && props._virtualizedIndex !== undefined) {\n      props._onVirtualizedFocus?.(props._virtualizedIndex as number);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [activeIndex]);\n\n  const hasAutoComplete =\n    hasAutoCompleteInHeader || dropdownTriggerer === dropdownComponentIds.triggers.AutoComplete;\n\n  const hasFilterChipSelectInput =\n    dropdownTriggerer === dropdownComponentIds.triggers.FilterChipSelectInput;\n\n  const hasInputDropdownButton =\n    dropdownTriggerer === dropdownComponentIds.triggers.InputDropdownButton;\n\n  const renderOnWebAs = props.href ? 'a' : 'button';\n  /**\n   * In SelectInput, returns the isSelected according to selected indexes in the state\n   *\n   * In Other Triggers (Menu Usecase), returns `props.isSelected` since passing the\n   * isSelected prop explicitly is the only way to select item in menu\n   */\n  const getIsSelected = (): boolean | undefined => {\n    if (\n      dropdownTriggerer === dropdownComponentIds.triggers.SelectInput ||\n      hasAutoComplete ||\n      hasFilterChipSelectInput ||\n      hasInputDropdownButton\n    ) {\n      if (typeof props._index === 'number') {\n        return selectedIndices.includes(props._index);\n      }\n      return undefined;\n    }\n\n    return props.isSelected;\n  };\n\n  const isSelected = getIsSelected();\n\n  React.useEffect(() => {\n    validateActionListItemProps({\n      leading: props.leading,\n      trailing: props.trailing,\n      titleSuffix: props.titleSuffix,\n    });\n  }, [props.leading, props.trailing, props.titleSuffix]);\n\n  React.useEffect(() => {\n    if (__DEV__) {\n      if (\n        dropdownTriggerer === dropdownComponentIds.triggers.SelectInput &&\n        props.intent === 'negative'\n      ) {\n        throwBladeError({\n          message:\n            'negative intent ActionListItem cannot be used inside Dropdown with SelectInput trigger',\n          moduleName: 'ActionListItem',\n        });\n      }\n    }\n  }, [props.intent, dropdownTriggerer]);\n\n  const isVisible = hasAutoComplete && filteredValues ? filteredValues.includes(props.value) : true;\n\n  return (\n    <BaseMenuItem\n      isVisible={isVisible}\n      as={!isReactNative() ? renderOnWebAs : undefined}\n      id={`${dropdownBaseId}-${props._index}`}\n      tabIndex={-1}\n      title={props.title}\n      description={props.description}\n      leading={\n        selectionType === 'multiple' ? (\n          <BaseMenuLeadingItem\n            key={`${dropdownBaseId}-${props._index}-leading-${isSelected}`}\n            isSelected={isSelected}\n            isDisabled={props.isDisabled}\n          />\n        ) : (\n          props.leading\n        )\n      }\n      trailing={props.trailing}\n      titleSuffix={props.titleSuffix}\n      href={props.href}\n      target={props.target}\n      className={activeIndex === props._index ? 'active-focus' : ''}\n      isSelected={isSelected}\n      isDisabled={props.isDisabled}\n      role={getActionListItemRole(dropdownTriggerer, props.href)}\n      {...makeActionListItemClickable((e: React.MouseEvent<HTMLButtonElement>): void => {\n        if (typeof props._index === 'number') {\n          onOptionClick(e, props._index);\n          props.onClick?.({ name: props.value, value: isSelected, event: castWebType(e) });\n        }\n      })}\n      {...makeAnalyticsAttribute({ ...props })}\n      {...metaAttribute({ name: MetaConstants.ActionListItem, testID: props.testID })}\n      onMouseDown={() => {\n        // We want to keep focus on Dropdown's trigger while option is being clicked\n        // So We set this flag that ignores the blur animation to avoid the flicker between focus out + focus in\n        setShouldIgnoreBlurAnimation(true);\n      }}\n      onMouseUp={() => {\n        // (Contd from above comment...) We set this flag back to false since blur of SelectInput is done calling by this time\n        setShouldIgnoreBlurAnimation(false);\n      }}\n      data-value={props.value}\n      data-index={props._index}\n      selectionType={selectionType}\n      color={props.intent}\n      isKeydownPressed={isKeydownPressed}\n    />\n  );\n};\n\nconst ActionListItem = assignWithoutSideEffects(React.memo(_ActionListItem), {\n  componentId: componentIds.ActionListItem,\n  displayName: componentIds.ActionListItem,\n});\n\nexport type { ActionListItemProps, ActionListSectionProps };\nexport {\n  ActionListItem,\n  ActionListItemIcon,\n  ActionListItemText,\n  ActionListItemAvatar,\n  ActionListItemBadge,\n  ActionListItemBadgeGroup,\n  ActionListSection,\n  ActionListSectionTitle,\n};\n"],"names":["StyledActionListSectionTitle","styled","BaseBox","withConfig","displayName","componentId","props","padding","makeSize","theme","spacing","_ActionListSectionTitle","_ref","title","_ref$isInsideVirtuali","isInsideVirtualizedList","_jsx","_objectSpread","makeAccessible","hidden","role","undefined","children","Text","color","size","weight","ActionListSectionTitle","assignWithoutSideEffects","componentIds","_ActionListSection","_ref2","testID","_hideDivider","_sectionChildValues","rest","_objectWithoutProperties","_excluded","_useDropdown","useDropdown","hasAutoCompleteInHeader","dropdownTriggerer","filteredValues","hasAutoComplete","dropdownComponentIds","triggers","AutoComplete","isSectionVisible","React","useMemo","visibleActionListItemInSection","find","actionItemValue","includes","Boolean","showDividerInRN","isReactNative","showDividerInAutoComplete","length","_jsxs","getActionListSectionRole","label","metaAttribute","name","MetaConstants","ActionListSection","makeAnalyticsAttribute","Divider","marginX","marginY","memo","_ActionListItemIcon","_ref3","icon","Icon","_useBaseMenuItem","useBaseMenuItem","isDisabled","iconState","concat","ActionListItemIcon","_ActionListItemBadgeGroup","_ref4","Box","display","alignItems","flexDirection","ActionListItemBadgeGroup","_ActionListItemAvatar","avatarProps","Avatar","ActionListItemAvatar","_ActionListItemBadge","Badge","marginLeft","ActionListItemBadge","_ActionListItemText","_ref5","_useBaseMenuItem2","variant","getNormalTextColor","isMuted","ActionListItemText","BaseMenuLeadingItem","_ref6","isSelected","pointerEvents","Checkbox","isChecked","tabIndex","makeActionListItemClickable","clickHandler","onPress","onClick","_ActionListItem","_useDropdown2","activeIndex","dropdownBaseId","onOptionClick","selectedIndices","setShouldIgnoreBlurAnimation","selectionType","isKeydownPressed","useEffect","_index","_virtualizedIndex","_props$_onVirtualized","_onVirtualizedFocus","call","hasFilterChipSelectInput","FilterChipSelectInput","hasInputDropdownButton","InputDropdownButton","renderOnWebAs","href","getIsSelected","SelectInput","validateActionListItemProps","leading","trailing","titleSuffix","intent","throwBladeError","message","moduleName","isVisible","value","BaseMenuItem","as","id","description","target","className","getActionListItemRole","e","_props$onClick","event","castWebType","ActionListItem","onMouseDown","onMouseUp"],"mappings":"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"}