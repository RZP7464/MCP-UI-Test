{"version":3,"file":"AnimatedBaseInputWrapper.web.js","sources":["../../../../../../../src/components/Input/BaseInput/AnimatedBaseInputWrapper.web.tsx"],"sourcesContent":["import React from 'react';\nimport type { FlattenSimpleInterpolation } from 'styled-components';\nimport styled, { css, keyframes } from 'styled-components';\nimport type { BaseInputWrapperProps } from './types';\nimport {\n  getAnimatedBaseInputWrapperMaxHeight,\n  getInputBackgroundAndBorderStyles,\n} from './baseInputStyles';\nimport { baseInputHeight, baseInputWrapperMaxHeight } from './baseInputTokens';\nimport BaseBox from '~components/Box/BaseBox';\nimport { motion } from '~tokens/global';\nimport { castWebType, makeMotionTime, makeSize, makeSpace } from '~utils';\nimport type { BladeElementRef } from '~utils/types';\n\nconst StyledBaseInputWrapper = styled(BaseBox)<\n  Pick<\n    BaseInputWrapperProps,\n    | 'currentInteraction'\n    | 'isDisabled'\n    | 'validationState'\n    | 'isTextArea'\n    | 'isDropdownTrigger'\n    | 'maxTagRows'\n    | 'isTableInputCell'\n  >\n>((props) => ({\n  ...getInputBackgroundAndBorderStyles({\n    theme: props.theme,\n    isFocused: props.currentInteraction === 'focus',\n    isDisabled: props.isDisabled,\n    validationState: props.validationState,\n    isTextArea: props.isTextArea,\n    isDropdownTrigger: props.isDropdownTrigger,\n    isTableInputCell: props.isTableInputCell,\n  }),\n  '&:hover': {\n    ...getInputBackgroundAndBorderStyles({\n      theme: props.theme,\n      isHovered: true,\n      isFocused: props.currentInteraction === 'focus',\n      isDisabled: props.isDisabled,\n      validationState: props.validationState,\n      isDropdownTrigger: props.isDropdownTrigger,\n      isTextArea: props.isTextArea,\n      isTableInputCell: props.isTableInputCell,\n    }),\n    transitionProperty: 'background-color',\n    transitionDuration: castWebType(makeMotionTime(props.theme.motion.duration.xquick)),\n    transitionTimingFunction: castWebType(props.theme.motion.easing.standard),\n  },\n  ':focus-within': {\n    ...getInputBackgroundAndBorderStyles({\n      theme: props.theme,\n      isFocused: props.currentInteraction === 'focus',\n      isDisabled: props.isDisabled,\n      validationState: props.validationState,\n      isDropdownTrigger: props.isDropdownTrigger,\n      isTextArea: props.isTextArea,\n      isTableInputCell: props.isTableInputCell,\n    }),\n  },\n}));\n\n// Styled component with animation\nconst StyledAnimatedBaseInputWrapper = styled(StyledBaseInputWrapper)<{\n  animationProps?: FlattenSimpleInterpolation;\n  maxTagRows: BaseInputWrapperProps['maxTagRows'];\n  showAllTags: BaseInputWrapperProps['showAllTags'];\n  isDropdownTrigger: BaseInputWrapperProps['isDropdownTrigger'];\n  size: NonNullable<BaseInputWrapperProps['size']>;\n}>((props) =>\n  props.isDropdownTrigger && !props.isTableInputCell\n    ? css`\n        ${props.animationProps};\n        max-height: ${makeSize(\n          getAnimatedBaseInputWrapperMaxHeight({\n            maxTagRows: props.maxTagRows,\n            showAllTags: props.showAllTags,\n            size: props.size,\n          }),\n        )};\n      `\n    : undefined,\n);\n\nconst _AnimatedBaseInputWrapper: React.ForwardRefRenderFunction<\n  BladeElementRef,\n  BaseInputWrapperProps & {\n    showAllTags?: boolean;\n  }\n> = (\n  { showAllTags, setShowAllTagsWithAnimation, maxTagRows, isDropdownTrigger, ...rest },\n  ref,\n): React.ReactElement => {\n  // Define the animation keyframes\n  const expandAnimation = keyframes`\nfrom {\n  max-height: ${makeSize(baseInputHeight[rest.size])};\n}\nto {\n  max-height: ${makeSize(baseInputWrapperMaxHeight[rest.size])};\n}\n`;\n\n  const collapseAnimation = keyframes`\nfrom {\n  max-height: ${makeSize(baseInputWrapperMaxHeight[rest.size])};\n}\nto {\n  max-height: ${makeSize(baseInputHeight[rest.size])};\n}\n`;\n\n  const expandAnimationProps = css`\n    animation: ${expandAnimation} ${makeMotionTime(motion.duration.quick)}\n      ${String(motion.easing.entrance)};\n  `;\n\n  const collapseAnimationProps = css`\n    animation: ${collapseAnimation} ${makeMotionTime(motion.duration.quick)}\n      ${String(motion.easing.exit)};\n  `;\n\n  const noAnimationProps = css`\n    animation: none;\n  `;\n  return (\n    <StyledAnimatedBaseInputWrapper\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      ref={ref as any}\n      {...rest}\n      animationProps={\n        maxTagRows !== 'expandable'\n          ? noAnimationProps\n          : showAllTags\n          ? expandAnimationProps\n          : collapseAnimationProps\n      }\n      height={\n        rest.isTextArea && isDropdownTrigger\n          ? makeSpace((rest.numberOfLines ?? 0) * baseInputHeight[rest.size])\n          : undefined\n      }\n      cursor={rest.isTextArea && isDropdownTrigger ? 'text' : undefined}\n      isDropdownTrigger={isDropdownTrigger}\n      showAllTags={showAllTags}\n      maxTagRows={maxTagRows}\n      onAnimationEnd={(e) => {\n        if (!showAllTags && e.animationName === collapseAnimation.getName()) {\n          // Triggered for the collapse animation\n          setShowAllTagsWithAnimation?.(false);\n        }\n      }}\n      isTableInputCell={rest.isTableInputCell}\n      className=\"__blade-base-input-wrapper\"\n    />\n  );\n};\n\nconst AnimatedBaseInputWrapper = React.forwardRef(_AnimatedBaseInputWrapper);\n\nexport { AnimatedBaseInputWrapper };\n"],"names":["StyledBaseInputWrapper","styled","BaseBox","withConfig","displayName","componentId","props","_objectSpread","getInputBackgroundAndBorderStyles","theme","isFocused","currentInteraction","isDisabled","validationState","isTextArea","isDropdownTrigger","isTableInputCell","isHovered","transitionProperty","transitionDuration","castWebType","makeMotionTime","motion","duration","xquick","transitionTimingFunction","easing","standard","StyledAnimatedBaseInputWrapper","css","animationProps","makeSize","getAnimatedBaseInputWrapperMaxHeight","maxTagRows","showAllTags","size","undefined","_AnimatedBaseInputWrapper","_ref","ref","_rest$numberOfLines","setShowAllTagsWithAnimation","rest","_objectWithoutProperties","_excluded","expandAnimation","keyframes","baseInputHeight","baseInputWrapperMaxHeight","collapseAnimation","expandAnimationProps","quick","String","entrance","collapseAnimationProps","exit","noAnimationProps","_jsx","height","makeSpace","numberOfLines","cursor","onAnimationEnd","e","animationName","getName","className","AnimatedBaseInputWrapper","React","forwardRef"],"mappings":"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"}