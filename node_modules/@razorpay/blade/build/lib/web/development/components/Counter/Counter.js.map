{"version":3,"file":"Counter.js","sources":["../../../../../../src/components/Counter/Counter.tsx"],"sourcesContent":["import React from 'react';\nimport { StyledCounter } from './StyledCounter';\nimport type { StyledCounterProps } from './types';\nimport { counterHeight, horizontalPadding } from './counterTokens';\nimport type { FeedbackColors, SubtleOrIntense } from '~tokens/theme/theme';\nimport { Text } from '~components/Typography';\nimport BaseBox from '~components/Box/BaseBox';\nimport { useTheme } from '~components/BladeProvider';\nimport type { BaseTextProps } from '~components/Typography/BaseText/types';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport type { DataAnalyticsAttribute, BladeElementRef, TestID } from '~utils/types';\nimport { isReactNative, makeSize } from '~utils';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\nexport type CounterProps = {\n  /**\n   * Sets the value for the counter.\n   */\n  value: number;\n  /**\n   * Sets the max value for the counter.\n   * If value exceedes `max` it will render `value+`\n   */\n  max?: number;\n  /**\n   * Sets the color of the counter.\n   *\n   * @default 'neutral'\n   */\n  color?: FeedbackColors | 'primary';\n  /**\n   * Sets the contrast of the counter.\n   *\n   * @default 'subtle'\n   */\n  emphasis?: SubtleOrIntense;\n  /**\n   * Sets the size of the counter.\n   *\n   * @default 'medium'\n   */\n  size?: 'small' | 'medium' | 'large';\n} & TestID &\n  DataAnalyticsAttribute &\n  StyledPropsBlade;\n\ntype ColorProps = {\n  textColor: BaseTextProps['color'];\n  backgroundColor: StyledCounterProps['backgroundColor'];\n};\n\nconst getColorProps = ({\n  color = 'neutral',\n  emphasis = 'subtle',\n}: {\n  color: NonNullable<CounterProps['color']>;\n  emphasis: NonNullable<CounterProps['emphasis']>;\n}): ColorProps => {\n  const props: ColorProps = {\n    textColor: 'feedback.text.neutral.intense',\n    backgroundColor: 'feedback.background.neutral.subtle',\n  };\n\n  if (color === 'primary') {\n    // primary color badge\n    props.textColor =\n      emphasis === 'intense' ? `surface.text.staticWhite.normal` : `surface.text.primary.normal`;\n    props.backgroundColor = `surface.background.primary.${emphasis}`;\n  } else {\n    // feedback colors badge\n    props.textColor =\n      emphasis === 'intense' ? `surface.text.staticWhite.normal` : `feedback.text.${color}.intense`;\n    props.backgroundColor = `feedback.background.${color}.${emphasis}`;\n  }\n  return props;\n};\n\nconst _Counter = (\n  {\n    value,\n    max,\n    color = 'neutral',\n    emphasis = 'subtle',\n    size = 'medium',\n    testID,\n    ...rest\n  }: CounterProps,\n  ref: React.Ref<BladeElementRef>,\n): React.ReactElement => {\n  let content = `${value}`;\n  if (max && value > max) {\n    content = `${max}+`;\n  }\n\n  const { platform } = useTheme();\n  const { backgroundColor, textColor } = getColorProps({\n    color,\n    emphasis,\n  });\n\n  const counterTextSizes = {\n    small: {\n      variant: 'body',\n      size: 'xsmall',\n    },\n    medium: {\n      variant: 'body',\n      size: 'small',\n    },\n    large: {\n      variant: 'body',\n      size: 'medium',\n    },\n  } as const;\n\n  return (\n    <BaseBox\n      ref={ref as never}\n      display={(isReactNative() ? 'flex' : 'inline-flex') as never}\n      {...metaAttribute({ name: MetaConstants.Counter, testID })}\n      {...getStyledProps(rest)}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      <StyledCounter\n        minHeight={makeSize(counterHeight[size])}\n        backgroundColor={backgroundColor}\n        size={size}\n        platform={platform}\n      >\n        <BaseBox\n          paddingX={horizontalPadding[size]}\n          display=\"flex\"\n          flexDirection=\"row\"\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          overflow=\"hidden\"\n        >\n          <Text\n            {...counterTextSizes[size]}\n            textAlign=\"center\"\n            weight=\"medium\"\n            truncateAfterLines={1}\n            color={textColor}\n          >\n            {content}\n          </Text>\n        </BaseBox>\n      </StyledCounter>\n    </BaseBox>\n  );\n};\n\nconst Counter = assignWithoutSideEffects(React.forwardRef(_Counter), {\n  displayName: 'Counter',\n  componentId: 'Counter',\n});\n\nexport { Counter };\n"],"names":["getColorProps","_ref","_ref$color","color","_ref$emphasis","emphasis","props","textColor","backgroundColor","concat","_Counter","_ref2","ref","value","max","_ref2$color","_ref2$emphasis","_ref2$size","size","testID","rest","_objectWithoutProperties","_excluded","content","_useTheme","useTheme","platform","_getColorProps","counterTextSizes","small","variant","medium","large","_jsx","BaseBox","_objectSpread","display","isReactNative","metaAttribute","name","MetaConstants","Counter","getStyledProps","makeAnalyticsAttribute","children","StyledCounter","minHeight","makeSize","counterHeight","paddingX","horizontalPadding","flexDirection","justifyContent","alignItems","overflow","Text","textAlign","weight","truncateAfterLines","assignWithoutSideEffects","React","forwardRef","displayName","componentId"],"mappings":"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"}