{"version":3,"file":"Accordion.js","sources":["../../../../../../src/components/Accordion/Accordion.tsx"],"sourcesContent":["import type { ReactElement } from 'react';\nimport React, { useCallback, useMemo, useState, cloneElement, Children } from 'react';\nimport type { AccordionContextState } from './AccordionContext';\nimport { AccordionContext } from './AccordionContext';\nimport { MAX_WIDTH } from './styles';\nimport type { AccordionProps } from './types';\nimport { BaseBox } from '~components/Box/BaseBox';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { BoxProps } from '~components/Box';\nimport { size as sizeTokens } from '~tokens/global';\nimport { makeSize } from '~utils';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { BladeElementRef } from '~utils/types';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\nconst MIN_WIDTH: BoxProps['minWidth'] = {\n  s: makeSize(sizeTokens[200]),\n  m: makeSize(sizeTokens[360]),\n  l: makeSize(sizeTokens[360]),\n};\n\nconst getVariantStyles = (variant: AccordionProps['variant']): BoxProps => {\n  if (variant === 'transparent') {\n    return {};\n  }\n\n  return {\n    backgroundColor: 'surface.background.gray.intense',\n    borderRadius: 'medium',\n    borderWidth: 'thinner',\n    borderColor: 'surface.border.gray.subtle',\n  };\n};\n\n/**\n * # Accordion\n *\n * An accordion is used to allow users to toggle between different content sections in a compact vertical stack.\n *\n * ## Usage\n *\n * ```jsx\n * <Accordion>\n *  <AccordionItem>\n *    <AccordionItemHeader title=\"Title\" />\n *    <AccordionItemBody>\n *      <Text color=\"surface.text.gray.subtle\">\n *        Hello this is accordion body content\n *        </Text>\n *     </AccordionItemBody>\n *  </AccordionItem>\n *  <AccordionItem>\n *    <AccordionItemHeader title=\"Title\" />\n *    <AccordionItemBody>\n *      <Text color=\"surface.text.gray.subtle\">\n *         Hello this is accordion body content\n *      </Text>\n *    </AccordionItemBody>\n *  </AccordionItem>\n * </Accordion>\n * ```\n *\n * Checkout https://blade.razorpay.com/?path=/docs/components-accordion--docs\n *\n */\nconst _Accordion = (\n  {\n    defaultExpandedIndex,\n    expandedIndex,\n    onExpandChange,\n    showNumberPrefix = false,\n    children,\n    variant = 'transparent',\n    size = 'large',\n    maxWidth,\n    minWidth,\n    testID,\n    ...rest\n  }: AccordionProps,\n  ref: React.Ref<BladeElementRef>,\n): ReactElement => {\n  const [expandedAccordionItemIndex, setExpandedAccordionItemIndex] = useState<number | undefined>(\n    defaultExpandedIndex,\n  );\n\n  const numberOfItems = Children.count(children);\n\n  const handleExpandChange = useCallback(\n    (nextExpandedIndex: number) => {\n      if (typeof expandedIndex !== 'undefined') {\n        // controlled\n        onExpandChange?.({ expandedIndex: nextExpandedIndex });\n      } else {\n        // uncontrolled\n        setExpandedAccordionItemIndex(nextExpandedIndex);\n        onExpandChange?.({ expandedIndex: nextExpandedIndex });\n      }\n    },\n    [onExpandChange, expandedIndex],\n  );\n\n  const accordionContext = useMemo<AccordionContextState>(\n    () => ({\n      expandedIndex: expandedIndex ?? expandedAccordionItemIndex,\n      defaultExpandedIndex,\n      onExpandChange: handleExpandChange,\n      showNumberPrefix,\n      variant,\n      numberOfItems,\n      size,\n    }),\n    [\n      expandedAccordionItemIndex,\n      handleExpandChange,\n      expandedIndex,\n      showNumberPrefix,\n      defaultExpandedIndex,\n      variant,\n      numberOfItems,\n      size,\n    ],\n  );\n\n  return (\n    <AccordionContext.Provider value={accordionContext}>\n      <BaseBox\n        ref={ref as never}\n        minWidth={minWidth ?? MIN_WIDTH}\n        maxWidth={maxWidth ?? MAX_WIDTH}\n        {...metaAttribute({ name: MetaConstants.Accordion, testID })}\n        {...getStyledProps(rest)}\n        {...makeAnalyticsAttribute(rest)}\n      >\n        <BaseBox {...getVariantStyles(variant)} width=\"100%\">\n          {Children.map(children, (child, index) =>\n            cloneElement(child, { _index: index, key: index }),\n          )}\n        </BaseBox>\n      </BaseBox>\n    </AccordionContext.Provider>\n  );\n};\n\nconst Accordion = React.forwardRef(_Accordion);\n\nexport { Accordion };\n"],"names":["MIN_WIDTH","s","makeSize","sizeTokens","m","l","getVariantStyles","variant","backgroundColor","borderRadius","borderWidth","borderColor","_Accordion","_ref","ref","defaultExpandedIndex","expandedIndex","onExpandChange","_ref$showNumberPrefix","showNumberPrefix","children","_ref$variant","_ref$size","size","maxWidth","minWidth","testID","rest","_objectWithoutProperties","_excluded","_useState","useState","_useState2","_slicedToArray","expandedAccordionItemIndex","setExpandedAccordionItemIndex","numberOfItems","Children","count","handleExpandChange","useCallback","nextExpandedIndex","accordionContext","useMemo","_jsx","AccordionContext","Provider","value","BaseBox","_objectSpread","MAX_WIDTH","metaAttribute","name","MetaConstants","Accordion","getStyledProps","makeAnalyticsAttribute","width","map","child","index","cloneElement","_index","key","React","forwardRef"],"mappings":"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"}