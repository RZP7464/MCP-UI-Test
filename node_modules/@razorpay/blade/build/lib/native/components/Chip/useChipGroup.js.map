{"version":3,"file":"useChipGroup.js","sources":["../../../../../src/components/Chip/useChipGroup.ts"],"sourcesContent":["import React from 'react';\nimport type { ChipGroupProps, ChipGroupContextType, State } from './types';\nimport isUndefined from '~utils/lodashButBetter/isUndefined';\nimport { useControllableState } from '~utils/useControllable';\nimport { useId } from '~utils/useId';\n\ntype UseChipGroupProps = Pick<\n  ChipGroupProps,\n  | 'isDisabled'\n  | 'isRequired'\n  | 'necessityIndicator'\n  | 'validationState'\n  | 'name'\n  | 'value'\n  | 'defaultValue'\n  | 'onChange'\n  | 'size'\n  | 'color'\n  | 'selectionType'\n>;\ntype UseChipGroupReturn = {\n  state: State;\n  contextValue: ChipGroupContextType;\n  ids: { labelId: string };\n};\n\nconst useChipGroup = ({\n  value,\n  defaultValue,\n  isDisabled,\n  isRequired,\n  onChange,\n  name,\n  size,\n  color,\n  selectionType,\n  necessityIndicator,\n  validationState,\n}: UseChipGroupProps): UseChipGroupReturn => {\n  const idBase = useId('chip-group');\n  const labelId = `${idBase}-label`;\n  const fallbackName = name ?? idBase;\n  const [checkedValues, setValues] = useControllableState({\n    value: (value && selectionType === 'single' ? [value] : value) as string[] | undefined,\n    // If selectionType is single, we need to convert the value to an array\n    defaultValue: (defaultValue && selectionType === 'single'\n      ? [defaultValue]\n      : defaultValue || []) as string[] | undefined,\n    onChange: (values: string[]) => onChange?.({ values, name: fallbackName }),\n  });\n\n  const state = React.useMemo<State>(() => {\n    return {\n      value: checkedValues,\n      isChecked(value: string): boolean {\n        if (selectionType === 'single') {\n          if (isUndefined(value) || isUndefined(checkedValues)) return false;\n          return checkedValues[0] === value;\n        }\n        return checkedValues.includes(value);\n      },\n      addValue(value: string) {\n        if (isDisabled) {\n          return;\n        }\n        if (selectionType === 'single') {\n          setValues(() => [value]);\n        }\n        if (selectionType === 'multiple' && !checkedValues.includes(value)) {\n          setValues(() => checkedValues.concat(value));\n        }\n      },\n      removeValue(value: string) {\n        if (isDisabled) {\n          return;\n        }\n        if (selectionType === 'single') {\n          setValues(undefined!);\n        }\n        if (\n          selectionType === 'multiple' &&\n          Array.isArray(checkedValues) &&\n          checkedValues.includes(value)\n        ) {\n          setValues(() => checkedValues.filter((existingValue) => existingValue !== value));\n        }\n      },\n    };\n  }, [checkedValues, isDisabled, setValues, selectionType]);\n\n  const contextValue = React.useMemo<ChipGroupContextType>(() => {\n    return {\n      isDisabled,\n      isRequired,\n      necessityIndicator,\n      validationState,\n      name,\n      state,\n      size,\n      color,\n      selectionType,\n    };\n  }, [\n    isDisabled,\n    isRequired,\n    necessityIndicator,\n    validationState,\n    name,\n    state,\n    size,\n    color,\n    selectionType,\n  ]);\n\n  return { state, contextValue, ids: { labelId } };\n};\n\nexport { useChipGroup };\n"],"names":["useChipGroup","_ref","value","defaultValue","isDisabled","isRequired","onChange","name","size","color","selectionType","necessityIndicator","validationState","idBase","useId","labelId","fallbackName","_useControllableState","useControllableState","values","_useControllableState2","_slicedToArray","checkedValues","setValues","state","React","useMemo","isChecked","isUndefined","includes","addValue","concat","removeValue","undefined","Array","isArray","filter","existingValue","contextValue","ids"],"mappings":"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"}