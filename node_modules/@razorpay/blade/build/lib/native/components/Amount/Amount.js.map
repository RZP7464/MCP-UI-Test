{"version":3,"file":"Amount.js","sources":["../../../../../src/components/Amount/Amount.tsx"],"sourcesContent":["import type { ReactElement } from 'react';\nimport React from 'react';\nimport type { CurrencyCodeType } from '@razorpay/i18nify-js/currency';\nimport { formatNumberByParts } from '@razorpay/i18nify-js/currency';\nimport type { AmountTypeProps } from './amountTokens';\nimport { normalAmountSizes, subtleFontSizes, amountLineHeights } from './amountTokens';\nimport type { BaseTextProps } from '~components/Typography/BaseText/types';\nimport BaseBox from '~components/Box/BaseBox';\nimport type { DataAnalyticsAttribute, BladeElementRef, TestID } from '~utils/types';\nimport { getPlatformType } from '~utils';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { throwBladeError } from '~utils/logger';\nimport { objectKeysWithType } from '~utils/objectKeysWithType';\nimport { BaseText } from '~components/Typography/BaseText';\nimport { Text } from '~components/Typography';\nimport { opacity } from '~tokens/global';\nimport type { FontFamily } from '~tokens/global';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\n/**\n * Pollyfill function to get around the node 18 error\n *\n * This function is maintained by i18nify team. Reach out to them for any change regarding this.\n */\nconst stripTrailingZerosFromParts = (\n  parts: ReturnType<typeof formatNumberByParts>,\n): ReturnType<typeof formatNumberByParts> => {\n  const decimalPart = parts.rawParts\n    .filter(({ type }) => type === 'fraction')\n    .map(({ value }) => value)\n    .join('');\n\n  const hasFraction = parts.rawParts.some(({ type }) => type === 'fraction');\n\n  if (hasFraction && /^0+$/.test(decimalPart)) {\n    delete parts.decimal;\n    delete parts.fraction;\n    parts.rawParts = parts.rawParts.filter(({ type }) => type !== 'decimal' && type !== 'fraction');\n  }\n\n  return parts;\n};\n\n/**\n * Wrapper that uses pollyfill of i18nify team\n */\nconst pollyfilledFormatNumberByParts: typeof formatNumberByParts = (value, options) => {\n  const parts = formatNumberByParts(value, options);\n\n  if (options?.intlOptions?.trailingZeroDisplay === 'stripIfInteger') {\n    return stripTrailingZerosFromParts(parts);\n  }\n\n  return parts;\n};\n\ntype AmountCommonProps = {\n  /**\n   * The value to be rendered within the component.\n   *\n   */\n  value: number;\n  /**\n   * Sets the color of the amount.\n   *\n   * @default undefined\n   */\n  color?: BaseTextProps['color'];\n  /**\n   * Indicates what the suffix of amount should be\n   *\n   * @default 'decimals'\n   */\n  suffix?: 'decimals' | 'none' | 'humanize';\n  /**\n   * Makes the currency indicator(currency symbol/code) and decimal digits small and faded\n   *\n   * @default true\n   */\n  isAffixSubtle?: true | false;\n  /**\n   * Determines the visual representation of the currency, choose between displaying the currency symbol or code.\n   *\n   * Note: Currency symbol and code is determined by the locale set in user's browser or set via @razorpay/i18nify-react library.\n   *\n   * @default 'currency-symbol'\n   */\n  currencyIndicator?: 'currency-symbol' | 'currency-code';\n  /**\n   * The currency of the amount.  Note that this component\n   * only displays the provided value in the specified currency, it does not perform any currency conversion.\n   *\n   * @default 'INR'\n   * */\n  currency?: CurrencyCodeType;\n  /**\n   * If true, the amount text will have a line through it.\n   *\n   * @default false\n   */\n  isStrikethrough?: boolean;\n  /**\n   * Controls the number of decimal places to display when suffix is 'decimals'.\n   *\n   * @default 2\n   */\n  fractionDigits?: number;\n} & TestID &\n  DataAnalyticsAttribute &\n  StyledPropsBlade;\n\ntype ColorProps = {\n  amountValueColor: BaseTextProps['color'];\n};\n\ntype AmountProps = AmountTypeProps & AmountCommonProps;\n\nconst getTextColorProps = ({ color }: { color: AmountProps['color'] }): ColorProps => {\n  const props: ColorProps = {\n    amountValueColor: 'surface.text.gray.normal',\n  };\n  if (!color) return props;\n  props.amountValueColor = color;\n  return props;\n};\n\ntype AmountType = Partial<ReturnType<typeof formatNumberByParts>>;\n\ninterface AmountValue extends Omit<AmountProps, 'value'> {\n  amountValueColor: BaseTextProps['color'];\n  amount: AmountType;\n  size: Exclude<AmountProps['size'], undefined>;\n}\n\nconst AmountValue = ({\n  amount,\n  size = 'medium',\n  type = 'body',\n  weight = 'regular',\n  amountValueColor,\n  isAffixSubtle,\n  suffix,\n}: AmountValue): ReactElement => {\n  const isReactNative = getPlatformType() === 'react-native';\n  const affixFontSize = isAffixSubtle ? subtleFontSizes[type][size] : normalAmountSizes[type][size];\n  const numberFontFamily: keyof FontFamily = type === 'body' ? 'text' : 'heading';\n  if (suffix === 'decimals' && isAffixSubtle) {\n    // Native does not support alignItems of Text inside a div, instead we need to wrap is in a Text\n    const AmountWrapper = isReactNative ? Text : React.Fragment;\n\n    return (\n      <AmountWrapper>\n        <BaseText\n          fontSize={normalAmountSizes[type][size]}\n          fontWeight={weight}\n          lineHeight={amountLineHeights[type][size]}\n          color={amountValueColor}\n          fontFamily={numberFontFamily}\n          as={isReactNative ? undefined : 'span'}\n        >\n          {amount.integer}\n        </BaseText>\n        <BaseText\n          fontWeight={weight}\n          fontSize={affixFontSize}\n          fontFamily={numberFontFamily}\n          color={amountValueColor}\n          as={isReactNative ? undefined : 'span'}\n          opacity={isAffixSubtle ? opacity[800] : 1}\n        >\n          {amount.decimal}\n          {amount.fraction}\n        </BaseText>\n      </AmountWrapper>\n    );\n  }\n\n  return (\n    <BaseText\n      fontSize={normalAmountSizes[type][size]}\n      fontWeight={weight}\n      fontFamily={numberFontFamily}\n      color={amountValueColor}\n      lineHeight={amountLineHeights[type][size]}\n    >\n      {amount.integer}\n      {amount.decimal}\n      {amount.fraction}\n      {amount.compact}\n    </BaseText>\n  );\n};\n\ntype FormatAmountWithSuffixType = {\n  suffix: AmountProps['suffix'];\n  value: number;\n  currency: AmountProps['currency'];\n  fractionDigits?: number;\n};\n\n/**\n * Returns a parsed object based on the suffix passed in parameters\n * === Logic ===\n * value = 12500.45 \n * if suffix === 'decimals' => {\n    \"integer\": \"12,500\",\n    \"decimal\": \".\",\n    \"fraction\": \"45\",\n    \"compact\": \"K\",\n    \"isPrefixSymbol\": false,\n    \"rawParts\": [{\"type\": \"integer\",\"value\": \"12\"},{\"type\": \"group\",\"value\": \",\"},{\"type\": \"integer\",\"value\": \"500\"},{\"type\": \"decimal\",\"value\": \".\"},{\"type\": \"fraction\",\"value\": \"45\"}]\n}\n * @returns {AmountType}\n */\nexport const getAmountByParts = ({\n  suffix,\n  value,\n  currency,\n  fractionDigits = 2,\n}: FormatAmountWithSuffixType): AmountType => {\n  try {\n    switch (suffix) {\n      case 'decimals': {\n        const options = {\n          intlOptions: {\n            maximumFractionDigits: fractionDigits,\n            minimumFractionDigits: fractionDigits,\n          },\n          currency,\n        } as const;\n        return pollyfilledFormatNumberByParts(value, options);\n      }\n      case 'humanize': {\n        const options = {\n          intlOptions: {\n            notation: 'compact',\n            maximumFractionDigits: 2,\n            trailingZeroDisplay: 'stripIfInteger',\n          },\n          currency,\n        } as const;\n        return pollyfilledFormatNumberByParts(value, options);\n      }\n\n      default: {\n        const options = {\n          intlOptions: {\n            maximumFractionDigits: 0,\n            roundingMode: 'floor',\n          },\n          currency,\n        } as const;\n        return pollyfilledFormatNumberByParts(value, options);\n      }\n    }\n  } catch (err: unknown) {\n    return {\n      integer: `${value}`,\n      currency,\n    };\n  }\n};\n\nconst _Amount = (\n  {\n    value,\n    suffix = 'decimals',\n    type = 'body',\n    size = 'medium',\n    weight = 'regular',\n    isAffixSubtle = true,\n    isStrikethrough = false,\n    color,\n    currencyIndicator = 'currency-symbol',\n    currency = 'INR',\n    fractionDigits = 2,\n    testID,\n    ...rest\n  }: AmountProps,\n  ref: React.Ref<BladeElementRef>,\n): ReactElement => {\n  if (__DEV__) {\n    if (typeof value !== 'number') {\n      throwBladeError({\n        message: '`value` prop must be of type `number` for Amount.',\n        moduleName: 'Amount',\n      });\n    }\n    // @ts-expect-error neutral color should throw error\n    if (color === 'neutral') {\n      throwBladeError({\n        message: '`neutral` color is not supported.',\n        moduleName: 'Amount',\n      });\n    }\n\n    const bodySizes = objectKeysWithType(normalAmountSizes.body);\n    if ((type === 'body' || !type) && !bodySizes.includes(size)) {\n      throwBladeError({\n        message: `size=\"${size}\" is not allowed with type=\"body\"`,\n        moduleName: 'Amount',\n      });\n    }\n\n    const displaySizes = objectKeysWithType(normalAmountSizes.display);\n    if (type === 'display' && !displaySizes.includes(size)) {\n      throwBladeError({\n        message: `size=\"${size}\" is not allowed with type=\"display\"`,\n        moduleName: 'Amount',\n      });\n    }\n\n    const headingSizes = objectKeysWithType(normalAmountSizes.heading);\n    if (type === 'heading' && !headingSizes.includes(size)) {\n      throwBladeError({\n        message: `size=\"${size}\" is not allowed with type=\"heading\"`,\n        moduleName: 'Amount',\n      });\n    }\n  }\n\n  const { amountValueColor } = getTextColorProps({\n    color,\n  });\n\n  const renderedValue = getAmountByParts({ suffix, value, currency, fractionDigits });\n  const isPrefixSymbol = renderedValue.isPrefixSymbol ?? true;\n  const currencySymbol = renderedValue.currency ?? currency;\n\n  const currencyPosition = isPrefixSymbol ? 'left' : 'right';\n  const currencySymbolOrCode = currencyIndicator === 'currency-symbol' ? currencySymbol : currency;\n\n  const currencyFontSize = isAffixSubtle\n    ? subtleFontSizes[type][size]\n    : normalAmountSizes[type][size];\n  const isReactNative = getPlatformType() === 'react-native';\n\n  return (\n    <BaseBox\n      ref={ref as never}\n      display={(isReactNative ? 'flex' : 'inline-flex') as never}\n      flexDirection=\"row\"\n      {...metaAttribute({ name: MetaConstants.Amount, testID })}\n      {...getStyledProps(rest)}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      <BaseBox\n        display={(isReactNative ? 'flex' : 'inline-flex') as never}\n        alignItems=\"baseline\"\n        flexDirection=\"row\"\n        position=\"relative\"\n      >\n        {renderedValue.minusSign ? (\n          <BaseText\n            fontSize={normalAmountSizes[type][size]}\n            fontWeight={weight}\n            lineHeight={amountLineHeights[type][size]}\n            color={amountValueColor}\n            as={isReactNative ? undefined : 'span'}\n            marginX=\"spacing.2\"\n          >\n            {renderedValue.minusSign}\n          </BaseText>\n        ) : null}\n        {currencyPosition === 'left' && (\n          <BaseText\n            marginRight=\"spacing.1\"\n            fontWeight={weight}\n            fontSize={currencyFontSize}\n            color={amountValueColor}\n            as={isReactNative ? undefined : 'span'}\n            opacity={isAffixSubtle ? opacity[800] : 1}\n          >\n            {currencySymbolOrCode}\n          </BaseText>\n        )}\n        <AmountValue\n          amount={renderedValue}\n          amountValueColor={amountValueColor}\n          type={type}\n          weight={weight}\n          size={size}\n          isAffixSubtle={isAffixSubtle}\n          suffix={suffix}\n          currency={currency}\n        />\n        {currencyPosition === 'right' && (\n          <BaseText\n            marginLeft=\"spacing.1\"\n            fontWeight={weight}\n            fontSize={currencyFontSize}\n            color={amountValueColor}\n            as={isReactNative ? undefined : 'span'}\n            opacity={isAffixSubtle ? opacity[800] : 1}\n          >\n            {currencySymbolOrCode}\n          </BaseText>\n        )}\n        {isStrikethrough && (\n          // eslint-disable-next-line @typescript-eslint/prefer-ts-expect-error\n          // @ts-ignore: the borderBottomColor error below is thrown here as well\n          <BaseBox\n            // eslint-disable-next-line @typescript-eslint/prefer-ts-expect-error\n            // @ts-ignore- intentionally setting the border color to the color prop for this hacky strikethrough\n            borderBottomColor={amountValueColor}\n            borderBottomWidth={type === 'body' ? 'thin' : 'thicker'}\n            borderBottomStyle=\"solid\"\n            position=\"absolute\"\n            width=\"100%\"\n            top=\"50%\"\n          />\n        )}\n      </BaseBox>\n    </BaseBox>\n  );\n};\n\nconst Amount = assignWithoutSideEffects(React.forwardRef(_Amount), {\n  displayName: 'Amount',\n  componentId: 'Amount',\n});\n\nexport type { AmountProps };\nexport { Amount };\n"],"names":["stripTrailingZerosFromParts","parts","decimalPart","rawParts","filter","_ref","type","map","_ref2","value","join","hasFraction","some","_ref3","test","decimal","fraction","_ref4","pollyfilledFormatNumberByParts","options","_options$intlOptions","formatNumberByParts","intlOptions","trailingZeroDisplay","getTextColorProps","_ref5","color","props","amountValueColor","AmountValue","_ref6","amount","_ref6$size","size","_ref6$type","_ref6$weight","weight","isAffixSubtle","suffix","isReactNative","getPlatformType","affixFontSize","subtleFontSizes","normalAmountSizes","numberFontFamily","AmountWrapper","Text","React","Fragment","_jsxs","children","_jsx","BaseText","fontSize","fontWeight","lineHeight","amountLineHeights","fontFamily","as","undefined","integer","opacity","compact","getAmountByParts","_ref7","currency","_ref7$fractionDigits","fractionDigits","maximumFractionDigits","minimumFractionDigits","notation","roundingMode","err","_Amount","_ref8","ref","_renderedValue$isPref","_renderedValue$curren","_ref8$suffix","_ref8$type","_ref8$size","_ref8$weight","_ref8$isAffixSubtle","_ref8$isStrikethrough","isStrikethrough","_ref8$currencyIndicat","currencyIndicator","_ref8$currency","_ref8$fractionDigits","testID","rest","_objectWithoutProperties","_excluded","__DEV__","throwBladeError","message","moduleName","bodySizes","objectKeysWithType","body","includes","displaySizes","display","headingSizes","heading","_getTextColorProps","renderedValue","isPrefixSymbol","currencySymbol","currencyPosition","currencySymbolOrCode","currencyFontSize","BaseBox","Object","assign","flexDirection","metaAttribute","name","MetaConstants","Amount","getStyledProps","makeAnalyticsAttribute","alignItems","position","minusSign","marginX","marginRight","marginLeft","borderBottomColor","borderBottomWidth","borderBottomStyle","width","top","assignWithoutSideEffects","forwardRef","displayName","componentId"],"mappings":"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"}