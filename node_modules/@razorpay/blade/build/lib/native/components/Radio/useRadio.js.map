{"version":3,"file":"useRadio.js","sources":["../../../../../src/components/Radio/useRadio.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport React from 'react';\nimport type { GestureResponderEvent } from 'react-native';\nimport { useControllableState } from '~utils/useControllable';\nimport { useId } from '~utils/useId';\nimport { getPlatformType } from '~src/utils';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { throwBladeError } from '~utils/logger';\n\nexport type OnChange = ({\n  isChecked,\n  event,\n  value,\n}: {\n  isChecked: boolean;\n  event: React.ChangeEvent;\n  value?: string;\n}) => void;\n\ntype UseRadioProps = {\n  hasError?: boolean;\n  /**\n   * If `true`, The Radio will be checked. This also makes the Radio controlled\n   * Use `onChange` to update its value\n   *\n   * @default false\n   */\n  isChecked?: boolean;\n  /**\n   * If `true`, the Radio will be initially checked. This also makes the Radio uncontrolled\n   *\n   * @default false\n   */\n  defaultChecked?: boolean;\n  /**\n   * The callback invoked when the checked state of the `Radio` changes.\n   */\n  onChange?: OnChange;\n  /**\n   * The name of the input field in a Radio\n   * (Useful for form submission).\n   */\n  name?: string;\n  /**\n   * The value to be used in the Radio input.\n   * This is the value that will be returned on form submission.\n   */\n  value?: string;\n  /**\n   * If `true`, the Radio will be disabled\n   *\n   * @default false\n   */\n  isDisabled?: boolean;\n  /**\n   * If `true`, the Radio input is marked as required,\n   * and `required` attribute will be added\n   *\n   * @default false\n   */\n  isRequired?: boolean;\n};\n\nconst useRadio = ({\n  isChecked,\n  defaultChecked,\n  isDisabled,\n  isRequired,\n  hasError,\n  onChange,\n  name,\n  value,\n}: UseRadioProps) => {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const isReactNative = getPlatformType() === 'react-native';\n  if (__DEV__) {\n    if (isChecked && defaultChecked) {\n      throwBladeError({\n        message: `Do not provide both 'isChecked' and 'defaultChecked' to useRadio. Consider if you want this component to be controlled or uncontrolled.`,\n        moduleName: 'Radio',\n      });\n    }\n  }\n\n  const [radioState, setRadioState] = useControllableState({\n    value: isChecked,\n    defaultValue: defaultChecked ?? false,\n  });\n\n  const handleOnChange = (event: React.ChangeEvent<HTMLInputElement> | GestureResponderEvent) => {\n    if (isDisabled) {\n      event.stopPropagation();\n      event.preventDefault();\n      return;\n    }\n\n    setRadioState((checked) => {\n      // Prevent radio to be unchecked when clicked again\n      // Once checked radios don't act as toggle buttons\n      if (checked === false) {\n        onChange?.({\n          isChecked: true,\n          event: event as React.ChangeEvent,\n          value,\n        });\n        return true;\n      }\n      return checked;\n    });\n  };\n\n  const state = {\n    isChecked: radioState,\n    setChecked: setRadioState,\n  };\n\n  const idBase = useId('radio');\n  const helpTextId = useId(`${idBase}-helptext`);\n\n  const accessibilityProps = makeAccessible({\n    role: 'radio',\n    required: Boolean(isRequired),\n    invalid: Boolean(hasError),\n    disabled: Boolean(isDisabled),\n    checked: radioState,\n    describedBy: helpTextId,\n  });\n\n  if (isReactNative) {\n    return {\n      state,\n      inputProps: {\n        onPress: handleOnChange,\n        name,\n        value,\n        ...accessibilityProps,\n      },\n    };\n  }\n\n  return {\n    state,\n    ids: { helpTextId },\n    inputProps: {\n      ref: inputRef,\n      onChange: handleOnChange,\n      type: 'radio',\n      name,\n      value,\n      checked: radioState,\n      disabled: isDisabled,\n      required: isRequired,\n      ...accessibilityProps,\n    },\n  };\n};\n\nexport type InputProps = ReturnType<typeof useRadio>['inputProps'];\n\nexport { useRadio };\n"],"names":["useRadio","_ref","isChecked","defaultChecked","isDisabled","isRequired","hasError","onChange","name","value","inputRef","React","useRef","isReactNative","getPlatformType","__DEV__","throwBladeError","message","moduleName","_useControllableState","useControllableState","defaultValue","_useControllableState2","_slicedToArray","radioState","setRadioState","handleOnChange","event","stopPropagation","preventDefault","checked","state","setChecked","idBase","useId","helpTextId","accessibilityProps","makeAccessible","role","required","Boolean","invalid","disabled","describedBy","inputProps","Object","assign","onPress","ids","ref","type"],"mappings":"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"}