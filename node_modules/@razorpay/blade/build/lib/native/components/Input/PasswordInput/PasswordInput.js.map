{"version":3,"file":"PasswordInput.js","sources":["../../../../../../src/components/Input/PasswordInput/PasswordInput.tsx"],"sourcesContent":["import React from 'react';\nimport type { BaseInputProps } from '../BaseInput';\nimport { BaseInput } from '../BaseInput';\nimport { EyeIcon, EyeOffIcon } from '~components/Icons';\nimport BaseBox from '~components/Box/BaseBox';\nimport { CharacterCounter } from '~components/Form/CharacterCounter';\nimport { IconButton } from '~components/Button/IconButton';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { MetaConstants } from '~utils/metaAttribute';\nimport type { DataAnalyticsAttribute, BladeElementRef } from '~utils/types';\n\ntype PasswordInputExtraProps = {\n  /**\n   * Shows a reveal button to toggle password visibility\n   *\n   * @default true\n   */\n  showRevealButton?: boolean;\n\n  /**\n   * Displays asterisk (`*`) when `isRequired` is enabled\n   *\n   * @default none\n   */\n  necessityIndicator?: Exclude<BaseInputProps['necessityIndicator'], 'optional'>;\n\n  /**\n   * Determines what autoComplete suggestion type to show. Defaults to using platform heuristics.\n   *\n   * It's not recommended to turn this off in favor of safe password practices.\n   * Providing `password` or `newPassword` is more informative to the platform for browser autofill or password managers.\n   *\n   * **Note**: Using `newPassword` on iOS has some [known issue](https://github.com/facebook/react-native/issues/21911) on React Native\n   *\n   * Internally it'll render platform specific attributes:\n   *\n   * - web: `autocomplete`\n   * - iOS: `textContentType`\n   * - android: `autoComplete`\n   *\n   */\n  autoCompleteSuggestionType?: Extract<\n    BaseInputProps['autoCompleteSuggestionType'],\n    'none' | 'password' | 'newPassword'\n  >;\n};\n\ntype PasswordInputCommonProps = Pick<\n  BaseInputProps,\n  | 'label'\n  | 'accessibilityLabel'\n  | 'labelPosition'\n  | 'labelSuffix'\n  | 'labelTrailing'\n  | 'maxCharacters'\n  | 'validationState'\n  | 'errorText'\n  | 'successText'\n  | 'helpText'\n  | 'isDisabled'\n  | 'defaultValue'\n  | 'placeholder'\n  | 'isRequired'\n  | 'value'\n  | 'onChange'\n  | 'onBlur'\n  | 'onSubmit'\n  | 'onFocus'\n  | 'name'\n  | 'autoFocus'\n  | 'keyboardReturnKeyType'\n  | 'autoCompleteSuggestionType'\n  | 'testID'\n  | 'size'\n  | keyof DataAnalyticsAttribute\n> &\n  PasswordInputExtraProps &\n  StyledPropsBlade;\n\n/*\n  Mandatory accessibilityLabel prop when label is not provided\n*/\ntype PasswordInputPropsWithA11yLabel = {\n  /**\n   * Label to be shown for the input field\n   */\n  label?: undefined;\n  /**\n   * Accessibility label for the input\n   */\n  accessibilityLabel: string;\n};\n\n/*\n  Optional accessibilityLabel prop when label is provided\n*/\ntype PasswordInputPropsWithLabel = {\n  /**\n   * Label to be shown for the input field\n   */\n  label: string;\n  /**\n   * Accessibility label for the input\n   */\n  accessibilityLabel?: string;\n};\n\ntype PasswordInputProps = (PasswordInputPropsWithA11yLabel | PasswordInputPropsWithLabel) &\n  PasswordInputCommonProps;\n\nconst _PasswordInput: React.ForwardRefRenderFunction<BladeElementRef, PasswordInputProps> = (\n  {\n    label,\n    accessibilityLabel,\n    labelPosition = 'top',\n    showRevealButton = true,\n    maxCharacters,\n    validationState,\n    errorText,\n    successText,\n    helpText,\n    isDisabled = false,\n    defaultValue,\n    placeholder,\n    isRequired = false,\n    necessityIndicator = 'none',\n    value,\n    onChange,\n    onFocus,\n    onBlur,\n    onSubmit,\n    name,\n    autoFocus = false,\n    keyboardReturnKeyType = 'done',\n    autoCompleteSuggestionType,\n    testID,\n    size = 'medium',\n    labelSuffix,\n    labelTrailing,\n    ...rest\n  },\n  ref,\n) => {\n  const [isRevealed, setIsRevealed] = React.useState(false);\n  const isEnabled = !isDisabled;\n\n  // If input is disabled reveal button shouldn't be present and input should be masked\n  const isRevealedAndEnabled = isRevealed && isEnabled;\n\n  const toggleIsRevealed = (): void => setIsRevealed((revealed) => !revealed);\n  const iconAccessibilityLabel = isRevealedAndEnabled ? 'Hide password' : 'Show password';\n  const type = isRevealedAndEnabled ? 'text' : 'password';\n\n  const revealButtonIcon = isRevealedAndEnabled ? EyeOffIcon : EyeIcon;\n  const revealButton =\n    showRevealButton && !isDisabled ? (\n      <IconButton\n        size=\"medium\"\n        icon={revealButtonIcon}\n        onClick={toggleIsRevealed}\n        accessibilityLabel={iconAccessibilityLabel}\n      />\n    ) : null;\n\n  const trailingFooterSlot = (value?: string): React.ReactNode =>\n    maxCharacters ? (\n      <BaseBox marginTop=\"spacing.2\" marginRight=\"spacing.1\">\n        <CharacterCounter currentCount={value?.length ?? 0} maxCount={maxCharacters} />\n      </BaseBox>\n    ) : null;\n\n  return (\n    <BaseInput\n      ref={ref}\n      componentName={MetaConstants.PasswordInput}\n      id=\"password-field\"\n      label={label as string}\n      accessibilityLabel={accessibilityLabel}\n      hideLabelText={!Boolean(label)}\n      labelPosition={labelPosition}\n      type={type}\n      labelSuffix={labelSuffix}\n      labelTrailing={labelTrailing}\n      trailingInteractionElement={revealButton}\n      trailingFooterSlot={trailingFooterSlot}\n      maxCharacters={maxCharacters}\n      validationState={validationState}\n      errorText={errorText}\n      successText={successText}\n      helpText={helpText}\n      isDisabled={isDisabled}\n      defaultValue={defaultValue}\n      placeholder={placeholder}\n      isRequired={isRequired}\n      necessityIndicator={necessityIndicator}\n      value={value}\n      onChange={onChange}\n      onBlur={onBlur}\n      onSubmit={onSubmit}\n      onFocus={onFocus}\n      name={name}\n      // eslint-disable-next-line jsx-a11y/no-autofocus\n      autoFocus={autoFocus}\n      autoCompleteSuggestionType={autoCompleteSuggestionType}\n      keyboardReturnKeyType={keyboardReturnKeyType}\n      autoCapitalize=\"none\"\n      testID={testID}\n      size={size}\n      {...rest}\n    />\n  );\n};\n\n// nosemgrep\nconst PasswordInput = assignWithoutSideEffects(React.forwardRef(_PasswordInput), {\n  displayName: 'PasswordInput',\n});\n\nexport type { PasswordInputProps };\nexport { PasswordInput };\n"],"names":["_PasswordInput","_ref","ref","label","accessibilityLabel","_ref$labelPosition","labelPosition","_ref$showRevealButton","showRevealButton","maxCharacters","validationState","errorText","successText","helpText","_ref$isDisabled","isDisabled","defaultValue","placeholder","_ref$isRequired","isRequired","_ref$necessityIndicat","necessityIndicator","value","onChange","onFocus","onBlur","onSubmit","name","_ref$autoFocus","autoFocus","_ref$keyboardReturnKe","keyboardReturnKeyType","autoCompleteSuggestionType","testID","_ref$size","size","labelSuffix","labelTrailing","rest","_objectWithoutProperties","_excluded","_React$useState","React","useState","_React$useState2","_slicedToArray","isRevealed","setIsRevealed","isEnabled","isRevealedAndEnabled","toggleIsRevealed","revealed","iconAccessibilityLabel","type","revealButtonIcon","EyeOffIcon","EyeIcon","revealButton","_jsx","IconButton","icon","onClick","trailingFooterSlot","_value$length","BaseBox","marginTop","marginRight","children","CharacterCounter","currentCount","length","maxCount","BaseInput","Object","assign","componentName","MetaConstants","PasswordInput","id","hideLabelText","Boolean","trailingInteractionElement","autoCapitalize","assignWithoutSideEffects","forwardRef","displayName"],"mappings":"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"}