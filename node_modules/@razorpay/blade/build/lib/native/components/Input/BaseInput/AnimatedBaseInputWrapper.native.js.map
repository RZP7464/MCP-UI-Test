{"version":3,"file":"AnimatedBaseInputWrapper.native.js","sources":["../../../../../../src/components/Input/BaseInput/AnimatedBaseInputWrapper.native.tsx"],"sourcesContent":["import React from 'react';\nimport Animated, {\n  runOnJS,\n  useAnimatedStyle,\n  useSharedValue,\n  withTiming,\n} from 'react-native-reanimated';\nimport styled from 'styled-components';\nimport type { BaseInputWrapperProps } from './types';\nimport {\n  getAnimatedBaseInputWrapperMaxHeight,\n  getBaseInputState,\n  getInputBackgroundAndBorderStyles,\n} from './baseInputStyles';\nimport {\n  baseInputBackgroundColor,\n  baseInputBorderBackgroundMotion,\n  baseInputBorderColor,\n  baseInputHeight,\n  baseInputWrapperMaxHeight,\n} from './baseInputTokens';\nimport { castNativeType, makeMotionTime } from '~utils';\nimport { useTheme } from '~components/BladeProvider';\nimport getIn from '~utils/lodashButBetter/get';\nimport type { EasingFactoryFn } from '~tokens/global';\n\nconst StyledBaseInputWrapper = styled(Animated.View)<BaseInputWrapperProps>((props) => ({\n  ...getInputBackgroundAndBorderStyles({\n    theme: props.theme,\n    isFocused: props.currentInteraction === 'focus',\n    isDisabled: props.isDisabled,\n    validationState: props.validationState,\n    isTextArea: props.isTextArea,\n    isDropdownTrigger: props.isDropdownTrigger,\n    isTableInputCell: props.isTableInputCell,\n  }),\n}));\n\nconst _AnimatedBaseInputWrapper: React.ForwardRefRenderFunction<\n  HTMLDivElement,\n  BaseInputWrapperProps & {\n    showAllTags?: boolean;\n    setShowAllTagsWithAnimation: (showAllTagsWithAnimation: boolean) => void;\n  }\n> = (\n  {\n    showAllTags,\n    isTextArea,\n    numberOfLines,\n    setShowAllTagsWithAnimation,\n    children,\n    maxTagRows,\n    isDropdownTrigger,\n    ...rest\n  },\n  ref,\n): React.ReactElement => {\n  const { theme } = useTheme();\n  const sharedHeight = useSharedValue<number>(baseInputHeight[rest.size]); // Initial max-width value\n\n  React.useEffect(() => {\n    if (!isDropdownTrigger) {\n      return;\n    }\n\n    sharedHeight.value = withTiming(\n      showAllTags ? baseInputWrapperMaxHeight[rest.size] : baseInputHeight[rest.size],\n      {\n        duration: theme.motion.duration.xquick,\n        easing: castNativeType(theme.motion.easing.exit),\n      },\n      (isComplete) => {\n        if (isComplete && !showAllTags) {\n          runOnJS(setShowAllTagsWithAnimation)(false);\n        }\n      },\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [showAllTags]);\n\n  const animatedStyle = useAnimatedStyle(() => {\n    return {\n      maxHeight: sharedHeight.value,\n    };\n  });\n\n  const animatedStyleObject = maxTagRows === 'expandable' ? animatedStyle : {};\n  const maxHeightStyleObject = {\n    maxHeight: getAnimatedBaseInputWrapperMaxHeight({\n      maxTagRows,\n      showAllTags,\n      size: rest.size,\n    }),\n  };\n\n  const baseInputState = getBaseInputState({\n    isFocused: rest.currentInteraction === 'focus',\n    isHovered: rest.currentInteraction === 'hover',\n    isDisabled: Boolean(rest.isDisabled),\n  });\n\n  let borderColor = getIn(theme.colors, baseInputBorderColor[baseInputState]);\n  const backgroundColor = getIn(theme.colors, baseInputBackgroundColor[baseInputState]);\n\n  if (rest.validationState === 'error') {\n    borderColor = getIn(theme.colors, baseInputBorderColor.error);\n  } else if (rest.validationState === 'success') {\n    borderColor = getIn(theme.colors, baseInputBorderColor.success);\n  }\n\n  const motionConfig: {\n    duration: number;\n    easing: EasingFactoryFn;\n  } = {\n    duration: castNativeType(\n      makeMotionTime(\n        getIn(\n          theme.motion.duration,\n          baseInputBorderBackgroundMotion[rest.currentInteraction === 'focus' ? 'enter' : 'exit']\n            .duration,\n        ),\n      ),\n    ),\n    easing: castNativeType(\n      theme.motion.easing[\n        baseInputBorderBackgroundMotion[rest.currentInteraction === 'focus' ? 'enter' : 'exit']\n          .easing\n      ],\n    ),\n  };\n\n  const animatedBorderAndBackgroundStyle = useAnimatedStyle(\n    () => ({\n      borderWidth: rest.isTableInputCell ? theme.border.width.none : theme.border.width.thin,\n      borderRadius: theme.border.radius.medium,\n      borderStyle: 'solid',\n      backgroundColor: withTiming(backgroundColor, motionConfig),\n      borderColor: withTiming(borderColor, motionConfig),\n    }),\n    [borderColor, backgroundColor, motionConfig],\n  );\n\n  return (\n    <StyledBaseInputWrapper\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      ref={ref as any}\n      style={[\n        // We only want to define height in tagged inputs except height for TextArea is set on TextArea based on numberOfLines prop\n        isDropdownTrigger && !isTextArea\n          ? {\n              ...maxHeightStyleObject,\n              ...animatedStyleObject,\n            }\n          : {},\n        animatedBorderAndBackgroundStyle,\n      ]}\n      isDropdownTrigger={isDropdownTrigger}\n      numberOfLines={numberOfLines}\n      setShowAllTagsWithAnimation={setShowAllTagsWithAnimation}\n      {...rest}\n    >\n      {children}\n    </StyledBaseInputWrapper>\n  );\n};\n\nconst AnimatedBaseInputWrapper = React.forwardRef(_AnimatedBaseInputWrapper);\n\nexport { AnimatedBaseInputWrapper };\n"],"names":["StyledBaseInputWrapper","styled","Animated","View","props","Object","assign","getInputBackgroundAndBorderStyles","theme","isFocused","currentInteraction","isDisabled","validationState","isTextArea","isDropdownTrigger","isTableInputCell","_AnimatedBaseInputWrapper","_ref","ref","showAllTags","numberOfLines","setShowAllTagsWithAnimation","children","maxTagRows","rest","_objectWithoutProperties","_excluded","_useTheme","useTheme","sharedHeight","useSharedValue","baseInputHeight","size","React","useEffect","value","withTiming","baseInputWrapperMaxHeight","duration","motion","xquick","easing","castNativeType","exit","isComplete","runOnJS","animatedStyle","useAnimatedStyle","maxHeight","animatedStyleObject","maxHeightStyleObject","getAnimatedBaseInputWrapperMaxHeight","baseInputState","getBaseInputState","isHovered","Boolean","borderColor","getIn","colors","baseInputBorderColor","backgroundColor","baseInputBackgroundColor","error","success","motionConfig","makeMotionTime","baseInputBorderBackgroundMotion","animatedBorderAndBackgroundStyle","borderWidth","border","width","none","thin","borderRadius","radius","medium","borderStyle","_jsx","style","AnimatedBaseInputWrapper","forwardRef"],"mappings":"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"}