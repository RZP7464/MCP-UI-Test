import React__default from 'react';
import Animated, { useSharedValue, Keyframe, useAnimatedStyle, withTiming, runOnJS, Easing } from 'react-native-reanimated';
import { Tag } from './Tag.js';
import { TAG_MAX_WIDTH_START, TAG_OPACITY_START, TAG_OPACITY_END, TAG_MAX_WIDTH_END } from './tagAnimationConfig.js';
import 'react-native';
import '@babel/runtime/helpers/slicedToArray';
import { castNativeType } from '../../utils/platform/castUtils.js';
import { makeMotionTime } from '../../utils/makeMotionTime/makeMotionTime.native.js';
import useTheme from '../BladeProvider/useTheme.js';
import 'styled-components/native';
import '@gorhom/portal';
import 'react-native-gesture-handler';
import '../BottomSheet/BottomSheetStack.js';
import { jsx } from 'react/jsx-runtime';

var useAnimatedTag=function useAnimatedTag(onAnimationEndCallback){var maxWidth=useSharedValue(TAG_MAX_WIDTH_START);var opacity=useSharedValue(TAG_OPACITY_START);var _useTheme=useTheme(),theme=_useTheme.theme;var entering=new Keyframe({0:{opacity:TAG_OPACITY_END},100:{opacity:TAG_OPACITY_START,easing:theme.motion.easing.exit}}).duration(makeMotionTime(theme.motion.duration.xquick));var animate=function animate(){maxWidth.value=withTiming(TAG_MAX_WIDTH_END,{duration:makeMotionTime(theme.motion.duration.xquick),easing:castNativeType(theme.motion.easing.exit)},function(isComplete){if(isComplete){runOnJS(onAnimationEndCallback)();}});opacity.value=withTiming(TAG_OPACITY_END,{duration:makeMotionTime(theme.motion.duration.xquick),easing:Easing.out(Easing.exp)});};var animatedStyle=useAnimatedStyle(function(){return {maxWidth:maxWidth.value,opacity:opacity.value};});return {animate:animate,animatedStyle:animatedStyle,entering:entering};};var AnimatedTag=function AnimatedTag(_ref){var children=_ref.children,currentTagIndex=_ref.currentTagIndex,activeTagIndex=_ref.activeTagIndex,onDismiss=_ref.onDismiss,tagsLength=_ref.tagsLength,isDisabled=_ref.isDisabled;var onAnimationEnd=function onAnimationEnd(){onDismiss({tagIndex:currentTagIndex,tagName:children});};var prevSelectionsLength=React__default.useRef();var _useAnimatedTag=useAnimatedTag(onAnimationEnd),animate=_useAnimatedTag.animate,animatedStyle=_useAnimatedTag.animatedStyle,entering=_useAnimatedTag.entering;var isTagRemoved=prevSelectionsLength.current?prevSelectionsLength.current>tagsLength:false;return jsx(Animated.View,{style:animatedStyle,entering:isTagRemoved?undefined:entering,children:jsx(Tag,{_isVirtuallyFocused:currentTagIndex===activeTagIndex,_isTagInsideInput:true,onDismiss:function onDismiss(){animate();},marginRight:"spacing.3",marginY:"spacing.2",isDisabled:isDisabled,children:children})});};

export { AnimatedTag };
//# sourceMappingURL=AnimatedTag.native.js.map
