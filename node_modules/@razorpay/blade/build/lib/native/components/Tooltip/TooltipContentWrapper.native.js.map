{"version":3,"file":"TooltipContentWrapper.native.js","sources":["../../../../../src/components/Tooltip/TooltipContentWrapper.native.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-unnecessary-type-assertion */\nimport type { CSSProperties } from 'react';\nimport styled from 'styled-components/native';\nimport type { EasingFn } from 'react-native-reanimated';\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withDelay,\n  withTiming,\n} from 'react-native-reanimated';\nimport React from 'react';\nimport type { View } from 'react-native';\nimport { getTooltipContentWrapperStyles } from './getTooltipContentWrapperStyles';\nimport type { TooltipContentWrapperProps } from './types';\nimport BaseBox from '~components/Box/BaseBox';\nimport { useTheme } from '~components/BladeProvider';\nimport { size } from '~tokens/global';\nimport { castNativeType } from '~utils';\n\nconst StyledTooltipContentWrapper = styled(BaseBox)<{ collapse?: boolean; styles: CSSProperties }>(\n  ({ theme, styles }) => {\n    return getTooltipContentWrapperStyles({ theme, styles });\n  },\n);\n\nconst TooltipContentWrapper = React.forwardRef<View, TooltipContentWrapperProps>(\n  ({ children, styles, side, isVisible, ...props }, ref) => {\n    const { theme } = useTheme();\n\n    const isOppositeAxis = side === 'right' || side === 'bottom';\n    const isHorizontal = side === 'left' || side === 'right';\n    const offset = isOppositeAxis ? -size[4] : size[4];\n\n    const translate = useSharedValue(offset);\n    const opacity = useSharedValue(0);\n\n    const easing = (theme.motion.easing.entrance as unknown) as EasingFn;\n    const duration = theme.motion.duration.quick;\n\n    React.useEffect(() => {\n      const timings = { easing, duration };\n      opacity.value = withDelay(duration, withTiming(isVisible ? 1 : 0, timings));\n      translate.value = withDelay(duration, withTiming(isVisible ? 0 : offset, timings));\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isVisible]);\n\n    // @ts-expect-error types aren't liking the dynamic object prop `[transform]`\n    const animatedStyles = useAnimatedStyle(() => {\n      const transform = isHorizontal ? 'translateX' : 'translateY';\n      return {\n        opacity: opacity.value,\n        transform: [{ [transform]: translate.value }],\n      };\n    }, [isVisible]);\n\n    return (\n      <Animated.View style={animatedStyles}>\n        <StyledTooltipContentWrapper\n          styles={styles}\n          // Shadow styles need to be passed directly through native style prop\n          // Cannot be done via styled components\n          style={castNativeType(theme.elevation.lowRaised)}\n          elevation={20}\n          ref={ref as never}\n          collapse={false}\n          // if I don't assert this TS throws error\n          // I think because of the intersection type in TooltipContentWrapperProps\n          {...(props as any)}\n        >\n          {children}\n        </StyledTooltipContentWrapper>\n      </Animated.View>\n    );\n  },\n);\n\nexport { TooltipContentWrapper };\n"],"names":["StyledTooltipContentWrapper","styled","BaseBox","_ref","theme","styles","getTooltipContentWrapperStyles","TooltipContentWrapper","React","forwardRef","_ref2","ref","children","side","isVisible","props","_objectWithoutProperties","_excluded","_useTheme","useTheme","isOppositeAxis","isHorizontal","offset","size","translate","useSharedValue","opacity","easing","motion","entrance","duration","quick","useEffect","timings","value","withDelay","withTiming","animatedStyles","useAnimatedStyle","transform","_defineProperty","_jsx","Animated","View","style","Object","assign","castNativeType","elevation","lowRaised","collapse"],"mappings":";;;;;;;;;;;;;;;;;;;uDAoBA,IAAMA,2BAA2B,CAAGC,MAAM,CAACC,OAAO,CAAC,CACjD,SAAAC,IAAA,CAAuB,CAApB,IAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CAAEC,MAAM,CAAAF,IAAA,CAANE,MAAM,CACd,OAAOC,8BAA8B,CAAC,CAAEF,KAAK,CAALA,KAAK,CAAEC,MAAM,CAANA,MAAO,CAAC,CAAC,CAC1D,CACF,CAAC,CAEK,IAAAE,qBAAqB,CAAGC,cAAK,CAACC,UAAU,CAC5C,SAAAC,KAAA,CAAkDC,GAAG,CAAK,CAAA,IAAvDC,QAAQ,CAAAF,KAAA,CAARE,QAAQ,CAAEP,MAAM,CAAAK,KAAA,CAANL,MAAM,CAAEQ,IAAI,CAAAH,KAAA,CAAJG,IAAI,CAAEC,SAAS,CAAAJ,KAAA,CAATI,SAAS,CAAKC,KAAK,CAAAC,wBAAA,CAAAN,KAAA,CAAAO,SAAA,CAAA,CAC5C,IAAAC,SAAA,CAAkBC,QAAQ,EAAE,CAApBf,KAAK,CAAAc,SAAA,CAALd,KAAK,CAEb,IAAMgB,cAAc,CAAGP,IAAI,GAAK,OAAO,EAAIA,IAAI,GAAK,QAAQ,CAC5D,IAAMQ,YAAY,CAAGR,IAAI,GAAK,MAAM,EAAIA,IAAI,GAAK,OAAO,CACxD,IAAMS,MAAM,CAAGF,cAAc,CAAG,CAACG,IAAI,CAAC,CAAC,CAAC,CAAGA,IAAI,CAAC,CAAC,CAAC,CAElD,IAAMC,SAAS,CAAGC,cAAc,CAACH,MAAM,CAAC,CACxC,IAAMI,OAAO,CAAGD,cAAc,CAAC,CAAC,CAAC,CAEjC,IAAME,MAAM,CAAIvB,KAAK,CAACwB,MAAM,CAACD,MAAM,CAACE,QAAgC,CACpE,IAAMC,QAAQ,CAAG1B,KAAK,CAACwB,MAAM,CAACE,QAAQ,CAACC,KAAK,CAE5CvB,cAAK,CAACwB,SAAS,CAAC,UAAM,CACpB,IAAMC,OAAO,CAAG,CAAEN,MAAM,CAANA,MAAM,CAAEG,QAAQ,CAARA,QAAS,CAAC,CACpCJ,OAAO,CAACQ,KAAK,CAAGC,SAAS,CAACL,QAAQ,CAAEM,UAAU,CAACtB,SAAS,CAAG,CAAC,CAAG,CAAC,CAAEmB,OAAO,CAAC,CAAC,CAC3ET,SAAS,CAACU,KAAK,CAAGC,SAAS,CAACL,QAAQ,CAAEM,UAAU,CAACtB,SAAS,CAAG,CAAC,CAAGQ,MAAM,CAAEW,OAAO,CAAC,CAAC,CAEpF,CAAC,CAAE,CAACnB,SAAS,CAAC,CAAC,CAGf,IAAMuB,cAAc,CAAGC,gBAAgB,CAAC,UAAM,CAC5C,IAAMC,SAAS,CAAGlB,YAAY,CAAG,YAAY,CAAG,YAAY,CAC5D,OAAO,CACLK,OAAO,CAAEA,OAAO,CAACQ,KAAK,CACtBK,SAAS,CAAE,CAAAC,eAAA,CAAA,EAAA,CAAID,SAAS,CAAGf,SAAS,CAACU,KAAK,EAC5C,CAAC,CACH,CAAC,CAAE,CAACpB,SAAS,CAAC,CAAC,CAEf,OACE2B,GAAA,CAACC,QAAQ,CAACC,IAAI,CAACC,CAAAA,KAAK,CAAEP,cAAe,CAAAzB,QAAA,CACnC6B,GAAA,CAACzC,2BAA2B,CAAA6C,MAAA,CAAAC,MAAA,CAAA,CAC1BzC,MAAM,CAAEA,MAAO,CAGfuC,KAAK,CAAEG,cAAc,CAAC3C,KAAK,CAAC4C,SAAS,CAACC,SAAS,CAAE,CACjDD,SAAS,CAAE,EAAG,CACdrC,GAAG,CAAEA,GAAa,CAClBuC,QAAQ,CAAE,KAAM,CAGXnC,CAAAA,KAAK,CAAAH,CAAAA,QAAA,CAETA,QAAQ,CAAA,CACkB,CAAC,CACjB,CAAC,CAEpB,CACF;;;;"}