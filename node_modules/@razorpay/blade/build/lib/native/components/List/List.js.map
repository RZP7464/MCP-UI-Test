{"version":3,"file":"List.js","sources":["../../../../../src/components/List/List.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport styled from 'styled-components';\nimport { ListProvider, useListContext } from './ListContext';\nimport { UnorderedList } from './UnorderedList';\nimport { OrderedList } from './OrderedList';\nimport type { ListItemProps } from './ListItem';\nimport getIn from '~utils/lodashButBetter/get';\nimport type { IconComponent, IconProps } from '~components/Icons';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { BladeElementRef, DotNotationSpacingStringToken, TestID } from '~utils/types';\nimport BaseBox from '~components/Box/BaseBox';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { makeSpace } from '~utils/makeSpace';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { isValidAllowedChildren } from '~utils/isValidAllowedChildren';\nimport { throwBladeError } from '~utils/logger';\n\ntype ListCommonProps = {\n  /**\n   * ListItem to be rendered for the List.\n   *\n   */\n  children: React.ReactElement<ListItemProps> | React.ReactElement<ListItemProps>[];\n  /**\n   * Sets the variant to be rendered for the List.\n   *\n   * @default 'unordered'\n   */\n  variant?: 'unordered' | 'ordered' | 'ordered-filled';\n  /**\n   * Sets the size for the List.\n   *\n   * @default 'medium'\n   */\n  size?: 'small' | 'medium' | 'large';\n} & TestID &\n  StyledPropsBlade;\n\ntype ListWithIconProps = ListCommonProps & {\n  variant?: 'unordered';\n  icon?: IconComponent;\n  iconColor?: IconProps['color'];\n};\ntype ListWithoutIconProps = ListCommonProps & {\n  variant?: 'ordered' | 'ordered-filled';\n  icon?: undefined;\n  iconColor?: undefined;\n};\ntype ListProps = ListWithIconProps | ListWithoutIconProps;\n\nconst StyledOrderedList = styled(OrderedList)<{ marginTop?: DotNotationSpacingStringToken }>(\n  ({ marginTop, theme }) => ({\n    marginTop: marginTop ? makeSpace(getIn(theme, marginTop)) : undefined,\n  }),\n);\n\nconst StyledUnorderedList = styled(UnorderedList)<{ marginTop?: DotNotationSpacingStringToken }>(\n  ({ marginTop, theme }) => ({\n    marginTop: marginTop ? makeSpace(getIn(theme, marginTop)) : undefined,\n  }),\n);\n\n/**\n * List Component is used to display a set of related items that are composed of text/links. Each list item begins with a bullet or a number.\n *\n * ## Usage\n *\n * ```tsx\n *   <List\n *     variant='unordered'\n *     size='medium'\n *   >\n *    <ListItem>\n *      Item 1\n *      <List>\n *        <ListItem>Item 1.1</ListItem>\n *      </List>\n *    </ListItem>\n *    <ListItem>Item 2</ListItem>\n *  <List />\n * ```\n */\nconst _List = (\n  { variant = 'unordered', size, children, icon, testID, iconColor, ...styledProps }: ListProps,\n  ref: React.Ref<BladeElementRef>,\n): React.ReactElement => {\n  const ListElement = variant === 'unordered' ? StyledUnorderedList : StyledOrderedList;\n  const { level, size: listContextSize } = useListContext();\n  const listContextValue = useMemo(\n    () => ({\n      level: level ? level + 1 : 1,\n      size: size ?? listContextSize,\n      icon,\n      iconColor,\n      variant,\n    }),\n    [icon, iconColor, level, listContextSize, size, variant],\n  );\n\n  const childrenArray = React.Children.toArray(children);\n  const childListItems = childrenArray.filter((child) => {\n    if (isValidAllowedChildren(child, MetaConstants.ListItem)) {\n      return child;\n    }\n    if (__DEV__) {\n      throwBladeError({\n        message: 'You can only pass a ListItem as a child to List.',\n        moduleName: 'List',\n      });\n    }\n    return null;\n  });\n\n  return (\n    <ListProvider value={listContextValue}>\n      <BaseBox ref={ref as never} {...getStyledProps(styledProps)}>\n        <ListElement\n          {...metaAttribute({ name: MetaConstants.List, testID })}\n          {...makeAccessible({ role: 'list' })} // Role needed for react-native\n        >\n          {variant === 'unordered'\n            ? childListItems\n            : childListItems.map(\n                (child, index) =>\n                  React.cloneElement(child as React.ReactElement, { _itemNumber: index + 1 }), // adds _itemNumber for rendering ordered list bullets\n              )}\n        </ListElement>\n      </BaseBox>\n    </ListProvider>\n  );\n};\n\nconst List = assignWithoutSideEffects(React.forwardRef(_List), { componentId: MetaConstants.List });\n\nexport { List };\nexport type { ListProps };\n"],"names":["StyledOrderedList","styled","OrderedList","_ref","marginTop","theme","makeSpace","getIn","undefined","StyledUnorderedList","UnorderedList","_ref2","_List","_ref3","ref","_ref3$variant","variant","size","children","icon","testID","iconColor","styledProps","_objectWithoutProperties","_excluded","ListElement","_useListContext","useListContext","level","listContextSize","listContextValue","useMemo","childrenArray","React","Children","toArray","childListItems","filter","child","isValidAllowedChildren","MetaConstants","ListItem","__DEV__","throwBladeError","message","moduleName","_jsx","ListProvider","value","BaseBox","Object","assign","getStyledProps","metaAttribute","name","List","makeAccessible","role","map","index","cloneElement","_itemNumber","assignWithoutSideEffects","forwardRef","componentId"],"mappings":"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"}