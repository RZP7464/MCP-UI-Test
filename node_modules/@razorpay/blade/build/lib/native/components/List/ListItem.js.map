{"version":3,"file":"ListItem.js","sources":["../../../../../src/components/List/ListItem.tsx"],"sourcesContent":["import styled from 'styled-components';\nimport React from 'react';\nimport { useListContext } from './ListContext';\nimport { UnorderedItemIcon } from './ListItemIcons';\nimport { ListItemElement } from './ListItemElement';\nimport {\n  listItemBulletMarginRight,\n  listItemBulletMarginTop,\n  listItemOrderedBulletBoxSize,\n  listItemMarginBottom,\n  listItemMarginLeft,\n} from './listTokens';\nimport type { ListProps } from './List';\nimport { getOrderedListItemBullet } from './getOrderedListItemBullet';\nimport getIn from '~utils/lodashButBetter/get';\nimport { Text } from '~components/Typography';\nimport type { IconComponent } from '~components/Icons';\nimport { useTheme } from '~components/BladeProvider';\nimport BaseBox from '~components/Box/BaseBox';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { TestID } from '~utils/types';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { getComponentId, isValidAllowedChildren } from '~utils/isValidAllowedChildren';\nimport { getPlatformType } from '~utils/getPlatformType';\nimport { throwBladeError } from '~utils/logger';\n\ntype ListItemProps = {\n  /**\n   * Children to be rendered for ListItem. This can be a text, ListItemLink or another List.\n   *\n   */\n  children: React.ReactNode;\n  /**\n   * Icon to be rendered for a ListItem's bullet.\n   *\n   */\n  icon?: IconComponent;\n  /**\n   * Icon color of the ListItem's bullet.\n   *\n   */\n  iconColor?: ListProps['iconColor'];\n  /**\n   * This is a private prop to be used only for internal logic purposes.\n   *\n   */\n  _itemNumber?: undefined;\n} & TestID;\n\nconst StyledListItem = styled(ListItemElement)<{\n  level?: number;\n  variant: NonNullable<ListProps['variant']>;\n  hasIcon: boolean;\n}>(({ level, theme, variant, hasIcon }) => ({\n  marginLeft: level\n    ? getIn(\n        theme,\n        listItemMarginLeft[\n          `${variant}${variant === 'unordered' && hasIcon ? 'WithIcon' : ''}` as NonNullable<\n            ListProps['variant'] | 'unorderedWithIcon'\n          >\n        ][level],\n      )\n    : 0,\n}));\n\nconst ListItemContentChildren = ({\n  children,\n  size,\n}: {\n  children: React.ReactNode[];\n  size: NonNullable<ListProps['size']>;\n}): React.ReactElement => {\n  /* Having a <View><Text>...</Text><View/> inside <Text /> breaks vertical alignment. Issue: https://github.com/facebook/react-native/issues/31955\n    As a workaround, we wrap individual strings in their own <Text /> and handle alignment with a parent <View> (BaseBox).\n   */\n  return getPlatformType() === 'react-native' ? (\n    <BaseBox display=\"flex\" flexDirection=\"row\" flexWrap=\"wrap\">\n      {children.map((child, index) => {\n        if (typeof child === 'string') {\n          return (\n            <Text key={index} variant=\"body\" size={size}>\n              {child}\n            </Text>\n          );\n        }\n        return child;\n      })}\n    </BaseBox>\n  ) : (\n    <Text variant=\"body\" size={size}>\n      {children}\n    </Text>\n  );\n};\n\nconst _ListItem = ({\n  children,\n  icon: Icon,\n  iconColor: listItemIconColor,\n  _itemNumber,\n  testID,\n}: ListItemProps): React.ReactElement => {\n  const { level, size, icon: ListContextIcon, variant, iconColor } = useListContext();\n  const { theme, platform } = useTheme();\n  const ItemIcon = Icon ?? ListContextIcon;\n  const iconColorToken = listItemIconColor ?? iconColor ?? 'surface.icon.gray.muted';\n\n  if (__DEV__) {\n    if (level && level > 3) {\n      throwBladeError({\n        message: 'List Nesting is allowed only upto 3 levels.',\n        moduleName: 'List',\n      });\n    }\n  }\n\n  const childrenArray = React.Children.toArray(children);\n\n  // Get children that are not a List component and are valid allowed children\n  const validChildItem = childrenArray.filter((child) => {\n    if (getComponentId(child) === MetaConstants.List) return null;\n\n    if (\n      typeof child === 'string' ||\n      typeof child === 'number' ||\n      isValidAllowedChildren(child, MetaConstants.ListItemLink) ||\n      isValidAllowedChildren(child, MetaConstants.ListItemText) ||\n      isValidAllowedChildren(child, MetaConstants.ListItemCode)\n    ) {\n      return child;\n    } else if (__DEV__) {\n      throwBladeError({\n        message: `You can only pass a List, ListItemLink, ListItemCode, ListItemText or a string as a child to ListItem.`,\n        moduleName: 'ListItem',\n      });\n    }\n    return null;\n  });\n  // Get child that is a List component\n  const childList = childrenArray.filter((child) =>\n    getComponentId(child) === MetaConstants.List ? child : null,\n  );\n  const hasIcon = Boolean(ItemIcon);\n\n  return (\n    <StyledListItem\n      level={level}\n      variant={variant}\n      hasIcon={hasIcon}\n      {...metaAttribute({ name: MetaConstants.ListItem, testID })}\n    >\n      <BaseBox\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        marginBottom={listItemMarginBottom}\n      >\n        {variant === 'unordered' ? (\n          <BaseBox\n            marginRight={listItemBulletMarginRight[variant]}\n            marginTop={\n              listItemBulletMarginTop[`${variant}${hasIcon ? 'WithIcon' : ''}`][platform][size]\n            }\n            display=\"flex\"\n            alignSelf=\"flex-start\"\n          >\n            {ItemIcon ? (\n              <ItemIcon size={size} color={iconColorToken} />\n            ) : (\n              <UnorderedItemIcon level={level} />\n            )}\n          </BaseBox>\n        ) : (\n          <BaseBox\n            width={listItemOrderedBulletBoxSize[variant][platform][size]}\n            height={listItemOrderedBulletBoxSize[variant][platform][size]}\n            marginRight={listItemBulletMarginRight[variant]}\n            marginTop={listItemBulletMarginTop[variant][platform][size]}\n            display=\"flex\"\n            flexShrink={0}\n            justifyContent=\"center\"\n            alignSelf=\"flex-start\"\n            alignItems=\"center\"\n            borderRadius={variant === 'ordered-filled' ? 'max' : undefined}\n            backgroundColor={\n              variant === 'ordered-filled'\n                ? getIn(theme.colors, 'feedback.background.neutral.subtle')\n                : undefined\n            }\n          >\n            <Text\n              variant=\"body\"\n              color=\"surface.text.gray.muted\"\n              size={variant === 'ordered' ? size : 'xsmall'}\n            >\n              {`${getOrderedListItemBullet({\n                itemNumber: _itemNumber ?? 1,\n                level: level ?? 1,\n              })}${variant === 'ordered' ? '.' : ''}`}\n            </Text>\n          </BaseBox>\n        )}\n        <ListItemContentChildren size={size}>{validChildItem}</ListItemContentChildren>\n      </BaseBox>\n      {childList}\n    </StyledListItem>\n  );\n};\n\nconst ListItem = assignWithoutSideEffects(_ListItem, { componentId: MetaConstants.ListItem });\n\nexport { ListItem };\nexport type { ListItemProps };\n"],"names":["StyledListItem","styled","ListItemElement","_ref","level","theme","variant","hasIcon","marginLeft","getIn","listItemMarginLeft","ListItemContentChildren","_ref2","children","size","getPlatformType","_jsx","BaseBox","display","flexDirection","flexWrap","map","child","index","Text","_ListItem","_ref3","_ref4","Icon","icon","listItemIconColor","iconColor","_itemNumber","testID","_useListContext","useListContext","ListContextIcon","_useTheme","useTheme","platform","ItemIcon","iconColorToken","__DEV__","throwBladeError","message","moduleName","childrenArray","React","Children","toArray","validChildItem","filter","getComponentId","MetaConstants","List","isValidAllowedChildren","ListItemLink","ListItemText","ListItemCode","childList","Boolean","_jsxs","Object","assign","metaAttribute","name","ListItem","alignItems","marginBottom","listItemMarginBottom","marginRight","listItemBulletMarginRight","marginTop","listItemBulletMarginTop","alignSelf","color","UnorderedItemIcon","width","listItemOrderedBulletBoxSize","height","flexShrink","justifyContent","borderRadius","undefined","backgroundColor","colors","getOrderedListItemBullet","itemNumber","assignWithoutSideEffects","componentId"],"mappings":"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"}