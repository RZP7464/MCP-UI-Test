{"version":3,"file":"Counter.js","sources":["../../../../../src/components/Counter/Counter.tsx"],"sourcesContent":["import React from 'react';\nimport { StyledCounter } from './StyledCounter';\nimport type { StyledCounterProps } from './types';\nimport { counterHeight, horizontalPadding } from './counterTokens';\nimport type { FeedbackColors, SubtleOrIntense } from '~tokens/theme/theme';\nimport { Text } from '~components/Typography';\nimport BaseBox from '~components/Box/BaseBox';\nimport { useTheme } from '~components/BladeProvider';\nimport type { BaseTextProps } from '~components/Typography/BaseText/types';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport type { DataAnalyticsAttribute, BladeElementRef, TestID } from '~utils/types';\nimport { isReactNative, makeSize } from '~utils';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\nexport type CounterProps = {\n  /**\n   * Sets the value for the counter.\n   */\n  value: number;\n  /**\n   * Sets the max value for the counter.\n   * If value exceedes `max` it will render `value+`\n   */\n  max?: number;\n  /**\n   * Sets the color of the counter.\n   *\n   * @default 'neutral'\n   */\n  color?: FeedbackColors | 'primary';\n  /**\n   * Sets the contrast of the counter.\n   *\n   * @default 'subtle'\n   */\n  emphasis?: SubtleOrIntense;\n  /**\n   * Sets the size of the counter.\n   *\n   * @default 'medium'\n   */\n  size?: 'small' | 'medium' | 'large';\n} & TestID &\n  DataAnalyticsAttribute &\n  StyledPropsBlade;\n\ntype ColorProps = {\n  textColor: BaseTextProps['color'];\n  backgroundColor: StyledCounterProps['backgroundColor'];\n};\n\nconst getColorProps = ({\n  color = 'neutral',\n  emphasis = 'subtle',\n}: {\n  color: NonNullable<CounterProps['color']>;\n  emphasis: NonNullable<CounterProps['emphasis']>;\n}): ColorProps => {\n  const props: ColorProps = {\n    textColor: 'feedback.text.neutral.intense',\n    backgroundColor: 'feedback.background.neutral.subtle',\n  };\n\n  if (color === 'primary') {\n    // primary color badge\n    props.textColor =\n      emphasis === 'intense' ? `surface.text.staticWhite.normal` : `surface.text.primary.normal`;\n    props.backgroundColor = `surface.background.primary.${emphasis}`;\n  } else {\n    // feedback colors badge\n    props.textColor =\n      emphasis === 'intense' ? `surface.text.staticWhite.normal` : `feedback.text.${color}.intense`;\n    props.backgroundColor = `feedback.background.${color}.${emphasis}`;\n  }\n  return props;\n};\n\nconst _Counter = (\n  {\n    value,\n    max,\n    color = 'neutral',\n    emphasis = 'subtle',\n    size = 'medium',\n    testID,\n    ...rest\n  }: CounterProps,\n  ref: React.Ref<BladeElementRef>,\n): React.ReactElement => {\n  let content = `${value}`;\n  if (max && value > max) {\n    content = `${max}+`;\n  }\n\n  const { platform } = useTheme();\n  const { backgroundColor, textColor } = getColorProps({\n    color,\n    emphasis,\n  });\n\n  const counterTextSizes = {\n    small: {\n      variant: 'body',\n      size: 'xsmall',\n    },\n    medium: {\n      variant: 'body',\n      size: 'small',\n    },\n    large: {\n      variant: 'body',\n      size: 'medium',\n    },\n  } as const;\n\n  return (\n    <BaseBox\n      ref={ref as never}\n      display={(isReactNative() ? 'flex' : 'inline-flex') as never}\n      {...metaAttribute({ name: MetaConstants.Counter, testID })}\n      {...getStyledProps(rest)}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      <StyledCounter\n        minHeight={makeSize(counterHeight[size])}\n        backgroundColor={backgroundColor}\n        size={size}\n        platform={platform}\n      >\n        <BaseBox\n          paddingX={horizontalPadding[size]}\n          display=\"flex\"\n          flexDirection=\"row\"\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          overflow=\"hidden\"\n        >\n          <Text\n            {...counterTextSizes[size]}\n            textAlign=\"center\"\n            weight=\"medium\"\n            truncateAfterLines={1}\n            color={textColor}\n          >\n            {content}\n          </Text>\n        </BaseBox>\n      </StyledCounter>\n    </BaseBox>\n  );\n};\n\nconst Counter = assignWithoutSideEffects(React.forwardRef(_Counter), {\n  displayName: 'Counter',\n  componentId: 'Counter',\n});\n\nexport { Counter };\n"],"names":["getColorProps","_ref","_ref$color","color","_ref$emphasis","emphasis","props","textColor","backgroundColor","_Counter","_ref2","ref","value","max","_ref2$color","_ref2$emphasis","_ref2$size","size","testID","rest","_objectWithoutProperties","_excluded","content","_useTheme","useTheme","platform","_getColorProps","counterTextSizes","small","variant","medium","large","_jsx","BaseBox","Object","assign","display","isReactNative","metaAttribute","name","MetaConstants","Counter","getStyledProps","makeAnalyticsAttribute","children","StyledCounter","minHeight","makeSize","counterHeight","paddingX","horizontalPadding","flexDirection","justifyContent","alignItems","overflow","Text","textAlign","weight","truncateAfterLines","assignWithoutSideEffects","React","forwardRef","displayName","componentId"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,SAAA,CAAA,CAAA,OAAA,CAAA,KAAA,CAAA,OAAA,CAAA,UAAA,CAAA,MAAA,CAAA,QAAA,CAAA,CAsDA,IAAMA,aAAa,CAAG,SAAhBA,aAAaA,CAAAC,IAAA,CAMD,CAAAC,IAAAA,UAAA,CAAAD,IAAA,CALhBE,KAAK,CAALA,KAAK,CAAAD,UAAA,GAAA,KAAA,CAAA,CAAG,SAAS,CAAAA,UAAA,CAAAE,aAAA,CAAAH,IAAA,CACjBI,QAAQ,CAARA,QAAQ,CAAAD,aAAA,GAAA,KAAA,CAAA,CAAG,QAAQ,CAAAA,aAAA,CAKnB,IAAME,KAAiB,CAAG,CACxBC,SAAS,CAAE,+BAA+B,CAC1CC,eAAe,CAAE,oCACnB,CAAC,CAED,GAAIL,KAAK,GAAK,SAAS,CAAE,CAEvBG,KAAK,CAACC,SAAS,CACbF,QAAQ,GAAK,SAAS,CAAG,CAAiC,+BAAA,CAAA,CAAG,CAA6B,2BAAA,CAAA,CAC5FC,KAAK,CAACE,eAAe,CAAG,CAA8BH,2BAAAA,EAAAA,QAAQ,CAAE,CAAA,CAClE,CAAC,KAAM,CAELC,KAAK,CAACC,SAAS,CACbF,QAAQ,GAAK,SAAS,CAAG,CAAiC,+BAAA,CAAA,CAAG,CAAiBF,cAAAA,EAAAA,KAAK,CAAU,QAAA,CAAA,CAC/FG,KAAK,CAACE,eAAe,CAAG,CAAuBL,oBAAAA,EAAAA,KAAK,CAAIE,CAAAA,EAAAA,QAAQ,CAAE,CAAA,CACpE,CACA,OAAOC,KAAK,CACd,CAAC,CAED,IAAMG,QAAQ,CAAG,SAAXA,QAAQA,CAAAC,KAAA,CAUZC,GAA+B,CACR,CATrB,IAAAC,KAAK,CAAAF,KAAA,CAALE,KAAK,CACLC,GAAG,CAAAH,KAAA,CAAHG,GAAG,CAAAC,WAAA,CAAAJ,KAAA,CACHP,KAAK,CAALA,KAAK,CAAAW,WAAA,GAAG,KAAA,CAAA,CAAA,SAAS,CAAAA,WAAA,CAAAC,cAAA,CAAAL,KAAA,CACjBL,QAAQ,CAARA,QAAQ,CAAAU,cAAA,GAAG,KAAA,CAAA,CAAA,QAAQ,CAAAA,cAAA,CAAAC,UAAA,CAAAN,KAAA,CACnBO,IAAI,CAAJA,IAAI,CAAAD,UAAA,GAAG,KAAA,CAAA,CAAA,QAAQ,CAAAA,UAAA,CACfE,MAAM,CAAAR,KAAA,CAANQ,MAAM,CACHC,IAAI,CAAAC,wBAAA,CAAAV,KAAA,CAAAW,SAAA,CAAA,CAIT,IAAIC,OAAO,CAAG,CAAA,EAAGV,KAAK,CAAA,CAAE,CACxB,GAAIC,GAAG,EAAID,KAAK,CAAGC,GAAG,CAAE,CACtBS,OAAO,CAAG,CAAA,EAAGT,GAAG,CAAG,CAAA,CAAA,CACrB,CAEA,IAAAU,SAAA,CAAqBC,QAAQ,EAAE,CAAvBC,QAAQ,CAAAF,SAAA,CAARE,QAAQ,CAChB,IAAAC,cAAA,CAAuC1B,aAAa,CAAC,CACnDG,KAAK,CAALA,KAAK,CACLE,QAAQ,CAARA,QACF,CAAC,CAAC,CAHMG,eAAe,CAAAkB,cAAA,CAAflB,eAAe,CAAED,SAAS,CAAAmB,cAAA,CAATnB,SAAS,CAKlC,IAAMoB,gBAAgB,CAAG,CACvBC,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfZ,IAAI,CAAE,QACR,CAAC,CACDa,MAAM,CAAE,CACND,OAAO,CAAE,MAAM,CACfZ,IAAI,CAAE,OACR,CAAC,CACDc,KAAK,CAAE,CACLF,OAAO,CAAE,MAAM,CACfZ,IAAI,CAAE,QACR,CACF,CAAU,CAEV,OACEe,GAAA,CAACC,OAAO,CAAAC,MAAA,CAAAC,MAAA,CAAA,CACNxB,GAAG,CAAEA,GAAa,CAClByB,OAAO,CAAGC,aAAa,EAAE,CAAG,MAAM,CAAG,aAAwB,CACzDC,CAAAA,aAAa,CAAC,CAAEC,IAAI,CAAEC,aAAa,CAACC,OAAO,CAAEvB,MAAM,CAANA,MAAO,CAAC,CAAC,CACtDwB,cAAc,CAACvB,IAAI,CAAC,CACpBwB,sBAAsB,CAACxB,IAAI,CAAC,CAAA,CAAAyB,QAAA,CAEhCZ,GAAA,CAACa,aAAa,CAAA,CACZC,SAAS,CAAEC,QAAQ,CAACC,aAAa,CAAC/B,IAAI,CAAC,CAAE,CACzCT,eAAe,CAAEA,eAAgB,CACjCS,IAAI,CAAEA,IAAK,CACXQ,QAAQ,CAAEA,QAAS,CAAAmB,QAAA,CAEnBZ,GAAA,CAACC,OAAO,CACNgB,CAAAA,QAAQ,CAAEC,iBAAiB,CAACjC,IAAI,CAAE,CAClCmB,OAAO,CAAC,MAAM,CACde,aAAa,CAAC,KAAK,CACnBC,cAAc,CAAC,QAAQ,CACvBC,UAAU,CAAC,QAAQ,CACnBC,QAAQ,CAAC,QAAQ,CAAAV,QAAA,CAEjBZ,GAAA,CAACuB,IAAI,CAAArB,MAAA,CAAAC,MAAA,CACCR,EAAAA,CAAAA,gBAAgB,CAACV,IAAI,CAAC,CAAA,CAC1BuC,SAAS,CAAC,QAAQ,CAClBC,MAAM,CAAC,QAAQ,CACfC,kBAAkB,CAAE,CAAE,CACtBvD,KAAK,CAAEI,SAAU,CAAAqC,QAAA,CAEhBtB,OAAO,CAAA,CACJ,CAAC,CACA,CAAC,CACG,CAAC,CACT,CAAA,CAAC,CAEd,CAAC,CAEK,IAAAmB,OAAO,CAAGkB,wBAAwB,CAACC,cAAK,CAACC,UAAU,CAACpD,QAAQ,CAAC,CAAE,CACnEqD,WAAW,CAAE,SAAS,CACtBC,WAAW,CAAE,SACf,CAAC;;;;"}