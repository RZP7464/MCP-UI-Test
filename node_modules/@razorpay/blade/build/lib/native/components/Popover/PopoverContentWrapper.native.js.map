{"version":3,"file":"PopoverContentWrapper.native.js","sources":["../../../../../src/components/Popover/PopoverContentWrapper.native.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-unnecessary-type-assertion */\nimport type { CSSProperties } from 'react';\nimport styled from 'styled-components/native';\nimport type { EasingFn } from 'react-native-reanimated';\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withDelay,\n  withTiming,\n} from 'react-native-reanimated';\nimport React from 'react';\nimport type { View } from 'react-native';\nimport { getPopoverContentWrapperStyles } from './getPopoverContentWrapperStyles';\nimport type { PopoverContentWrapperProps } from './types';\nimport BaseBox from '~components/Box/BaseBox';\nimport { useTheme } from '~components/BladeProvider';\nimport { size } from '~tokens/global';\nimport { castNativeType } from '~utils';\n\nconst StyledPopoverContentWrapper = styled(BaseBox)<{\n  collapse?: boolean;\n  styles: CSSProperties;\n  isMobile: boolean;\n}>(({ theme, isMobile, styles }) => {\n  return getPopoverContentWrapperStyles({ theme, styles, isMobile });\n});\n\nconst PopoverContentWrapper = React.forwardRef<View, PopoverContentWrapperProps>(\n  ({ children, styles, side, isVisible, ...props }, ref) => {\n    const { theme, platform } = useTheme();\n    const isMobile = platform === 'onMobile';\n\n    const isOppositeAxis = side === 'right' || side === 'bottom';\n    const isHorizontal = side === 'left' || side === 'right';\n    const offset = isOppositeAxis ? -size[4] : size[4];\n\n    const translate = useSharedValue(offset);\n    const opacity = useSharedValue(0);\n\n    const easing = (theme.motion.easing.entrance as unknown) as EasingFn;\n    const duration = theme.motion.duration.quick;\n\n    React.useEffect(() => {\n      const timings = { easing, duration };\n      opacity.value = withDelay(duration, withTiming(isVisible ? 1 : 0, timings));\n      translate.value = withDelay(duration, withTiming(isVisible ? 0 : offset, timings));\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isVisible]);\n\n    // @ts-expect-error types aren't liking the dynamic object prop `[transform]`\n    const animatedStyles = useAnimatedStyle(() => {\n      const transform = isHorizontal ? 'translateX' : 'translateY';\n      return {\n        opacity: opacity.value,\n        transform: [{ [transform]: translate.value }],\n      };\n    }, [isVisible]);\n\n    return (\n      <Animated.View style={animatedStyles}>\n        <StyledPopoverContentWrapper\n          styles={styles}\n          // Shadow styles need to be passed directly through native style prop\n          // Cannot be done via styled components\n          style={castNativeType(theme.elevation.lowRaised)}\n          elevation={20}\n          ref={ref as never}\n          collapse={false}\n          isMobile={isMobile}\n          // if I don't assert this TS throws error\n          // I think because of the intersection type in PopoverContentWrapperProps\n          {...(props as any)}\n        >\n          {children}\n        </StyledPopoverContentWrapper>\n      </Animated.View>\n    );\n  },\n);\n\nexport { PopoverContentWrapper };\n"],"names":["StyledPopoverContentWrapper","styled","BaseBox","_ref","theme","isMobile","styles","getPopoverContentWrapperStyles","PopoverContentWrapper","React","forwardRef","_ref2","ref","children","side","isVisible","props","_objectWithoutProperties","_excluded","_useTheme","useTheme","platform","isOppositeAxis","isHorizontal","offset","size","translate","useSharedValue","opacity","easing","motion","entrance","duration","quick","useEffect","timings","value","withDelay","withTiming","animatedStyles","useAnimatedStyle","transform","_defineProperty","_jsx","Animated","View","style","Object","assign","castNativeType","elevation","lowRaised","collapse"],"mappings":"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"}