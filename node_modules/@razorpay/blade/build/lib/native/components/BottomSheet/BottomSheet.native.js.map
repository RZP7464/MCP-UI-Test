{"version":3,"file":"BottomSheet.native.js","sources":["../../../../../src/components/BottomSheet/BottomSheet.native.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/prefer-nullish-coalescing */\n/* eslint-disable @typescript-eslint/no-empty-function */\nimport GorhomBottomSheet, {\n  BottomSheetFooter as GorhomBottomSheetFooter,\n} from '@gorhom/bottom-sheet';\nimport React from 'react';\nimport { Portal } from '@gorhom/portal';\nimport styled from 'styled-components/native';\nimport { Dimensions, AccessibilityInfo, findNodeHandle, View, Keyboard } from 'react-native';\nimport { BottomSheetHeader } from './BottomSheetHeader';\nimport { BottomSheetGrabHandle } from './BottomSheetGrabHandle';\nimport { BottomSheetBody } from './BottomSheetBody';\nimport { BottomSheetFooter } from './BottomSheetFooter';\nimport type { BottomSheetProps } from './types';\nimport { ComponentIds } from './componentIds';\nimport type { BottomSheetContextProps } from './BottomSheetContext';\nimport { BottomSheetContext, useBottomSheetAndDropdownGlue } from './BottomSheetContext';\nimport { BottomSheetBackdrop } from './BottomSheetBackdrop';\nimport { useBottomSheetStack } from './BottomSheetStack';\nimport { DropdownContext, useDropdown } from '~components/Dropdown/useDropdown';\nimport BaseBox from '~components/Box/BaseBox';\nimport { useId } from '~utils/useId';\nimport { useIsomorphicLayoutEffect } from '~utils/useIsomorphicLayoutEffect';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { makeSpace } from '~utils/makeSpace';\nimport { getComponentId } from '~utils/isValidAllowedChildren';\nimport { componentZIndices } from '~utils/componentZIndices';\n\nconst BottomSheetSurface = styled(BaseBox)(({ theme }) => {\n  return {\n    // TODO: we do not have 16px radius token\n    borderTopLeftRadius: makeSpace(theme.spacing[5]),\n    borderTopRightRadius: makeSpace(theme.spacing[5]),\n    backgroundColor: theme.colors.popup.background.subtle,\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'relative',\n  };\n});\n\nconst focusOnElement = (element: React.Component<any, any>): void => {\n  const reactTag = findNodeHandle(element);\n  if (reactTag) {\n    AccessibilityInfo.setAccessibilityFocus(reactTag);\n  }\n};\n\nconst _BottomSheet = ({\n  children,\n  snapPoints = [0.35, 0.5, 0.85],\n  isOpen,\n  onDismiss,\n  isDismissible = true,\n  initialFocusRef,\n  zIndex = componentZIndices.bottomSheet,\n}: BottomSheetProps): React.ReactElement => {\n  const bottomSheetAndDropdownGlue = useBottomSheetAndDropdownGlue();\n  const defaultInitialFocusRef = React.useRef<any>(null);\n  const sheetRef = React.useRef<GorhomBottomSheet>(null);\n  const [header, setHeader] = React.useState<React.ReactNode>();\n  const [footer, setFooter] = React.useState<React.ReactNode>();\n  const [body, setBody] = React.useState<React.ReactNode>();\n  const _isOpen = isOpen ?? bottomSheetAndDropdownGlue?.isOpen;\n  const [headerHeight, setHeaderHeight] = React.useState(0);\n  const [footerHeight, setFooterHeight] = React.useState(0);\n  const [contentHeight, setContentHeight] = React.useState(0);\n  const [hasBodyPadding, setHasBodyPadding] = React.useState(true);\n  const [isHeaderEmpty, setIsHeaderEmpty] = React.useState(false);\n  const initialSnapPoint = React.useRef<number>(0);\n  const totalHeight = React.useMemo(() => {\n    return headerHeight + footerHeight + contentHeight;\n  }, [contentHeight, footerHeight, headerHeight]);\n\n  const id = useId();\n  const {\n    addBottomSheetToStack,\n    removeBottomSheetFromStack,\n    getCurrentStackIndexById,\n    getTopOfTheStack,\n  } = useBottomSheetStack();\n  const currentStackIndex = getCurrentStackIndexById(id);\n  const bottomSheetZIndex = zIndex - currentStackIndex;\n\n  // if bottomSheet height is >35% & <50% then set initial snapPoint to 35%\n  useIsomorphicLayoutEffect(() => {\n    if (bottomSheetAndDropdownGlue?.hasAutoCompleteInHeader) {\n      // In AutoComplete, we want to open BottomSheet with max height so we set this to last index\n      initialSnapPoint.current = 2;\n    } else {\n      const height = Dimensions.get('window').height;\n      const middleSnapPoint = snapPoints[1] * height;\n      if (totalHeight > middleSnapPoint) {\n        initialSnapPoint.current = 1;\n      }\n    }\n  }, [snapPoints, totalHeight]);\n\n  const _snapPoints = React.useMemo(() => snapPoints.map((point) => `${point * 100}%`), [\n    snapPoints,\n  ]);\n\n  const close = React.useCallback(() => {\n    if (isDismissible) {\n      onDismiss?.();\n      bottomSheetAndDropdownGlue?.onBottomSheetDismiss?.();\n    }\n  }, [isDismissible, onDismiss, bottomSheetAndDropdownGlue]);\n\n  const handleOnOpen = React.useCallback(() => {\n    sheetRef.current?.snapToIndex(initialSnapPoint.current);\n  }, []);\n\n  const handleOnClose = React.useCallback(() => {\n    sheetRef.current?.close();\n    // We need this because if inside the BottomSheet there is a input which is focused\n    // and user dragged down to close the sheet, even after closing the sheet the input will remain focused\n    Keyboard.dismiss();\n  }, [sheetRef]);\n\n  // sync controlled state to our actions\n  React.useEffect(() => {\n    if (_isOpen) {\n      handleOnOpen();\n      if (!initialFocusRef) {\n        // focus on close button\n        focusOnElement(defaultInitialFocusRef.current);\n      } else {\n        // focus on the initialRef\n        focusOnElement(initialFocusRef.current);\n      }\n    } else {\n      handleOnClose();\n    }\n  }, [_isOpen, handleOnClose, handleOnOpen, initialFocusRef]);\n\n  // let the Dropdown component know that it's rendering a bottomsheet\n  React.useEffect(() => {\n    if (!bottomSheetAndDropdownGlue) return;\n    bottomSheetAndDropdownGlue.setDropdownHasBottomSheet(true);\n  }, [bottomSheetAndDropdownGlue]);\n\n  React.useLayoutEffect(() => {\n    React.Children.forEach(children, (child) => {\n      if (getComponentId(child) === ComponentIds.BottomSheetHeader) {\n        setHeader(child);\n      }\n      if (getComponentId(child) === ComponentIds.BottomSheetFooter) {\n        setFooter(child);\n      }\n      if (getComponentId(child) === ComponentIds.BottomSheetBody) {\n        setBody(child);\n      }\n    });\n  }, [children]);\n\n  const renderFooter = React.useCallback(\n    (props: any): React.ReactElement => {\n      return (\n        <GorhomBottomSheetFooter {...props}>\n          <View\n            onLayout={(event) => {\n              // save footer height so that later we can offset the marginBottom from body content\n              // otherwise few elements gets hidden under the footer\n              setFooterHeight(event.nativeEvent.layout.height);\n            }}\n          >\n            {footer}\n          </View>\n        </GorhomBottomSheetFooter>\n      );\n    },\n    [footer],\n  );\n\n  const renderBackdrop = React.useCallback(\n    (props: any): React.ReactElement => {\n      return <BottomSheetBackdrop {...props} zIndex={bottomSheetZIndex} />;\n    },\n    [bottomSheetZIndex],\n  );\n\n  const renderHandle = React.useCallback((): React.ReactElement => {\n    return (\n      <BaseBox\n        position={isHeaderEmpty ? 'absolute' : 'relative'}\n        top=\"spacing.0\"\n        left=\"spacing.0\"\n        right=\"spacing.0\"\n        onLayout={({ nativeEvent }) => {\n          setHeaderHeight(nativeEvent.layout.height);\n        }}\n      >\n        <BaseBox zIndex={bottomSheetZIndex}>\n          <BottomSheetGrabHandle />\n        </BaseBox>\n        {header}\n      </BaseBox>\n    );\n  }, [isHeaderEmpty, bottomSheetZIndex, header]);\n\n  const isHeaderFloating = !hasBodyPadding && isHeaderEmpty;\n  const contextValue = React.useMemo<BottomSheetContextProps>(\n    () => ({\n      isInBottomSheet: true,\n      isOpen: Boolean(_isOpen),\n      close: handleOnClose,\n      positionY: 0,\n      headerHeight,\n      contentHeight,\n      footerHeight,\n      setContentHeight,\n      setFooterHeight,\n      setHeaderHeight,\n      isDismissible,\n      scrollRef: () => {},\n      bind: {} as never,\n      defaultInitialFocusRef,\n      isHeaderFloating,\n      setHasBodyPadding,\n      setIsHeaderEmpty,\n    }),\n    [\n      _isOpen,\n      contentHeight,\n      footerHeight,\n      handleOnClose,\n      headerHeight,\n      isHeaderFloating,\n      isDismissible,\n    ],\n  );\n\n  // Hack: We need to <Portal> the GorhomBottomSheet to the root of the react-native app\n  // But the portalled component will no longer be able to access the parent contexts (Dropdown Context)\n  // To workaround this, I'm portalling both the DropdownContext & BotomSheetContext along with the component\n  const dropdownProps = useDropdown();\n\n  // register and deregister in the stack\n  React.useEffect(() => {\n    if (_isOpen) {\n      addBottomSheetToStack(id);\n    } else {\n      removeBottomSheetFromStack(id);\n    }\n  }, [addBottomSheetToStack, _isOpen, id, removeBottomSheetFromStack]);\n\n  // Handle TextInput inside BottomSheet\n  // We expand the BottomSheet to the max snapPoint so that when the keyboard opens\n  // the body content will be visible\n  // There is a standard way to do this:\n  // https://gorhom.github.io/react-native-bottom-sheet/keyboard-handling\n  // But this didn't worked because:\n  // https://github.com/gorhom/react-native-bottom-sheet/issues/618\n  React.useEffect(() => {\n    const showSubscription = Keyboard.addListener('keyboardDidShow', () => {\n      if (id && id === getTopOfTheStack()) {\n        sheetRef.current?.expand();\n      }\n    });\n    return () => {\n      showSubscription.remove();\n    };\n  }, [getTopOfTheStack, id]);\n\n  return (\n    <Portal hostName=\"BladeBottomSheetPortal\">\n      {/* Portalling both the context */}\n      <DropdownContext.Provider value={dropdownProps}>\n        <BottomSheetContext.Provider value={contextValue}>\n          <GorhomBottomSheet\n            style={\n              // only render shadow when the sheet is open,\n              // otherwise there is visible shadow leak from the bottom edge of the screen\n              isOpen\n                ? {\n                    // this is reverse top elevation of highRaised elevation token\n                    shadowColor: 'hsla(217,56%,17%,0.64)',\n                    shadowOffset: {\n                      width: 0,\n                      height: -18,\n                    },\n                    shadowOpacity: 0.2,\n                    shadowRadius: 12,\n                    // this fails on andorid because its not handled on GorhomBottomSheet internally, hence tradeoff but its fine because visually this barely makes any difference its that nice design detail\n                    // elevation: 40,\n                  }\n                : {}\n            }\n            enablePanDownToClose={isDismissible}\n            enableOverDrag\n            enableContentPanningGesture\n            ref={sheetRef}\n            // on initial render if _isOpen is true we want to render the sheet at initialSnapPoint\n            // otherwise we want to render it at -1 so that it is not visible\n            index={_isOpen ? initialSnapPoint.current : -1}\n            containerStyle={{ zIndex: bottomSheetZIndex }}\n            animateOnMount={true}\n            handleComponent={renderHandle}\n            backgroundComponent={BottomSheetSurface}\n            footerComponent={renderFooter}\n            backdropComponent={renderBackdrop}\n            onClose={close}\n            snapPoints={_snapPoints}\n          >\n            {body}\n          </GorhomBottomSheet>\n        </BottomSheetContext.Provider>\n      </DropdownContext.Provider>\n    </Portal>\n  );\n};\n\nconst BottomSheet = assignWithoutSideEffects(_BottomSheet, {\n  componentId: ComponentIds.BottomSheet,\n});\n\nexport { BottomSheet, BottomSheetBody, BottomSheetFooter, BottomSheetHeader };\n"],"names":["BottomSheetSurface","styled","BaseBox","_ref","theme","borderTopLeftRadius","makeSpace","spacing","borderTopRightRadius","backgroundColor","colors","popup","background","subtle","justifyContent","alignItems","position","focusOnElement","element","reactTag","findNodeHandle","AccessibilityInfo","setAccessibilityFocus","_BottomSheet","_ref2","children","_ref2$snapPoints","snapPoints","isOpen","onDismiss","_ref2$isDismissible","isDismissible","initialFocusRef","_ref2$zIndex","zIndex","componentZIndices","bottomSheet","bottomSheetAndDropdownGlue","useBottomSheetAndDropdownGlue","defaultInitialFocusRef","React","useRef","sheetRef","_React$useState","useState","_React$useState2","_slicedToArray","header","setHeader","_React$useState3","_React$useState4","footer","setFooter","_React$useState5","_React$useState6","body","setBody","_isOpen","_React$useState7","_React$useState8","headerHeight","setHeaderHeight","_React$useState9","_React$useState0","footerHeight","setFooterHeight","_React$useState1","_React$useState10","contentHeight","setContentHeight","_React$useState11","_React$useState12","hasBodyPadding","setHasBodyPadding","_React$useState13","_React$useState14","isHeaderEmpty","setIsHeaderEmpty","initialSnapPoint","totalHeight","useMemo","id","useId","_useBottomSheetStack","useBottomSheetStack","addBottomSheetToStack","removeBottomSheetFromStack","getCurrentStackIndexById","getTopOfTheStack","currentStackIndex","bottomSheetZIndex","useIsomorphicLayoutEffect","hasAutoCompleteInHeader","current","height","Dimensions","get","middleSnapPoint","_snapPoints","map","point","close","useCallback","onBottomSheetDismiss","handleOnOpen","_sheetRef$current","snapToIndex","handleOnClose","_sheetRef$current2","Keyboard","dismiss","useEffect","setDropdownHasBottomSheet","useLayoutEffect","Children","forEach","child","getComponentId","ComponentIds","BottomSheetHeader","BottomSheetFooter","BottomSheetBody","renderFooter","props","_jsx","GorhomBottomSheetFooter","Object","assign","View","onLayout","event","nativeEvent","layout","renderBackdrop","BottomSheetBackdrop","renderHandle","_jsxs","top","left","right","_ref3","BottomSheetGrabHandle","isHeaderFloating","contextValue","isInBottomSheet","Boolean","positionY","scrollRef","bind","dropdownProps","useDropdown","showSubscription","addListener","_sheetRef$current3","expand","remove","Portal","hostName","DropdownContext","Provider","value","BottomSheetContext","GorhomBottomSheet","style","shadowColor","shadowOffset","width","shadowOpacity","shadowRadius","enablePanDownToClose","enableOverDrag","enableContentPanningGesture","ref","index","containerStyle","animateOnMount","handleComponent","backgroundComponent","footerComponent","backdropComponent","onClose","BottomSheet","assignWithoutSideEffects","componentId"],"mappings":"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"}