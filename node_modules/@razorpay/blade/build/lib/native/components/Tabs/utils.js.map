{"version":3,"file":"utils.js","sources":["../../../../../src/components/Tabs/utils.ts"],"sourcesContent":["import React from 'react';\nimport type { TabsProps } from './types';\nimport { getComponentId } from '~utils/isValidAllowedChildren';\nimport { logger, throwBladeError } from '~utils/logger';\nimport { useIsomorphicLayoutEffect } from '~utils/useIsomorphicLayoutEffect';\n\nconst iconSizeMap = {\n  small: 'medium',\n  medium: 'medium',\n  large: 'large',\n} as const;\n\nconst badgeSizeMap = {\n  small: 'small',\n  medium: 'small',\n  large: 'medium',\n} as const;\n\nconst counterSizeMap = {\n  small: 'small',\n  medium: 'small',\n  large: 'small',\n} as const;\n\nconst propRestrictionMap = {\n  Badge: {\n    small: {\n      size: badgeSizeMap.small,\n    },\n    medium: {\n      size: badgeSizeMap.medium,\n    },\n    large: {\n      size: badgeSizeMap.large,\n    },\n  },\n  Counter: {\n    small: {\n      size: counterSizeMap.small,\n    },\n    medium: {\n      size: counterSizeMap.medium,\n    },\n    large: {\n      size: counterSizeMap.large,\n    },\n  },\n} as const;\n\ntype TrailingComponents = keyof typeof propRestrictionMap;\n\nconst useTabsItemPropRestriction = (\n  trailing: React.ReactNode,\n  tabItemSize: NonNullable<TabsProps['size']>,\n): React.ReactNode => {\n  const [\n    validatedTrailingComponent,\n    setValidatedTrailingComponent,\n  ] = React.useState<React.ReactElement | null>(null);\n\n  // validate and restrict sub component props in trailing prop\n  useIsomorphicLayoutEffect(() => {\n    if (React.isValidElement(trailing)) {\n      const trailingComponentType = getComponentId(trailing) as TrailingComponents;\n      const restrictedProps = propRestrictionMap[trailingComponentType]?.[tabItemSize];\n      if (__DEV__) {\n        if (!restrictedProps) {\n          throwBladeError({\n            message: `Only Badge or Counter component is accepted as trailing`,\n            moduleName: 'TabsItem',\n          });\n        }\n\n        const restrictedPropKeys = Object.keys(restrictedProps);\n        for (const prop of restrictedPropKeys) {\n          if (trailing?.props?.hasOwnProperty(prop)) {\n            logger({\n              message: `Do not pass \"${prop}\" to \"${trailingComponentType}\" while inside TabsItem trailing, because we override it.`,\n              moduleName: 'TabsItem',\n              type: 'warn',\n            });\n          }\n        }\n      }\n      setValidatedTrailingComponent(\n        React.cloneElement(trailing as React.ReactElement, restrictedProps),\n      );\n    }\n  }, [tabItemSize, trailing]);\n\n  return validatedTrailingComponent;\n};\n\nconst componentIds = {\n  TabList: 'TabList',\n  TabPanel: 'TabPanel',\n} as const;\n\nexport { useTabsItemPropRestriction, iconSizeMap, componentIds };\n"],"names":["iconSizeMap","small","medium","large","badgeSizeMap","counterSizeMap","propRestrictionMap","Badge","size","Counter","useTabsItemPropRestriction","trailing","tabItemSize","_React$useState","React","useState","_React$useState2","_slicedToArray","validatedTrailingComponent","setValidatedTrailingComponent","useIsomorphicLayoutEffect","isValidElement","_propRestrictionMap$t","trailingComponentType","getComponentId","restrictedProps","__DEV__","throwBladeError","message","moduleName","restrictedPropKeys","Object","keys","prop","_trailing$props","props","hasOwnProperty","logger","type","cloneElement","componentIds","TabList","TabPanel"],"mappings":";;;;;;AAMM,IAAAA,WAAW,CAAG,CAClBC,KAAK,CAAE,QAAQ,CACfC,MAAM,CAAE,QAAQ,CAChBC,KAAK,CAAE,OACT,EAEA,IAAMC,YAAY,CAAG,CACnBH,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,OAAO,CACfC,KAAK,CAAE,QACT,CAAU,CAEV,IAAME,cAAc,CAAG,CACrBJ,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,OAAO,CACfC,KAAK,CAAE,OACT,CAAU,CAEV,IAAMG,kBAAkB,CAAG,CACzBC,KAAK,CAAE,CACLN,KAAK,CAAE,CACLO,IAAI,CAAEJ,YAAY,CAACH,KACrB,CAAC,CACDC,MAAM,CAAE,CACNM,IAAI,CAAEJ,YAAY,CAACF,MACrB,CAAC,CACDC,KAAK,CAAE,CACLK,IAAI,CAAEJ,YAAY,CAACD,KACrB,CACF,CAAC,CACDM,OAAO,CAAE,CACPR,KAAK,CAAE,CACLO,IAAI,CAAEH,cAAc,CAACJ,KACvB,CAAC,CACDC,MAAM,CAAE,CACNM,IAAI,CAAEH,cAAc,CAACH,MACvB,CAAC,CACDC,KAAK,CAAE,CACLK,IAAI,CAAEH,cAAc,CAACF,KACvB,CACF,CACF,CAAU,CAIJ,IAAAO,0BAA0B,CAAG,SAA7BA,0BAA0BA,CAC9BC,QAAyB,CACzBC,WAA2C,CACvB,CACpB,IAAAC,eAAA,CAGIC,cAAK,CAACC,QAAQ,CAA4B,IAAI,CAAC,CAAAC,gBAAA,CAAAC,cAAA,CAAAJ,eAAA,CAFjDK,CAAAA,CAAAA,CAAAA,0BAA0B,CAAAF,gBAAA,CAAA,CAAA,CAAA,CAC1BG,6BAA6B,CAAAH,gBAAA,CAI/BI,CAAAA,CAAAA,CAAAA,yBAAyB,CAAC,UAAM,CAC9B,GAAIN,cAAK,CAACO,cAAc,CAACV,QAAQ,CAAC,CAAE,KAAAW,qBAAA,CAClC,IAAMC,qBAAqB,CAAGC,cAAc,CAACb,QAAQ,CAAuB,CAC5E,IAAMc,eAAe,CAAAH,CAAAA,qBAAA,CAAGhB,kBAAkB,CAACiB,qBAAqB,CAAC,eAAzCD,qBAAA,CAA4CV,WAAW,CAAC,CAChF,GAAIc,OAAO,CAAE,CACX,GAAI,CAACD,eAAe,CAAE,CACpBE,eAAe,CAAC,CACdC,OAAO,CAAE,CAAyD,uDAAA,CAAA,CAClEC,UAAU,CAAE,UACd,CAAC,CAAC,CACJ,CAEA,IAAMC,kBAAkB,CAAGC,MAAM,CAACC,IAAI,CAACP,eAAe,CAAC,CACvD,IAAK,IAAMQ,IAAI,IAAIH,kBAAkB,CAAE,KAAAI,eAAA,CACrC,GAAIvB,QAAQ,SAAAuB,eAAA,CAARvB,QAAQ,CAAEwB,KAAK,SAAfD,eAAA,CAAiBE,cAAc,CAACH,IAAI,CAAC,CAAE,CACzCI,MAAM,CAAC,CACLT,OAAO,CAAE,CAAgBK,aAAAA,EAAAA,IAAI,SAASV,qBAAqB,CAAA,yDAAA,CAA2D,CACtHM,UAAU,CAAE,UAAU,CACtBS,IAAI,CAAE,MACR,CAAC,CAAC,CACJ,CACF,CACF,CACAnB,6BAA6B,CAC3BL,cAAK,CAACyB,YAAY,CAAC5B,QAAQ,CAAwBc,eAAe,CACpE,CAAC,CACH,CACF,CAAC,CAAE,CAACb,WAAW,CAAED,QAAQ,CAAC,CAAC,CAE3B,OAAOO,0BAA0B,CACnC,EAEM,IAAAsB,YAAY,CAAG,CACnBC,OAAO,CAAE,SAAS,CAClBC,QAAQ,CAAE,UACZ;;;;"}