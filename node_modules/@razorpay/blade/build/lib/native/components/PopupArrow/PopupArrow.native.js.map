{"version":3,"file":"PopupArrow.native.js","sources":["../../../../../src/components/PopupArrow/PopupArrow.native.tsx"],"sourcesContent":["/* eslint-disable react/jsx-no-useless-fragment */\nimport * as React from 'react';\nimport styled from 'styled-components/native';\nimport { View } from 'react-native';\nimport type { CSSObject } from 'styled-components';\nimport type { PopupArrowProps } from './types';\nimport Svg, { Path } from '~components/Icons/_Svg';\nimport { useTheme } from '~components/BladeProvider';\nimport type { SvgProps } from '~components/Icons/_Svg/Svg/types';\nimport { makeSize } from '~utils';\nimport { size } from '~tokens/global';\nimport { logger } from '~utils/logger';\nimport { getFloatingPlacementParts } from '~utils/getFloatingPlacementParts';\n\nconst StyledSvg = styled(Svg)<{ styles?: CSSObject }>(({ styles }) => {\n  return styles;\n});\n\n// modified version of FloatingArrow\n// https://github.com/floating-ui/floating-ui/blob/master/packages/react/src/components/FloatingArrow.tsx\nconst PopupArrow = React.forwardRef<SvgProps, PopupArrowProps>(\n  ({ context, width, height, fillColor, strokeColor }, ref): React.ReactElement => {\n    const { theme } = useTheme();\n\n    const {\n      placement,\n      elements: { floating },\n      middlewareData: { arrow },\n    } = context;\n    const strokeWidth = theme.border.width.thin * 2;\n\n    if (__DEV__) {\n      if (!ref) {\n        logger({\n          type: 'warn',\n          moduleName: 'PopupArrow',\n          message: 'Floating UI: The `ref` prop is required for the `FloatingArrow` component.',\n        });\n      }\n    }\n\n    if (!floating) {\n      return <></>;\n    }\n\n    const [side] = getFloatingPlacementParts(placement);\n\n    const svgX = width / 2;\n    const svgY = 0;\n    const dValue =\n      'M0,0' +\n      ` H${width}` +\n      ` L${width - svgX},${height - svgY}` +\n      ` Q${width / 2},${height} ${svgX},${height - svgY}` +\n      ' Z';\n\n    const staticSide = {\n      top: 'bottom',\n      right: 'left',\n      bottom: 'top',\n      left: 'right',\n    }[side];\n\n    const rotation = {\n      top: 0,\n      bottom: 180,\n      left: -90,\n      right: 90,\n    }[side];\n\n    let newStyles = {};\n    if (arrow) {\n      const { x, y } = arrow;\n      newStyles = {\n        width: makeSize(size[20]),\n        height: makeSize(size[20]),\n        position: 'absolute',\n        left: x != null ? `${x}px` : undefined,\n        top: y != null ? `${y}px` : undefined,\n        // Ensure the static side gets unset when\n        // flipping to other placements' axes.\n        right: undefined,\n        bottom: undefined,\n        [staticSide]: `${-width}px`,\n        transform: `rotate(${rotation}deg)`,\n      };\n    }\n\n    return (\n      <View\n        pointerEvents=\"none\"\n        collapsable={false}\n        style={{ position: 'absolute', left: 0, right: 0, top: 0, bottom: 0 }}\n      >\n        <StyledSvg\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment, @typescript-eslint/prefer-ts-expect-error\n          // @ts-ignore this file is native only\n          ref={ref}\n          width={`${width}px`}\n          height={`${width}px`}\n          viewBox={`0 0 ${width} ${width}`}\n          styles={newStyles}\n        >\n          <Path fill=\"none\" stroke={strokeColor} strokeWidth={`${strokeWidth}px`} d={dValue} />\n          <Path fill={fillColor} stroke=\"none\" d={dValue} />\n        </StyledSvg>\n      </View>\n    );\n  },\n);\n\nexport { PopupArrow };\n"],"names":["StyledSvg","styled","Svg","_ref","styles","PopupArrow","React","forwardRef","_ref2","ref","context","width","height","fillColor","strokeColor","_useTheme","useTheme","theme","placement","floating","elements","arrow","middlewareData","strokeWidth","border","thin","__DEV__","logger","type","moduleName","message","_jsx","_Fragment","_getFloatingPlacement","getFloatingPlacementParts","_getFloatingPlacement2","_slicedToArray","side","svgX","svgY","dValue","staticSide","top","right","bottom","left","rotation","newStyles","x","y","_defineProperty","makeSize","size","position","undefined","View","pointerEvents","collapsable","style","children","_jsxs","viewBox","Path","fill","stroke","d"],"mappings":";;;;;;;;;;;;;;;;;;;;AAcA,IAAMA,SAAS,CAAGC,MAAM,CAACC,GAAG,CAAC,CAAyB,SAAAC,IAAA,CAAgB,CAAb,IAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAC7D,OAAOA,MAAM,CACf,CAAC,CAAC,CAII,IAAAC,UAAU,CAAGC,KAAK,CAACC,UAAU,CACjC,SAAAC,KAAA,CAAqDC,GAAG,CAAyB,KAA9EC,OAAO,CAAAF,KAAA,CAAPE,OAAO,CAAEC,KAAK,CAAAH,KAAA,CAALG,KAAK,CAAEC,MAAM,CAAAJ,KAAA,CAANI,MAAM,CAAEC,SAAS,CAAAL,KAAA,CAATK,SAAS,CAAEC,WAAW,CAAAN,KAAA,CAAXM,WAAW,CAC/C,IAAAC,SAAA,CAAkBC,QAAQ,EAAE,CAApBC,KAAK,CAAAF,SAAA,CAALE,KAAK,CAEb,IACEC,SAAS,CAGPR,OAAO,CAHTQ,SAAS,CACGC,QAAQ,CAElBT,OAAO,CAFTU,QAAQ,CAAID,QAAQ,CACFE,KAAK,CACrBX,OAAO,CADTY,cAAc,CAAID,KAAK,CAEzB,IAAME,WAAW,CAAGN,KAAK,CAACO,MAAM,CAACb,KAAK,CAACc,IAAI,CAAG,CAAC,CAE/C,GAAIC,OAAO,CAAE,CACX,GAAI,CAACjB,GAAG,CAAE,CACRkB,MAAM,CAAC,CACLC,IAAI,CAAE,MAAM,CACZC,UAAU,CAAE,YAAY,CACxBC,OAAO,CAAE,4EACX,CAAC,CAAC,CACJ,CACF,CAEA,GAAI,CAACX,QAAQ,CAAE,CACb,OAAOY,GAAA,CAAAC,QAAA,CAAI,EAAA,CAAC,CACd,CAEA,IAAAC,qBAAA,CAAeC,yBAAyB,CAAChB,SAAS,CAAC,CAAAiB,sBAAA,CAAAC,cAAA,CAAAH,qBAAA,CAA5CI,CAAAA,CAAAA,CAAAA,IAAI,CAAAF,sBAAA,CAAA,CAAA,CAAA,CAEX,IAAMG,IAAI,CAAG3B,KAAK,CAAG,CAAC,CACtB,IAAM4B,IAAI,CAAG,CAAC,CACd,IAAMC,MAAM,CACV,MAAM,CACN,CAAK7B,EAAAA,EAAAA,KAAK,CAAE,CAAA,CACZ,KAAKA,KAAK,CAAG2B,IAAI,CAAA,CAAA,EAAI1B,MAAM,CAAG2B,IAAI,CAAA,CAAE,CACpC,CAAK5B,EAAAA,EAAAA,KAAK,CAAG,CAAC,CAAIC,CAAAA,EAAAA,MAAM,CAAI0B,CAAAA,EAAAA,IAAI,IAAI1B,MAAM,CAAG2B,IAAI,CAAA,CAAE,CACnD,IAAI,CAEN,IAAME,UAAU,CAAG,CACjBC,GAAG,CAAE,QAAQ,CACbC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,KAAK,CACbC,IAAI,CAAE,OACR,CAAC,CAACR,IAAI,CAAC,CAEP,IAAMS,QAAQ,CAAG,CACfJ,GAAG,CAAE,CAAC,CACNE,MAAM,CAAE,GAAG,CACXC,IAAI,CAAE,CAAC,EAAE,CACTF,KAAK,CAAE,EACT,CAAC,CAACN,IAAI,CAAC,CAEP,IAAIU,SAAS,CAAG,EAAE,CAClB,GAAI1B,KAAK,CAAE,CACT,IAAQ2B,CAAC,CAAQ3B,KAAK,CAAd2B,CAAC,CAAEC,CAAC,CAAK5B,KAAK,CAAX4B,CAAC,CACZF,SAAS,CAAAG,eAAA,CAAAA,eAAA,CAAA,CACPvC,KAAK,CAAEwC,QAAQ,CAACC,IAAI,CAAC,EAAE,CAAC,CAAC,CACzBxC,MAAM,CAAEuC,QAAQ,CAACC,IAAI,CAAC,EAAE,CAAC,CAAC,CAC1BC,QAAQ,CAAE,UAAU,CACpBR,IAAI,CAAEG,CAAC,EAAI,IAAI,CAAG,CAAA,EAAGA,CAAC,CAAA,EAAA,CAAI,CAAGM,SAAS,CACtCZ,GAAG,CAAEO,CAAC,EAAI,IAAI,CAAG,GAAGA,CAAC,CAAA,EAAA,CAAI,CAAGK,SAAS,CAGrCX,KAAK,CAAEW,SAAS,CAChBV,MAAM,CAAEU,SAAS,CAAA,CAChBb,UAAU,CAAG,CAAG,EAAA,CAAC9B,KAAK,CAAA,EAAA,CAAI,CAChB,CAAA,WAAA,CAAA,CAAA,OAAA,EAAUmC,QAAQ,CAAA,IAAA,CAAM,CACpC,CACH,CAEA,OACEf,GAAA,CAACwB,IAAI,CAAA,CACHC,aAAa,CAAC,MAAM,CACpBC,WAAW,CAAE,KAAM,CACnBC,KAAK,CAAE,CAAEL,QAAQ,CAAE,UAAU,CAAER,IAAI,CAAE,CAAC,CAAEF,KAAK,CAAE,CAAC,CAAED,GAAG,CAAE,CAAC,CAAEE,MAAM,CAAE,CAAE,CAAE,CAAAe,QAAA,CAEtEC,IAAA,CAAC5D,SAAS,EAGRS,GAAG,CAAEA,GAAI,CACTE,KAAK,CAAE,CAAGA,EAAAA,KAAK,IAAK,CACpBC,MAAM,CAAE,CAAA,EAAGD,KAAK,CAAA,EAAA,CAAK,CACrBkD,OAAO,CAAE,CAAA,IAAA,EAAOlD,KAAK,CAAA,CAAA,EAAIA,KAAK,CAAA,CAAG,CACjCP,MAAM,CAAE2C,SAAU,CAAAY,QAAA,CAAA,CAElB5B,GAAA,CAAC+B,IAAI,CAAA,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAElD,WAAY,CAACS,WAAW,CAAE,CAAGA,EAAAA,WAAW,CAAK,EAAA,CAAA,CAAC0C,CAAC,CAAEzB,MAAO,CAAE,CAAC,CACrFT,GAAA,CAAC+B,IAAI,CAACC,CAAAA,IAAI,CAAElD,SAAU,CAACmD,MAAM,CAAC,MAAM,CAACC,CAAC,CAAEzB,MAAO,CAAE,CAAC,CACzC,CAAA,CAAC,CACR,CAAC,CAEX,CACF;;;;"}