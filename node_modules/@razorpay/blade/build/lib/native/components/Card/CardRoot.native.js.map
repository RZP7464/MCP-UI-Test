{"version":3,"file":"CardRoot.native.js","sources":["../../../../../src/components/Card/CardRoot.native.tsx"],"sourcesContent":["import React from 'react';\nimport { Linking, Pressable } from 'react-native';\nimport Animated, { useAnimatedStyle, withTiming } from 'react-native-reanimated';\nimport styled from 'styled-components';\nimport type { CardRootProps } from './types';\nimport { CARD_SCALE_DOWN_VALUE } from './constants';\nimport BaseBox from '~components/Box/BaseBox';\nimport { castNativeType, makeMotionTime } from '~utils';\nimport { useTheme } from '~components/BladeProvider';\nimport { logger } from '~utils/logger';\nimport { makeAccessible } from '~utils/makeAccessible/makeAccessible.native';\nimport type { BladeElementRef } from '~utils/types';\n\nconst StyledCardRoot = styled(BaseBox)<CardRootProps>(({ isSelected, ...props }) => {\n  const selectedColor = isSelected\n    ? props.theme.colors.surface.border.primary.normal\n    : 'transparent';\n  return {\n    border: `${props.theme.border.width.thicker}px solid ${selectedColor}`,\n  };\n});\n\nconst AnimatedPressable = Animated.createAnimatedComponent(Pressable);\n\nconst openURL = async (href: string): Promise<void> => {\n  try {\n    const canOpen = await Linking.canOpenURL(href);\n    if (canOpen) {\n      await Linking.openURL(href);\n    }\n  } catch {\n    if (__DEV__) {\n      logger({\n        type: 'warn',\n        message: `Could not open the link \"href=${href}\"`,\n        moduleName: 'BaseButton',\n      });\n    }\n  }\n};\n\nconst _CardRoot: React.ForwardRefRenderFunction<BladeElementRef, CardRootProps> = (\n  { children, onClick, isSelected, shouldScaleOnHover, href, as, accessibilityLabel, ...props },\n  ref,\n): React.ReactElement => {\n  const { theme } = useTheme();\n  const [isPressed, setIsPressed] = React.useState(false);\n  const duration = castNativeType(makeMotionTime(theme.motion.duration.xquick));\n  const easing = castNativeType(theme.motion.easing.standard);\n\n  const styles = useAnimatedStyle(() => {\n    return {\n      transform: [\n        {\n          // TODO: check with design once what to do on mobile\n          scale: withTiming(isPressed ? CARD_SCALE_DOWN_VALUE : 1, { duration, easing }),\n        },\n      ],\n    };\n  }, [isPressed]);\n\n  if (onClick || shouldScaleOnHover || href) {\n    return (\n      <AnimatedPressable\n        ref={ref as never}\n        {...makeAccessible({\n          role: href ? 'link' : undefined,\n          label: accessibilityLabel,\n          selected: isSelected,\n        })}\n        style={styles}\n        onPressIn={(event) => {\n          if (onClick) {\n            onClick(event);\n          }\n          setIsPressed(true);\n        }}\n        onPressOut={() => {\n          if (href) {\n            void openURL(href);\n          }\n          setIsPressed(false);\n        }}\n      >\n        <StyledCardRoot as={undefined} isSelected={isSelected} {...props}>\n          {children}\n        </StyledCardRoot>\n      </AnimatedPressable>\n    );\n  }\n\n  return (\n    <StyledCardRoot as={undefined} isSelected={isSelected} {...props}>\n      {children}\n    </StyledCardRoot>\n  );\n};\n\nconst CardRoot = React.forwardRef(_CardRoot);\n\nexport { CardRoot };\n"],"names":["StyledCardRoot","styled","BaseBox","_ref","isSelected","props","_objectWithoutProperties","_excluded","selectedColor","theme","colors","surface","border","primary","normal","width","thicker","AnimatedPressable","Animated","createAnimatedComponent","Pressable","openURL","_ref2","_asyncToGenerator","href","canOpen","Linking","canOpenURL","_unused","__DEV__","logger","type","message","moduleName","_x","apply","arguments","_CardRoot","_ref3","ref","children","onClick","shouldScaleOnHover","as","accessibilityLabel","_excluded2","_useTheme","useTheme","_React$useState","React","useState","_React$useState2","_slicedToArray","isPressed","setIsPressed","duration","castNativeType","makeMotionTime","motion","xquick","easing","standard","styles","useAnimatedStyle","transform","scale","withTiming","CARD_SCALE_DOWN_VALUE","_jsx","Object","assign","makeAccessible","role","undefined","label","selected","style","onPressIn","event","onPressOut","CardRoot","forwardRef"],"mappings":"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"}