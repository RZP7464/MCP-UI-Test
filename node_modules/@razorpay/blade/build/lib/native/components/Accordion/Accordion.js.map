{"version":3,"file":"Accordion.js","sources":["../../../../../src/components/Accordion/Accordion.tsx"],"sourcesContent":["import type { ReactElement } from 'react';\nimport React, { useCallback, useMemo, useState, cloneElement, Children } from 'react';\nimport type { AccordionContextState } from './AccordionContext';\nimport { AccordionContext } from './AccordionContext';\nimport { MAX_WIDTH } from './styles';\nimport type { AccordionProps } from './types';\nimport { BaseBox } from '~components/Box/BaseBox';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { BoxProps } from '~components/Box';\nimport { size as sizeTokens } from '~tokens/global';\nimport { makeSize } from '~utils';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { BladeElementRef } from '~utils/types';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\nconst MIN_WIDTH: BoxProps['minWidth'] = {\n  s: makeSize(sizeTokens[200]),\n  m: makeSize(sizeTokens[360]),\n  l: makeSize(sizeTokens[360]),\n};\n\nconst getVariantStyles = (variant: AccordionProps['variant']): BoxProps => {\n  if (variant === 'transparent') {\n    return {};\n  }\n\n  return {\n    backgroundColor: 'surface.background.gray.intense',\n    borderRadius: 'medium',\n    borderWidth: 'thinner',\n    borderColor: 'surface.border.gray.subtle',\n  };\n};\n\n/**\n * # Accordion\n *\n * An accordion is used to allow users to toggle between different content sections in a compact vertical stack.\n *\n * ## Usage\n *\n * ```jsx\n * <Accordion>\n *  <AccordionItem>\n *    <AccordionItemHeader title=\"Title\" />\n *    <AccordionItemBody>\n *      <Text color=\"surface.text.gray.subtle\">\n *        Hello this is accordion body content\n *        </Text>\n *     </AccordionItemBody>\n *  </AccordionItem>\n *  <AccordionItem>\n *    <AccordionItemHeader title=\"Title\" />\n *    <AccordionItemBody>\n *      <Text color=\"surface.text.gray.subtle\">\n *         Hello this is accordion body content\n *      </Text>\n *    </AccordionItemBody>\n *  </AccordionItem>\n * </Accordion>\n * ```\n *\n * Checkout https://blade.razorpay.com/?path=/docs/components-accordion--docs\n *\n */\nconst _Accordion = (\n  {\n    defaultExpandedIndex,\n    expandedIndex,\n    onExpandChange,\n    showNumberPrefix = false,\n    children,\n    variant = 'transparent',\n    size = 'large',\n    maxWidth,\n    minWidth,\n    testID,\n    ...rest\n  }: AccordionProps,\n  ref: React.Ref<BladeElementRef>,\n): ReactElement => {\n  const [expandedAccordionItemIndex, setExpandedAccordionItemIndex] = useState<number | undefined>(\n    defaultExpandedIndex,\n  );\n\n  const numberOfItems = Children.count(children);\n\n  const handleExpandChange = useCallback(\n    (nextExpandedIndex: number) => {\n      if (typeof expandedIndex !== 'undefined') {\n        // controlled\n        onExpandChange?.({ expandedIndex: nextExpandedIndex });\n      } else {\n        // uncontrolled\n        setExpandedAccordionItemIndex(nextExpandedIndex);\n        onExpandChange?.({ expandedIndex: nextExpandedIndex });\n      }\n    },\n    [onExpandChange, expandedIndex],\n  );\n\n  const accordionContext = useMemo<AccordionContextState>(\n    () => ({\n      expandedIndex: expandedIndex ?? expandedAccordionItemIndex,\n      defaultExpandedIndex,\n      onExpandChange: handleExpandChange,\n      showNumberPrefix,\n      variant,\n      numberOfItems,\n      size,\n    }),\n    [\n      expandedAccordionItemIndex,\n      handleExpandChange,\n      expandedIndex,\n      showNumberPrefix,\n      defaultExpandedIndex,\n      variant,\n      numberOfItems,\n      size,\n    ],\n  );\n\n  return (\n    <AccordionContext.Provider value={accordionContext}>\n      <BaseBox\n        ref={ref as never}\n        minWidth={minWidth ?? MIN_WIDTH}\n        maxWidth={maxWidth ?? MAX_WIDTH}\n        {...metaAttribute({ name: MetaConstants.Accordion, testID })}\n        {...getStyledProps(rest)}\n        {...makeAnalyticsAttribute(rest)}\n      >\n        <BaseBox {...getVariantStyles(variant)} width=\"100%\">\n          {Children.map(children, (child, index) =>\n            cloneElement(child, { _index: index, key: index }),\n          )}\n        </BaseBox>\n      </BaseBox>\n    </AccordionContext.Provider>\n  );\n};\n\nconst Accordion = React.forwardRef(_Accordion);\n\nexport { Accordion };\n"],"names":["MIN_WIDTH","s","makeSize","sizeTokens","m","l","getVariantStyles","variant","backgroundColor","borderRadius","borderWidth","borderColor","_Accordion","_ref","ref","defaultExpandedIndex","expandedIndex","onExpandChange","_ref$showNumberPrefix","showNumberPrefix","children","_ref$variant","_ref$size","size","maxWidth","minWidth","testID","rest","_objectWithoutProperties","_excluded","_useState","useState","_useState2","_slicedToArray","expandedAccordionItemIndex","setExpandedAccordionItemIndex","numberOfItems","Children","count","handleExpandChange","useCallback","nextExpandedIndex","accordionContext","useMemo","_jsx","AccordionContext","Provider","value","BaseBox","Object","assign","MAX_WIDTH","metaAttribute","name","MetaConstants","Accordion","getStyledProps","makeAnalyticsAttribute","width","map","child","index","cloneElement","_index","key","React","forwardRef"],"mappings":"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"}