{"version":3,"file":"AccordionItem.js","sources":["../../../../../src/components/Accordion/AccordionItem.tsx"],"sourcesContent":["import type { ReactElement, ReactNode } from 'react';\nimport React from 'react';\nimport { AccordionButton } from './AccordionButton';\nimport { AccordionItemContext, useAccordion } from './AccordionContext';\nimport { AccordionItemBody } from './AccordionItemBody';\nimport { componentIds } from './componentIds';\nimport { Divider } from '~components/Divider';\nimport { BaseBox } from '~components/Box/BaseBox';\nimport type { IconComponent } from '~components/Icons';\nimport { MetaConstants, metaAttribute } from '~utils/metaAttribute';\nimport { isReactNative } from '~utils';\nimport { Collapsible } from '~components/Collapsible/Collapsible';\nimport { CollapsibleBody } from '~components/Collapsible';\nimport type { TestID, DataAnalyticsAttribute } from '~utils/types';\nimport { getComponentId } from '~utils/isValidAllowedChildren';\nimport { throwBladeError } from '~utils/logger';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\ntype AccordionItemProps = {\n  /**\n   * Title text content\n   *\n   * @deprecated Use AccordionItemHeader and AccordionItemBody\n   *\n   * Checkout https://blade.razorpay.com/?path=/docs/components-accordion--docs for new API\n   */\n  title?: string;\n\n  /**\n   * Body text content\n   *\n   *  @deprecated Use AccordionItemHeader and AccordionItemBody\n   *\n   * Checkout https://blade.razorpay.com/?path=/docs/components-accordion--docs for new API\n   */\n  description?: string;\n\n  /**\n   * Renders a Blade icon as title prefix (requires `showNumberPrefix={false}`)\n   *\n   * @deprecated Use `leading={<StarIcon size=\"large\" />}` on AccordionItemHeader instead\n   *\n   * Checkout https://blade.razorpay.com/?path=/docs/components-accordion--docs for new API\n   */\n  icon?: IconComponent;\n\n  /**\n   * Slot, renders any custom content\n   */\n  children?: ReactNode | ReactNode[];\n\n  /**\n   * Disabled state of the item\n   *\n   * @default false\n   */\n  isDisabled?: boolean;\n\n  /**\n   * **Internal:** used for determining numbering, you don't need to pass this,\n   * instead pass `showNumberPrefix` to root `Accordion`\n   */\n  _index?: number;\n} & TestID &\n  DataAnalyticsAttribute;\n\nconst AccordionItem = ({\n  title,\n  description,\n  icon,\n  children,\n  isDisabled,\n  _index,\n  testID,\n  ...rest\n}: AccordionItemProps): ReactElement => {\n  const {\n    expandedIndex,\n    onExpandChange,\n    defaultExpandedIndex,\n    variant,\n    numberOfItems,\n  } = useAccordion();\n  const isExpanded = expandedIndex === _index;\n  const isDefaultExpanded = defaultExpandedIndex === _index;\n  const isDeprecatedAPI = Boolean(title) || Boolean(description) || Boolean(icon);\n  const [header, body] = React.Children.toArray(children);\n\n  if (!isDeprecatedAPI) {\n    // Only doing validation in new API. Deprecated API allows everything as AccordionItem children\n    const headerComponentId = getComponentId(header);\n    const bodyComponentId = getComponentId(body);\n\n    if (\n      headerComponentId !== componentIds.AccordionItemHeader &&\n      bodyComponentId !== componentIds.AccordionItemBody\n    ) {\n      throwBladeError({\n        message:\n          'AccordionItem only allows AccordionItemHeader as first component and AccordionItemBody as second. Check Accordion documentation',\n        moduleName: 'AccordionItem',\n      });\n    }\n  }\n\n  const isLastItem = _index !== undefined && _index < numberOfItems - 1;\n\n  const handleExpandChange = ({ isExpanded }: { isExpanded: boolean }): void => {\n    if (isExpanded && typeof _index !== 'undefined') {\n      onExpandChange(_index);\n    } else {\n      onExpandChange(-1);\n    }\n  };\n\n  return (\n    <AccordionItemContext.Provider\n      value={{\n        index: _index,\n        isDisabled,\n      }}\n    >\n      <BaseBox {...metaAttribute({ name: MetaConstants.AccordionItem, testID })}>\n        <Collapsible\n          isExpanded={isExpanded}\n          defaultIsExpanded={isDefaultExpanded}\n          onExpandChange={handleExpandChange}\n          // Accordion has its own width restrictions\n          _shouldApplyWidthRestrictions={false}\n          _dangerouslyDisableValidations={true}\n          // adding analytics attributes to Collapsible section\n          {...makeAnalyticsAttribute(rest)}\n        >\n          <AccordionButton\n            index={_index}\n            icon={icon}\n            title={title}\n            header={header}\n            isDisabled={isDisabled}\n            isDeprecatedAPI={isDeprecatedAPI}\n          />\n          <CollapsibleBody\n            // Just React Native things, need this 100% so collapsed content flows correctly inside Accordion\n            // In new API, AccordionItemBody takes 100% width to avoid issues like this - https://github.com/razorpay/blade/pull/1814\n            width={isReactNative() || !isDeprecatedAPI ? '100%' : undefined}\n          >\n            {isDeprecatedAPI ? (\n              <AccordionItemBody _description={description}>{children}</AccordionItemBody>\n            ) : (\n              body\n            )}\n          </CollapsibleBody>\n        </Collapsible>\n        {isLastItem || variant === 'transparent' ? <Divider /> : null}\n      </BaseBox>\n    </AccordionItemContext.Provider>\n  );\n};\n\nexport type { AccordionItemProps };\nexport { AccordionItem };\n"],"names":["AccordionItem","_ref","title","description","icon","children","isDisabled","_index","testID","rest","_objectWithoutProperties","_excluded","_useAccordion","useAccordion","expandedIndex","onExpandChange","defaultExpandedIndex","variant","numberOfItems","isExpanded","isDefaultExpanded","isDeprecatedAPI","Boolean","_React$Children$toArr","React","Children","toArray","_React$Children$toArr2","_slicedToArray","header","body","headerComponentId","getComponentId","bodyComponentId","componentIds","AccordionItemHeader","AccordionItemBody","throwBladeError","message","moduleName","isLastItem","undefined","handleExpandChange","_ref2","_jsx","AccordionItemContext","Provider","value","index","_jsxs","BaseBox","Object","assign","metaAttribute","name","MetaConstants","Collapsible","defaultIsExpanded","_shouldApplyWidthRestrictions","_dangerouslyDisableValidations","makeAnalyticsAttribute","AccordionButton","CollapsibleBody","width","isReactNative","_description","Divider"],"mappings":"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"}