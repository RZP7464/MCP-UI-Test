{"version":3,"file":"useToast.js","sources":["../../../../../src/components/Toast/useToast.tsx"],"sourcesContent":["import type { Toast } from 'react-hot-toast';\nimport toast, { useToasterStore } from 'react-hot-toast';\nimport type { ToastProps } from './types';\nimport { Toast as ToastComponent } from './Toast';\nimport { logger } from '~utils/logger';\n\ntype BladeToast = Omit<Toast, 'type'> & ToastProps;\ntype UseToastReturn = {\n  toasts: BladeToast[];\n  show: (props: ToastProps) => string;\n  dismiss: (id?: string) => void;\n};\n\nconst useToast = (): UseToastReturn => {\n  const { toasts } = useToasterStore();\n  const show = (props: ToastProps): string => {\n    props.type = props.type ?? 'informational';\n\n    // Do not show promotional toasts if there is already one\n    if (\n      toasts.find((t) => {\n        // @ts-expect-error - react-hot-toast doesn't recognize our promotional type\n        return t.type === 'promotional';\n      }) &&\n      props.type === 'promotional'\n    ) {\n      if (__DEV__) {\n        logger({\n          message: 'There can only be one promotional toast at a time',\n          type: 'warn',\n          moduleName: 'Toast',\n        });\n      }\n      return '';\n    }\n\n    const isPromoToast = props.type === 'promotional';\n    if (props.autoDismiss === undefined) {\n      // Promotional toasts should not auto dismiss\n      props.autoDismiss = !isPromoToast;\n    }\n\n    if (props.duration === undefined) {\n      // Set default durations\n      if (isPromoToast) {\n        props.duration = 8000;\n      } else {\n        props.duration = 4000;\n      }\n    }\n\n    // If autoDismiss is false, set duration to infinity\n    if (!props.autoDismiss) {\n      props.duration = Infinity;\n    }\n\n    return toast.custom(({ visible, id }) => {\n      return <ToastComponent {...props} id={id} isVisible={visible} />;\n    }, props);\n  };\n\n  return {\n    toasts: (toasts as unknown) as BladeToast[],\n    show,\n    dismiss: toast.dismiss,\n  };\n};\n\nexport type { UseToastReturn };\nexport { useToast };\n"],"names":["useToast","_useToasterStore","useToasterStore","toasts","show","props","_props$type","type","find","t","__DEV__","logger","message","moduleName","isPromoToast","autoDismiss","undefined","duration","Infinity","toast","custom","_ref","visible","id","_jsx","ToastComponent","Object","assign","isVisible","dismiss"],"mappings":";;;;;AAaM,IAAAA,QAAQ,CAAG,SAAXA,QAAQA,EAAyB,CACrC,IAAAC,gBAAA,CAAmBC,eAAe,EAAE,CAA5BC,MAAM,CAAAF,gBAAA,CAANE,MAAM,CACd,IAAMC,IAAI,CAAG,SAAPA,IAAIA,CAAIC,KAAiB,CAAa,CAAAC,IAAAA,WAAA,CAC1CD,KAAK,CAACE,IAAI,CAAAD,CAAAA,WAAA,CAAGD,KAAK,CAACE,IAAI,GAAA,IAAA,CAAAD,WAAA,CAAI,eAAe,CAG1C,GACEH,MAAM,CAACK,IAAI,CAAC,SAACC,CAAC,CAAK,CAEjB,OAAOA,CAAC,CAACF,IAAI,GAAK,aAAa,CACjC,CAAC,CAAC,EACFF,KAAK,CAACE,IAAI,GAAK,aAAa,CAC5B,CACA,GAAIG,OAAO,CAAE,CACXC,MAAM,CAAC,CACLC,OAAO,CAAE,mDAAmD,CAC5DL,IAAI,CAAE,MAAM,CACZM,UAAU,CAAE,OACd,CAAC,CAAC,CACJ,CACA,OAAO,EAAE,CACX,CAEA,IAAMC,YAAY,CAAGT,KAAK,CAACE,IAAI,GAAK,aAAa,CACjD,GAAIF,KAAK,CAACU,WAAW,GAAKC,SAAS,CAAE,CAEnCX,KAAK,CAACU,WAAW,CAAG,CAACD,YAAY,CACnC,CAEA,GAAIT,KAAK,CAACY,QAAQ,GAAKD,SAAS,CAAE,CAEhC,GAAIF,YAAY,CAAE,CAChBT,KAAK,CAACY,QAAQ,CAAG,IAAI,CACvB,CAAC,KAAM,CACLZ,KAAK,CAACY,QAAQ,CAAG,IAAI,CACvB,CACF,CAGA,GAAI,CAACZ,KAAK,CAACU,WAAW,CAAE,CACtBV,KAAK,CAACY,QAAQ,CAAGC,QAAQ,CAC3B,CAEA,OAAOC,KAAK,CAACC,MAAM,CAAC,SAAAC,IAAA,CAAqB,CAAA,IAAlBC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CAAEC,EAAE,CAAAF,IAAA,CAAFE,EAAE,CAChC,OAAOC,GAAA,CAACC,KAAc,CAAAC,MAAA,CAAAC,MAAA,CAAA,EAAA,CAAKtB,KAAK,CAAA,CAAEkB,EAAE,CAAEA,EAAG,CAACK,SAAS,CAAEN,OAAQ,CAAE,CAAA,CAAC,CAClE,CAAC,CAAEjB,KAAK,CAAC,CACX,CAAC,CAED,OAAO,CACLF,MAAM,CAAGA,MAAkC,CAC3CC,IAAI,CAAJA,IAAI,CACJyB,OAAO,CAAEV,KAAK,CAACU,OACjB,CAAC,CACH;;;;"}