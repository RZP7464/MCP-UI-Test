{"version":3,"file":"PulseAnimation.native.js","sources":["../../../../../src/components/Skeleton/PulseAnimation.native.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable @typescript-eslint/restrict-plus-operands */\nimport Animated, {\n  cancelAnimation,\n  interpolateColor,\n  useAnimatedStyle,\n  useSharedValue,\n  withRepeat,\n  withSequence,\n  withTiming,\n} from 'react-native-reanimated';\nimport React from 'react';\nimport type { SkeletonProps } from './types';\nimport BaseBox from '~components/Box/BaseBox';\nimport { castNativeType, makeMotionTime } from '~utils';\nimport { useTheme } from '~components/BladeProvider';\nimport type { BladeElementRef } from '~utils/types';\n\nconst AnimatedBox = Animated.createAnimatedComponent(BaseBox);\n\nconst _PulseAnimation = (\n  props: SkeletonProps,\n  ref: React.Ref<BladeElementRef>,\n): React.ReactElement => {\n  const { theme } = useTheme();\n  const durationPluseOff = theme.motion.duration.xmoderate;\n  const durationPluseOn = theme.motion.duration['2xgentle'];\n  const totalDuration = castNativeType(makeMotionTime(durationPluseOn + durationPluseOff));\n  const easing = castNativeType(theme.motion.easing.emphasized);\n  const progress = useSharedValue(0);\n\n  const fadeIn = () => {\n    'worklet';\n    const animations = {\n      opacity: withTiming(1, { duration: totalDuration, easing }),\n    };\n    const initialValues = {\n      opacity: 0,\n    };\n    return {\n      initialValues,\n      animations,\n    };\n  };\n\n  // Trigger pulsating animation\n  React.useEffect(() => {\n    const pulsatingAnimationTimingConfig = {\n      duration: totalDuration,\n      easing,\n    };\n    progress.value = withRepeat(\n      withSequence(\n        withTiming(0, pulsatingAnimationTimingConfig),\n        withTiming(1, pulsatingAnimationTimingConfig),\n      ),\n      -1,\n      true,\n    );\n\n    return () => {\n      cancelAnimation(progress);\n    };\n  }, [easing, progress, totalDuration]);\n\n  const pulseAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      backgroundColor: interpolateColor(\n        progress.value,\n        [1, 0],\n        [\n          theme.colors.interactive.background.gray.highlighted,\n          theme.colors.interactive.background.gray.default,\n        ],\n      ),\n    };\n  });\n\n  return <AnimatedBox ref={ref as never} entering={fadeIn} style={pulseAnimatedStyle} {...props} />;\n};\n\nconst PulseAnimation = React.forwardRef(_PulseAnimation);\n\nexport { PulseAnimation };\n"],"names":["AnimatedBox","Animated","createAnimatedComponent","BaseBox","_PulseAnimation","props","ref","_useTheme","useTheme","theme","durationPluseOff","motion","duration","xmoderate","durationPluseOn","totalDuration","castNativeType","makeMotionTime","easing","emphasized","progress","useSharedValue","fadeIn","animations","opacity","withTiming","initialValues","React","useEffect","pulsatingAnimationTimingConfig","value","withRepeat","withSequence","cancelAnimation","pulseAnimatedStyle","useAnimatedStyle","backgroundColor","interpolateColor","colors","interactive","background","gray","highlighted","default","_jsx","Object","assign","entering","style","PulseAnimation","forwardRef"],"mappings":";;;;;;;;;;;;;;AAkBA,IAAMA,WAAW,CAAGC,QAAQ,CAACC,uBAAuB,CAACC,OAAO,CAAC,CAE7D,IAAMC,eAAe,CAAG,SAAlBA,eAAeA,CACnBC,KAAoB,CACpBC,GAA+B,CACR,CACvB,IAAAC,SAAA,CAAkBC,QAAQ,EAAE,CAApBC,KAAK,CAAAF,SAAA,CAALE,KAAK,CACb,IAAMC,gBAAgB,CAAGD,KAAK,CAACE,MAAM,CAACC,QAAQ,CAACC,SAAS,CACxD,IAAMC,eAAe,CAAGL,KAAK,CAACE,MAAM,CAACC,QAAQ,CAAC,UAAU,CAAC,CACzD,IAAMG,aAAa,CAAGC,cAAc,CAACC,cAAc,CAACH,eAAe,CAAGJ,gBAAgB,CAAC,CAAC,CACxF,IAAMQ,MAAM,CAAGF,cAAc,CAACP,KAAK,CAACE,MAAM,CAACO,MAAM,CAACC,UAAU,CAAC,CAC7D,IAAMC,QAAQ,CAAGC,cAAc,CAAC,CAAC,CAAC,CAElC,IAAMC,MAAM,CAAG,SAATA,MAAMA,EAAS,CACnB,SAAS,CACT,IAAMC,UAAU,CAAG,CACjBC,OAAO,CAAEC,UAAU,CAAC,CAAC,CAAE,CAAEb,QAAQ,CAAEG,aAAa,CAAEG,MAAM,CAANA,MAAO,CAAC,CAC5D,CAAC,CACD,IAAMQ,aAAa,CAAG,CACpBF,OAAO,CAAE,CACX,CAAC,CACD,OAAO,CACLE,aAAa,CAAbA,aAAa,CACbH,UAAU,CAAVA,UACF,CAAC,CACH,CAAC,CAGDI,cAAK,CAACC,SAAS,CAAC,UAAM,CACpB,IAAMC,8BAA8B,CAAG,CACrCjB,QAAQ,CAAEG,aAAa,CACvBG,MAAM,CAANA,MACF,CAAC,CACDE,QAAQ,CAACU,KAAK,CAAGC,UAAU,CACzBC,YAAY,CACVP,UAAU,CAAC,CAAC,CAAEI,8BAA8B,CAAC,CAC7CJ,UAAU,CAAC,CAAC,CAAEI,8BAA8B,CAC9C,CAAC,CACD,CAAC,CAAC,CACF,IACF,CAAC,CAED,OAAO,UAAM,CACXI,eAAe,CAACb,QAAQ,CAAC,CAC3B,CAAC,CACH,CAAC,CAAE,CAACF,MAAM,CAAEE,QAAQ,CAAEL,aAAa,CAAC,CAAC,CAErC,IAAMmB,kBAAkB,CAAGC,gBAAgB,CAAC,UAAM,CAChD,OAAO,CACLC,eAAe,CAAEC,gBAAgB,CAC/BjB,QAAQ,CAACU,KAAK,CACd,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CACErB,KAAK,CAAC6B,MAAM,CAACC,WAAW,CAACC,UAAU,CAACC,IAAI,CAACC,WAAW,CACpDjC,KAAK,CAAC6B,MAAM,CAACC,WAAW,CAACC,UAAU,CAACC,IAAI,CAACE,OAAO,CAEpD,CACF,CAAC,CACH,CAAC,CAAC,CAEF,OAAOC,GAAA,CAAC5C,WAAW,CAAA6C,MAAA,CAAAC,MAAA,EAACxC,GAAG,CAAEA,GAAa,CAACyC,QAAQ,CAAEzB,MAAO,CAAC0B,KAAK,CAAEd,kBAAmB,EAAK7B,KAAK,CAAG,CAAC,CACnG,CAAC,CAEK,IAAA4C,cAAc,CAAGtB,cAAK,CAACuB,UAAU,CAAC9C,eAAe;;;;"}