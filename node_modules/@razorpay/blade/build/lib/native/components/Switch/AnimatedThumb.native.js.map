{"version":3,"file":"AnimatedThumb.native.js","sources":["../../../../../src/components/Switch/AnimatedThumb.native.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport styled from 'styled-components/native';\nimport React from 'react';\nimport Animated, {\n  interpolate,\n  useAnimatedStyle,\n  useSharedValue,\n  withTiming,\n} from 'react-native-reanimated';\n\nimport { switchColors, switchMotion, switchSizes } from './switchTokens';\nimport type { AnimatedThumbProps } from './types';\nimport isNumber from '~utils/lodashButBetter/isNumber';\nimport getIn from '~utils/lodashButBetter/get';\nimport { useBreakpoint } from '~utils';\nimport { useTheme } from '~components/BladeProvider';\nimport { makeBorderSize } from '~utils/makeBorderSize';\n\nconst StyledAnimatedThumb = styled(Animated.View)<{ isDisabled?: boolean }>(\n  ({ theme, isDisabled }) => {\n    const variant = isDisabled ? 'disabled' : 'default';\n    const backgroundColor = getIn(theme, switchColors.thumb[variant].background);\n\n    return {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      flexShrink: 0,\n      width: '100%',\n      height: '100%',\n      borderRadius: makeBorderSize(theme.border.radius.max),\n      backgroundColor,\n      position: 'absolute',\n    };\n  },\n);\n\nconst AnimatedThumb = ({\n  isChecked,\n  isDisabled,\n  size = 'medium',\n  children,\n  isPressed,\n}: AnimatedThumbProps): React.ReactElement => {\n  const { theme } = useTheme();\n  const { matchedDeviceType } = useBreakpoint({ breakpoints: theme.breakpoints });\n  const sharedLeft = useSharedValue(isChecked ? 1 : 0);\n  const sharedWidth = useSharedValue(isPressed ? 1 : 0);\n  const sharedShouldShiftOffset = useSharedValue(Boolean(isChecked && isPressed));\n\n  const easing = getIn(theme, switchMotion.easing.thumb);\n  const duration = getIn(theme, switchMotion.duration.thumb);\n  const thumbWidth = switchSizes.thumb[matchedDeviceType][size].width;\n  const finalWidth = isNumber(thumbWidth) ? thumbWidth : getIn(theme, thumbWidth);\n\n  React.useEffect(() => {\n    sharedLeft.value = withTiming(isChecked ? 1 : 0, {\n      duration,\n      easing,\n    });\n  }, [isChecked]);\n\n  React.useEffect(() => {\n    sharedWidth.value = withTiming(isPressed ? 1 : 0, {\n      duration,\n      easing,\n    });\n  }, [isPressed]);\n\n  React.useEffect(() => {\n    sharedShouldShiftOffset.value = Boolean(isChecked && isPressed);\n  }, [isChecked, isPressed]);\n\n  const thumbAnimation = useAnimatedStyle(() => {\n    return {\n      width: interpolate(\n        sharedWidth.value,\n        [0, 1],\n        // scale thumb by 25%, 1.25 comes from motion guidelines\n        [finalWidth, finalWidth * 1.25],\n      ),\n      left: withTiming(\n        // While on checked state, shift the thumb 25% to left because\n        // We elongate the width 25% to right.\n        sharedShouldShiftOffset.value ? finalWidth * -0.25 : 0,\n        { easing, duration },\n      ),\n      transform: [\n        {\n          translateX: interpolate(sharedLeft.value, [0, 1], [0, finalWidth]),\n        },\n      ],\n    };\n  }, []);\n\n  return (\n    <StyledAnimatedThumb style={thumbAnimation} isDisabled={isDisabled}>\n      {children}\n    </StyledAnimatedThumb>\n  );\n};\n\nexport { AnimatedThumb };\n"],"names":["StyledAnimatedThumb","styled","Animated","View","_ref","theme","isDisabled","variant","backgroundColor","getIn","switchColors","thumb","background","display","alignItems","justifyContent","flexShrink","width","height","borderRadius","makeBorderSize","border","radius","max","position","AnimatedThumb","_ref2","isChecked","_ref2$size","size","children","isPressed","_useTheme","useTheme","_useBreakpoint","useBreakpoint","breakpoints","matchedDeviceType","sharedLeft","useSharedValue","sharedWidth","sharedShouldShiftOffset","Boolean","easing","switchMotion","duration","thumbWidth","switchSizes","finalWidth","isNumber","React","useEffect","value","withTiming","thumbAnimation","useAnimatedStyle","interpolate","left","transform","translateX","_jsx","style"],"mappings":"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"}