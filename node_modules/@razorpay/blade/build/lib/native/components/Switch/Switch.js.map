{"version":3,"file":"Switch.js","sources":["../../../../../src/components/Switch/Switch.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/ban-ts-comment */\n/* eslint-disable @typescript-eslint/prefer-ts-expect-error */\nimport React from 'react';\nimport { ThumbIcon } from './ThumbIcon';\nimport type { SwitchProps } from './types';\nimport { switchHoverTokens } from './switchTokens';\nimport { Thumb } from './Thumb';\nimport { AnimatedThumb } from './AnimatedThumb';\nimport { SwitchTrack } from './SwitchTrack';\nimport { useTheme } from '~components/BladeProvider';\nimport { BaseBox } from '~components/Box/BaseBox';\nimport { useCheckbox } from '~components/Checkbox/useCheckbox';\nimport { SelectorInput } from '~components/Form/Selector/SelectorInput';\nimport { useBreakpoint } from '~utils';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport { SelectorLabel } from '~components/Form/Selector/SelectorLabel';\nimport type { BladeElementRef } from '~utils/types';\nimport { makeAccessible } from '~utils/makeAccessible';\nimport { assignWithoutSideEffects } from '~utils/assignWithoutSideEffects';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport { getInnerMotionRef, getOuterMotionRef } from '~utils/getMotionRefs';\nimport { makeAnalyticsAttribute } from '~utils/makeAnalyticsAttribute';\n\nconst _Switch: React.ForwardRefRenderFunction<BladeElementRef, SwitchProps> = (\n  {\n    defaultChecked,\n    isChecked,\n    isDisabled,\n    name,\n    onChange,\n    size = 'medium',\n    value,\n    accessibilityLabel,\n    testID,\n    _motionMeta,\n    ...rest\n  },\n  ref,\n): React.ReactElement => {\n  const { theme } = useTheme();\n  const { matchedDeviceType } = useBreakpoint({ breakpoints: theme.breakpoints });\n  const [isPressed, setIsPressed] = React.useState(false);\n  const { state, inputProps } = useCheckbox({\n    role: 'switch',\n    defaultChecked,\n    isChecked,\n    isIndeterminate: false,\n    hasError: false,\n    hasHelperText: false,\n    isDisabled,\n    isRequired: false,\n    name,\n    value,\n    onChange,\n  });\n\n  const handlePointerPressedIn = React.useCallback(() => {\n    if (isDisabled) return;\n    setIsPressed(true);\n  }, [isDisabled]);\n\n  const handlePointerPressedOut = React.useCallback(() => {\n    if (isDisabled) return;\n    setIsPressed(false);\n  }, [isDisabled]);\n\n  const handleKeyboardPressedIn = React.useCallback(\n    (e: React.KeyboardEvent) => {\n      if (isDisabled) return;\n      if (e.key === ' ') {\n        setIsPressed(true);\n      }\n    },\n    [isDisabled],\n  );\n\n  const handleKeyboardPressedOut = React.useCallback(\n    (e: React.KeyboardEvent) => {\n      if (isDisabled) return;\n      if (e.key === ' ') {\n        setIsPressed(false);\n      }\n    },\n    [isDisabled],\n  );\n\n  return (\n    <BaseBox\n      ref={getOuterMotionRef({ _motionMeta, ref })}\n      {...metaAttribute({ testID, name: MetaConstants.Switch })}\n      // @ts-ignore on rn inline-block is not valid but type here will be `flex | inline-block`\n      display={state.isReactNative ? 'flex' : 'inline-block'}\n      {...getStyledProps(rest)}\n      {...makeAnalyticsAttribute(rest)}\n    >\n      <SelectorLabel\n        componentName={MetaConstants.SwitchLabel}\n        onTouchStart={handlePointerPressedIn}\n        onTouchEnd={handlePointerPressedOut}\n        onMouseDown={handlePointerPressedIn}\n        onMouseUp={handlePointerPressedOut}\n        onMouseOut={handlePointerPressedOut}\n        onKeyDown={handleKeyboardPressedIn}\n        onKeyUp={handleKeyboardPressedOut}\n        style={{ cursor: isDisabled ? 'not-allowed' : 'pointer' }}\n        inputProps={\n          state.isReactNative\n            ? // accessibility label for react-native needs to be added\n              // since there is no text children inside Switch\n              { ...inputProps, ...makeAccessible({ label: accessibilityLabel }) }\n            : {}\n        }\n      >\n        <SelectorInput\n          hoverTokens={switchHoverTokens}\n          ref={getInnerMotionRef({ _motionMeta, ref })}\n          isChecked={state.isChecked}\n          isDisabled={isDisabled}\n          hasError={false}\n          inputProps={inputProps}\n          accessibilityLabel={accessibilityLabel}\n        />\n        <SwitchTrack\n          size={size}\n          deviceType={matchedDeviceType}\n          isDisabled={Boolean(isDisabled)}\n          isChecked={state.isChecked}\n          {...makeAccessible({ hidden: true })}\n        >\n          <Thumb size={size} deviceType={matchedDeviceType} isChecked={state.isChecked}>\n            <AnimatedThumb\n              isPressed={isPressed}\n              isChecked={state.isChecked}\n              isDisabled={isDisabled}\n              size={size}\n            >\n              <ThumbIcon isChecked={state.isChecked} isDisabled={isDisabled} size={size} />\n            </AnimatedThumb>\n          </Thumb>\n        </SwitchTrack>\n      </SelectorLabel>\n    </BaseBox>\n  );\n};\n\nconst Switch = assignWithoutSideEffects(React.forwardRef(_Switch), {\n  displayName: 'Switch',\n});\n\nexport { Switch };\n"],"names":["_Switch","_ref","ref","defaultChecked","isChecked","isDisabled","name","onChange","_ref$size","size","value","accessibilityLabel","testID","_motionMeta","rest","_objectWithoutProperties","_excluded","_useTheme","useTheme","theme","_useBreakpoint","useBreakpoint","breakpoints","matchedDeviceType","_React$useState","React","useState","_React$useState2","_slicedToArray","isPressed","setIsPressed","_useCheckbox","useCheckbox","role","isIndeterminate","hasError","hasHelperText","isRequired","state","inputProps","handlePointerPressedIn","useCallback","handlePointerPressedOut","handleKeyboardPressedIn","e","key","handleKeyboardPressedOut","_jsx","BaseBox","Object","assign","getOuterMotionRef","metaAttribute","MetaConstants","Switch","display","isReactNative","getStyledProps","makeAnalyticsAttribute","children","_jsxs","SelectorLabel","componentName","SwitchLabel","onTouchStart","onTouchEnd","onMouseDown","onMouseUp","onMouseOut","onKeyDown","onKeyUp","style","cursor","makeAccessible","label","SelectorInput","hoverTokens","switchHoverTokens","getInnerMotionRef","SwitchTrack","deviceType","Boolean","hidden","Thumb","AnimatedThumb","ThumbIcon","assignWithoutSideEffects","forwardRef","displayName"],"mappings":"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"}