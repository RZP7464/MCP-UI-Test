{"version":3,"file":"Code.js","sources":["../../../../../../src/components/Typography/Code/Code.tsx"],"sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { BaseText } from '../BaseText';\nimport type { BaseTextProps, BaseTextSizes } from '../BaseText/types';\nimport BaseBox from '~components/Box/BaseBox';\nimport { getStyledProps } from '~components/Box/styledProps';\nimport type { StyledPropsBlade } from '~components/Box/styledProps';\nimport { getPlatformType } from '~utils';\nimport { metaAttribute, MetaConstants } from '~utils/metaAttribute';\nimport type { FontSize, Typography } from '~tokens/global';\nimport type { BladeElementRef, StringChildrenType, TestID } from '~utils/types';\nimport { makeSpace } from '~utils/makeSpace';\nimport { makeTypographySize } from '~utils/makeTypographySize';\nimport { throwBladeError } from '~utils/logger';\n\ntype CodeCommonProps = {\n  /**\n   * Sets the color of the Heading component.\n   */\n  children: StringChildrenType;\n  /**\n   * Decides the fontSize and padding of Code\n   *\n   * @default small\n   */\n  size?: Extract<BaseTextSizes, 'small' | 'medium'>;\n  weight?: Extract<BaseTextProps['fontWeight'], 'regular' | 'bold'>;\n  isHighlighted?: boolean;\n  textTransform?: BaseTextProps['textTransform'];\n  color?: BaseTextProps['color'];\n} & TestID &\n  StyledPropsBlade;\n\ntype CodeHighlightedProps = CodeCommonProps & {\n  /**\n   * Adds background color to highlight the text\n   *\n   * @default true\n   */\n  isHighlighted?: true;\n  /**\n   * color prop can only be added when `isHighlighted` is set to `false`\n   */\n  color?: undefined;\n};\n\ntype CodeNonHighlightedProps = CodeCommonProps & {\n  /**\n   * Adds background color to highlight the text\n   *\n   * @default true\n   */\n  isHighlighted: false;\n  /**\n   * color prop to set color of text when `isHighlighted` is set to false\n   */\n  color?: BaseTextProps['color'];\n};\n\nexport type CodeProps = CodeHighlightedProps | CodeNonHighlightedProps;\n\ntype CodeContainerProps = {\n  size: CodeProps['size'];\n  isHighlighted: CodeProps['isHighlighted'];\n};\n\nconst platformType = getPlatformType();\nconst isPlatformWeb = platformType === 'browser' || platformType === 'node';\n\nconst getCodeFontSizeAndLineHeight = (\n  size: CodeProps['size'],\n): { fontSize: keyof FontSize; lineHeight: keyof Typography['lineHeights'] } | undefined => {\n  switch (size) {\n    case 'medium':\n      return { fontSize: 75, lineHeight: 75 };\n    case 'small':\n      return { fontSize: 25, lineHeight: 25 };\n    default:\n      if (__DEV__) {\n        throwBladeError({\n          moduleName: 'Code',\n          message: `Unexpected size: ${size}`,\n        });\n      }\n      return undefined;\n  }\n};\n\nconst CodeContainer = styled(BaseBox)<CodeContainerProps>((props) => {\n  const padding = `${makeSpace(props.theme.spacing[0])} ${makeSpace(props.theme.spacing[2])}`;\n  return {\n    padding,\n    backgroundColor: props.isHighlighted\n      ? props.theme.colors.feedback.background.neutral.subtle\n      : undefined,\n    borderRadius: props.theme.border.radius.medium,\n    display: isPlatformWeb ? 'inline-block' : 'flex',\n    alignSelf: isPlatformWeb ? undefined : 'center',\n    verticalAlign: 'middle',\n    lineHeight: makeTypographySize(props.theme.typography.lineHeights[0]),\n  };\n});\n\nconst getCodeColor = ({\n  isHighlighted,\n  color,\n}: Pick<CodeProps, 'isHighlighted' | 'color'>): CodeProps['color'] => {\n  if (isHighlighted) {\n    if (__DEV__) {\n      if (color) {\n        throwBladeError({\n          moduleName: 'Code',\n          message: '`color` prop cannot be used without `isHighlighted={false}`',\n        });\n      }\n    }\n\n    return 'surface.text.gray.subtle';\n  }\n\n  if (color) {\n    return color;\n  }\n\n  return 'surface.text.gray.normal';\n};\n\nconst _Code = (\n  {\n    children,\n    size = 'small',\n    weight = 'regular',\n    isHighlighted = true,\n    color,\n    testID,\n    textTransform,\n    ...styledProps\n  }: CodeProps,\n  ref: React.Ref<BladeElementRef>,\n): React.ReactElement => {\n  const { fontSize, lineHeight } = getCodeFontSizeAndLineHeight(size)!;\n  const codeTextColor = React.useMemo<CodeProps['color']>(\n    () => getCodeColor({ isHighlighted, color }),\n    [isHighlighted, color],\n  );\n\n  return (\n    <CodeContainer\n      ref={ref as never}\n      size={size}\n      isHighlighted={isHighlighted}\n      as={isPlatformWeb ? 'span' : undefined}\n      {...metaAttribute({ name: MetaConstants.Code, testID })}\n      {...getStyledProps(styledProps)}\n    >\n      <BaseText\n        color={codeTextColor}\n        fontFamily=\"code\"\n        fontSize={fontSize}\n        fontWeight={weight}\n        as={isPlatformWeb ? 'code' : undefined}\n        lineHeight={lineHeight}\n        textTransform={textTransform}\n      >\n        {children}\n      </BaseText>\n    </CodeContainer>\n  );\n};\n\n/**\n * Code component can be used for displaying token, variable names, or inlined code snippets.\n *\n * ## Usage\n *\n * ### In Web\n * In web, you can use it inside `Text` component or individually. The component is set to display `inline-block`\n *\n * ```tsx\n * <Text>\n *  Lorem ipsum <Code>SENTRY_TOKEN</Code> normal text\n * </Text>\n * ```\n *\n * ### In React Native\n *\n * In React Native, you would have to align it using flex to make sure the Code and the surrounding text is correctly aligned\n *\n * ```tsx\n *  <Box flexWrap=\"wrap\" flexDirection=\"row\" alignItems=\"flex-start\">\n *   <Text>Lorem ipsum </Text>\n *   <Code>SENTRY_TOKEN</Code>\n *   <Text> normal text</Text>\n * </Box>\n * ```\n */\nconst Code = React.forwardRef(_Code);\n\nexport { Code };\n"],"names":["platformType","getPlatformType","isPlatformWeb","getCodeFontSizeAndLineHeight","size","fontSize","lineHeight","__DEV__","throwBladeError","moduleName","message","undefined","CodeContainer","styled","BaseBox","props","padding","makeSpace","theme","spacing","backgroundColor","isHighlighted","colors","feedback","background","neutral","subtle","borderRadius","border","radius","medium","display","alignSelf","verticalAlign","makeTypographySize","typography","lineHeights","getCodeColor","_ref","color","_Code","_ref2","ref","children","_ref2$size","_ref2$weight","weight","_ref2$isHighlighted","testID","textTransform","styledProps","_objectWithoutProperties","_excluded","_ref3","codeTextColor","React","useMemo","_jsx","Object","assign","as","metaAttribute","name","MetaConstants","Code","getStyledProps","BaseText","fontFamily","fontWeight","forwardRef"],"mappings":"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"}