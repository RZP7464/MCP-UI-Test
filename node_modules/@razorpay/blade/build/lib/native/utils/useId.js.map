{"version":3,"file":"useId.js","sources":["../../../../src/utils/useId.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/prefer-nullish-coalescing */\n/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport * as React from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\n\n/**\n * Credit: https://github.com/reach/reach-ui/blob/dev/packages/auto-id/src/auto-id.ts\n */\nlet handoffComplete = false;\nlet id = 0;\nconst genId = () => ++id;\n\n/**\n * Reack hook to generate unique id\n * It helps us provide stable ID which we can reference in the components\n * and also works in server side rendered component\n * TODO: Add support for `React.useId` after React18 upgrade\n *\n * @param prefix prefix to append before the id\n * @param idProp the external id passed from the user\n */\nconst useId = (prefix?: string, idProp?: string) => {\n  const initialId = idProp || (handoffComplete ? genId() : null);\n  const [uid, setUid] = React.useState(initialId);\n\n  useIsomorphicLayoutEffect(() => {\n    // Patch the ID after render. We do this in `useLayoutEffect` to avoid any\n    // rendering flicker, though it'll make the first render slower (unlikely\n    // to matter, but you're welcome to measure your app and let us know if\n    // it's a problem).\n    if (uid === null) setUid(genId());\n  }, []);\n\n  React.useEffect(() => {\n    if (!handoffComplete) {\n      handoffComplete = true;\n    }\n  }, []);\n\n  const id = uid != null ? uid.toString() : undefined;\n  return prefix ? `${prefix}-${id}` : id!;\n};\n\nexport { useId };\n"],"names":["handoffComplete","id","genId","useId","prefix","idProp","initialId","_React$useState","React","useState","_React$useState2","_slicedToArray","uid","setUid","useIsomorphicLayoutEffect","useEffect","toString","undefined"],"mappings":";;;;AAUA,IAAIA,eAAe,CAAG,KAAK,CAC3B,IAAIC,EAAE,CAAG,CAAC,CACV,IAAMC,KAAK,CAAG,SAARA,KAAKA,EAAA,CAAA,OAAS,EAAED,EAAE,CAAA,CAAA,CAWlB,IAAAE,KAAK,CAAG,SAARA,KAAKA,CAAIC,MAAe,CAAEC,MAAe,CAAK,CAClD,IAAMC,SAAS,CAAGD,MAAM,GAAKL,eAAe,CAAGE,KAAK,EAAE,CAAG,IAAI,CAAC,CAC9D,IAAAK,eAAA,CAAsBC,KAAK,CAACC,QAAQ,CAACH,SAAS,CAAC,CAAAI,gBAAA,CAAAC,cAAA,CAAAJ,eAAA,IAAxCK,GAAG,CAAAF,gBAAA,CAAA,CAAA,CAAA,CAAEG,MAAM,CAAAH,gBAAA,CAElBI,CAAAA,CAAAA,CAAAA,yBAAyB,CAAC,UAAM,CAK9B,GAAIF,GAAG,GAAK,IAAI,CAAEC,MAAM,CAACX,KAAK,EAAE,CAAC,CACnC,CAAC,CAAE,EAAE,CAAC,CAENM,KAAK,CAACO,SAAS,CAAC,UAAM,CACpB,GAAI,CAACf,eAAe,CAAE,CACpBA,eAAe,CAAG,IAAI,CACxB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,IAAMC,EAAE,CAAGW,GAAG,EAAI,IAAI,CAAGA,GAAG,CAACI,QAAQ,EAAE,CAAGC,SAAS,CACnD,OAAOb,MAAM,CAAG,CAAGA,EAAAA,MAAM,CAAIH,CAAAA,EAAAA,EAAE,EAAE,CAAGA,EAAG,CACzC;;;;"}