{"version":3,"file":"makeAccessible.native.js","sources":["../../../../../src/utils/makeAccessible/makeAccessible.native.ts"],"sourcesContent":["/* eslint-disable guard-for-in */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n  accessibilityMap,\n  accessibilityRoleMap,\n  accessibilityStateKeys,\n  accessibilityValueKeys,\n} from './accessibilityMapNative';\nimport type { AccessibilityMap, AccessibilityProps } from './types';\nimport { logger } from '~utils/logger';\n\nexport const makeAccessible = (props: Partial<AccessibilityProps>): Record<string, unknown> => {\n  const newProps: Record<string, any> = {};\n\n  newProps.accessible = true;\n\n  // loop through all the incoming props and map them\n  for (const key in props) {\n    const propKey = key as keyof AccessibilityMap;\n    const propValue = props[propKey];\n    const accessibilityAttribute = accessibilityMap[propKey];\n\n    // group accesibilityState prop for native\n    if (accessibilityStateKeys.includes(propKey)) {\n      newProps.accessibilityState = {\n        ...newProps.accessibilityState,\n        [accessibilityAttribute]: propValue,\n      };\n      continue;\n    }\n\n    // group accesibilityValue prop for native\n    if (accessibilityValueKeys.includes(propKey)) {\n      newProps.accessibilityValue = {\n        ...newProps.accessibilityValue,\n        [accessibilityAttribute]: propValue,\n      };\n      continue;\n    }\n\n    // handle accessibilityHidden\n    // in react-native we have 2 platform-specific values for it.\n    if (propKey === 'hidden') {\n      if (propValue === true) {\n        newProps.accessibilityElementsHidden = true;\n        newProps.importantForAccessibility = 'no-hide-descendants';\n      }\n\n      delete newProps.accessible;\n      delete newProps.accessibilityHidden;\n      continue;\n    }\n\n    if (accessibilityAttribute) {\n      newProps[accessibilityAttribute] = propValue;\n    } else if (__DEV__) {\n      logger({\n        message: `No mapping found for ${propKey}. Make sure you have entered valid key`,\n        moduleName: 'makeAccessible',\n        type: 'warn',\n      });\n    }\n  }\n\n  if (newProps.accessibilityRole) {\n    // map web to native overlapping roles\n    type Roles = keyof typeof accessibilityRoleMap;\n    const role = accessibilityRoleMap[newProps.accessibilityRole as Roles];\n    newProps.accessibilityRole = role;\n\n    // ignore unsupported roles\n    if (!role) {\n      const validRoles = Object.keys(accessibilityRoleMap).join(', ');\n      console.log(\n        `[Blade: makeAccessible]: Unsupported accessibility role for react-native. Expected one of ${validRoles} but found ${\n          props.role as string\n        }`,\n      );\n      delete newProps.accessibilityRole;\n    }\n  }\n\n  return newProps;\n};\n"],"names":["makeAccessible","props","newProps","accessible","key","propKey","propValue","accessibilityAttribute","accessibilityMap","accessibilityStateKeys","includes","accessibilityState","Object","assign","_defineProperty","accessibilityValueKeys","accessibilityValue","accessibilityElementsHidden","importantForAccessibility","accessibilityHidden","__DEV__","logger","message","moduleName","type","accessibilityRole","role","accessibilityRoleMap","validRoles","keys","join","console","log"],"mappings":";;;;AAWa,IAAAA,cAAc,CAAG,SAAjBA,cAAcA,CAAIC,KAAkC,CAA8B,CAC7F,IAAMC,QAA6B,CAAG,EAAE,CAExCA,QAAQ,CAACC,UAAU,CAAG,IAAI,CAG1B,IAAK,IAAMC,GAAG,IAAIH,KAAK,CAAE,CACvB,IAAMI,OAAO,CAAGD,GAA6B,CAC7C,IAAME,SAAS,CAAGL,KAAK,CAACI,OAAO,CAAC,CAChC,IAAME,sBAAsB,CAAGC,gBAAgB,CAACH,OAAO,CAAC,CAGxD,GAAII,sBAAsB,CAACC,QAAQ,CAACL,OAAO,CAAC,CAAE,CAC5CH,QAAQ,CAACS,kBAAkB,CAAAC,MAAA,CAAAC,MAAA,CAAA,EAAA,CACtBX,QAAQ,CAACS,kBAAkB,CAAAG,eAAA,CAC7BP,EAAAA,CAAAA,sBAAsB,CAAGD,SAAS,CACpC,CAAA,CACD,SACF,CAGA,GAAIS,sBAAsB,CAACL,QAAQ,CAACL,OAAO,CAAC,CAAE,CAC5CH,QAAQ,CAACc,kBAAkB,CAAAJ,MAAA,CAAAC,MAAA,CAAA,EAAA,CACtBX,QAAQ,CAACc,kBAAkB,CAAAF,eAAA,CAC7BP,EAAAA,CAAAA,sBAAsB,CAAGD,SAAS,EACpC,CACD,SACF,CAIA,GAAID,OAAO,GAAK,QAAQ,CAAE,CACxB,GAAIC,SAAS,GAAK,IAAI,CAAE,CACtBJ,QAAQ,CAACe,2BAA2B,CAAG,IAAI,CAC3Cf,QAAQ,CAACgB,yBAAyB,CAAG,qBAAqB,CAC5D,CAEA,OAAOhB,QAAQ,CAACC,UAAU,CAC1B,OAAOD,QAAQ,CAACiB,mBAAmB,CACnC,SACF,CAEA,GAAIZ,sBAAsB,CAAE,CAC1BL,QAAQ,CAACK,sBAAsB,CAAC,CAAGD,SAAS,CAC9C,CAAC,KAAM,GAAIc,OAAO,CAAE,CAClBC,MAAM,CAAC,CACLC,OAAO,CAAE,CAAA,qBAAA,EAAwBjB,OAAO,CAAA,sCAAA,CAAwC,CAChFkB,UAAU,CAAE,gBAAgB,CAC5BC,IAAI,CAAE,MACR,CAAC,CAAC,CACJ,CACF,CAEA,GAAItB,QAAQ,CAACuB,iBAAiB,CAAE,CAG9B,IAAMC,IAAI,CAAGC,oBAAoB,CAACzB,QAAQ,CAACuB,iBAAiB,CAAU,CACtEvB,QAAQ,CAACuB,iBAAiB,CAAGC,IAAI,CAGjC,GAAI,CAACA,IAAI,CAAE,CACT,IAAME,UAAU,CAAGhB,MAAM,CAACiB,IAAI,CAACF,oBAAoB,CAAC,CAACG,IAAI,CAAC,IAAI,CAAC,CAC/DC,OAAO,CAACC,GAAG,CACT,CAA6FJ,0FAAAA,EAAAA,UAAU,cACrG3B,KAAK,CAACyB,IAAI,CAAA,CAEd,CAAC,CACD,OAAOxB,QAAQ,CAACuB,iBAAiB,CACnC,CACF,CAEA,OAAOvB,QAAQ,CACjB;;;;"}