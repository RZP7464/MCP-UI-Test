{"version":3,"file":"useCallbackRef.js","sources":["../../../../src/utils/useCallbackRef.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport React, { useCallback, useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\n\n// Prevent webpack from importing this:\n// https://github.com/webpack/webpack/issues/14814#issuecomment-1536757985\n// https://github.com/radix-ui/primitives/issues/2796\nconst useReactInsertionEffect = (React as any)[' useInsertionEffect '.trim().toString()];\nconst useInsertionEffectFallback = useReactInsertionEffect || useIsomorphicLayoutEffect;\n\n/**\n * This hook is user-land implementation of the experimental `useEffectEvent` hook.\n * React docs: https://react.dev/learn/separating-events-from-effects#declaring-an-effect-event\n *\n * This hook is useful when you want to use a callback function inside a useEffect while keeping it \"fresh\" but you don't want to add it to the dependency array.\n */\nfunction useCallbackRef<Args extends unknown[], Return>(\n  callback: ((...args: Args) => Return) | undefined,\n  deps: React.DependencyList = [],\n) {\n  const callbackRef = useRef<typeof callback>(callback);\n\n  useInsertionEffectFallback(() => {\n    callbackRef.current = callback;\n  });\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useCallback((...args: Args) => callbackRef.current?.(...args), deps);\n}\n\nexport { useCallbackRef };\n"],"names":["useReactInsertionEffect","React","trim","toString","useInsertionEffectFallback","useIsomorphicLayoutEffect","useCallbackRef","callback","deps","arguments","length","undefined","callbackRef","useRef","current","useCallback","_len","args","Array","_key","apply"],"mappings":";;;AAQA,IAAMA,uBAAuB,CAAIC,cAAK,CAAS,sBAAsB,CAACC,IAAI,EAAE,CAACC,QAAQ,EAAE,CAAC,CACxF,IAAMC,0BAA0B,CAAGJ,uBAAuB,EAAIK,yBAAyB,CAQvF,SAASC,cAAcA,CACrBC,QAAiD,CAEjD,CAAA,IADAC,IAA0B,CAAAC,SAAA,CAAAC,MAAA,CAAA,CAAA,EAAAD,SAAA,CAAA,CAAA,CAAA,GAAAE,SAAA,CAAAF,SAAA,CAAG,CAAA,CAAA,CAAA,EAAE,CAE/B,IAAMG,WAAW,CAAGC,MAAM,CAAkBN,QAAQ,CAAC,CAErDH,0BAA0B,CAAC,UAAM,CAC/BQ,WAAW,CAACE,OAAO,CAAGP,QAAQ,CAChC,CAAC,CAAC,CAGF,OAAOQ,WAAW,CAAC,UAAA,CAAA,IAAA,IAAAC,IAAA,CAAAP,SAAA,CAAAC,MAAA,CAAIO,IAAI,CAAAC,IAAAA,KAAA,CAAAF,IAAA,CAAAG,CAAAA,IAAA,GAAAA,IAAA,CAAAH,IAAA,CAAAG,IAAA,EAAA,CAAA,CAAJF,IAAI,CAAAE,IAAA,CAAA,CAAAV,SAAA,CAAAU,IAAA,CAAA,CAAA,CAAA,OAAWP,WAAW,CAACE,OAAO,EAAA,IAAA,CAAA,KAAA,CAAA,CAAnBF,WAAW,CAACE,OAAO,CAAAM,KAAA,CAAnBR,WAAW,CAAcK,IAAI,CAAC,CAAA,CAAA,CAAET,IAAI,CAAC,CAC7E;;;;"}